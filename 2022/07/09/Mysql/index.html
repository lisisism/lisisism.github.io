<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    MySQL 丨
    

    Lism Blog
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="/Lism Blog" type="application/atom+xml">
</head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">/Lism Blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">MySQL</div>
  <div class="post-meta">
    <div class="date">2022 七月 9日</div>
    <div class="tags">
      
      <div class="tag-item">MySQL</div>
      
    </div>
  </div>
  

  <main class="post-content"><h1 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> MySQL</h1>
<p>[TOC]</p>
<h2 id="mysql入门"><a class="markdownIt-Anchor" href="#mysql入门"></a> MySQL入门</h2>
<h3 id="数据库概述"><a class="markdownIt-Anchor" href="#数据库概述"></a> 数据库概述</h3>
<p><strong>MySQL是什么？</strong></p>
<ul>
<li>MySQL 是最流行的<u>关系型数据库管理系统</u>，在WEB应用方面 MySQL 是最好的RDBMS(Relational Database Management System：关系数据库管理系统)应用软件之一。</li>
</ul>
<p><strong>什么是数据库</strong></p>
<ul>
<li>数据库就是<u>存储数据的仓库</u>，其本质是一个<u>文件系统</u>，数据按照特定的格式将数据存储起来，用户可以通过SQL对数据库中的数据进行增加，修改，删除及查询操作。</li>
</ul>
<p><strong>什么是关系型数据库</strong></p>
<ul>
<li>数据库中的<u>记录是有行有列的数据库</u>就是关系型数据库，与之相反的就是NoSQL数据库了。</li>
</ul>
<p><strong>数据库和表</strong></p>
<ul>
<li>数据库管理系统（DataBase Management System，<strong>DBMS</strong>）：指一种<strong>操作和管理数据库的大型软件</strong>，用于建立、使用和维护数据库，对数据库进行统一管理和控制，以保证数据库的安全性和完整性。用户通过数据库管理系统访问<strong>数据库中表内的数据</strong>。(记录)</li>
</ul>
<p><strong>常见的数据库管理系统</strong></p>
<ul>
<li>
<p><strong>MYSQL</strong> ：开源免费的数据库，小型的数据库.已经被Oracle收购了.MySQL5.5版本之后都是由Oracle发布的版本。</p>
</li>
<li>
<p><strong>Oracle</strong>：收费的大型数据库，Oracle公司的产品。Oracle收购SUN公司，收购MYSQL。</p>
</li>
<li>
<p><strong>DB2</strong>：IBM公司的数据库产品,收费的。常应用在银行系统中.   在中国的互联网公司，要求去IOE（IBM小型机、Oracle数据库、EMC存储设备）</p>
</li>
<li>
<p><strong>SQLServer</strong>：MicroSoft 公司收费的中型的数据库。C#、.net等语言常使用。</p>
</li>
<li>
<p><strong>SyBase</strong>  ：已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner。</p>
</li>
<li>
<p><strong>SQLite</strong>   : 嵌入式的小型数据库，应用在手机端。</p>
</li>
</ul>
<h3 id="mysql发展历程"><a class="markdownIt-Anchor" href="#mysql发展历程"></a> MySQL发展历程</h3>
<p>	MySQL的历史可以追溯到1979年，一个名为Monty Widenius的程序员在为TcX的小公司打工，并且用BASIC设计了一个报表工具，使其可以在4MHz主频和16KB内存的计算机上运行。当时，这只是一个很底层的且仅面向报表的存储引擎，名叫Unireg。</p>
<p>	1990年，TcX公司的客户中开始有人要求为他的API提供SQL支持。Monty直接借助于mSQL的代码，将它集成到自己的存储引擎中。令人失望的是，效果并不太令人满意，决心自己重写一个SQL支持。</p>
<p>	1996年，MySQL 1.0发布，它只面向一小拨人，相当于内部发布。</p>
<p>	到了1996年10月，MySQL 3.11.1发布(MySQL没有2.x版本)，最开始只提供Solaris下的二进制版本。一个月后，Linux版本出现了。在接下来的两年里，MySQL被依次移植到各个平台。</p>
<p>	1999～2000年，MySQL AB公司在瑞典成立。Monty雇了几个人与Sleepycat合作，开发出了Berkeley DB引擎, 由于BDB支持事务处理，因此MySQL从此开始支持事务处理了。</p>
<p>	2000，MySQL不仅公布自己的源代码，并采用GPL(GNU General Public License)许可协议，正式进入开源世界。同年4月，MySQL对旧的存储引擎ISAM进行了整理，将其命名为MyISAM。</p>
<p>	2001年，集成Heikki Tuuri的存储引擎InnoDB，这个引擎不仅能持事务处理，并且支持行级锁。后来该引擎被证明是最为成功的MySQL事务存储引擎。MySQL与InnoDB的正式结合版本是4.0</p>
<p>	2003年12月，MySQL 5.0版本发布，提供了视图、存储过程等功能。</p>
<p>	2008年1月，MySQL AB公司被Sun公司以10亿美金收购，MySQL数据库进入Sun时代。在Sun时代，Sun公司对其进行了大量的推广、优化、Bug修复等工作。</p>
<p>	2008年11月，MySQL 5.1发布，它提供了分区、事件管理，以及基于行的复制和基于磁盘的NDB集群系统，同时修复了大量的Bug。</p>
<p>	2009年4月，Oracle公司以74亿美元收购Sun公司，自此MySQL数据库进入Oracle时代，而其第三方的存储引擎InnoDB早在2005年就被Oracle公司收购。</p>
<p>	2010年12月，MySQL 5.5发布，其主要新特性包括半同步的复制及对SIGNAL/RESIGNAL的异常处理功能的支持，最重要的是InnoDB存储引擎终于变为当前MySQL的默认存储引擎。MySQL 5.5不是时隔两年后的一次简单的版本更新，而是加强了MySQL各个方面在企业级的特性。Oracle公司同时也承诺MySQL 5.5和未来版本仍是采用GPL授权的开源产品。</p>
<h3 id="linux安装过程"><a class="markdownIt-Anchor" href="#linux安装过程"></a> linux安装过程</h3>
<p>查看本机是否安装了MySQL</p>
<pre><code class="highlight shell">rpm -qa|grep mysql</code></pre>
<h4 id="安装mysql"><a class="markdownIt-Anchor" href="#安装mysql"></a> 安装MySQL</h4>
<p><strong>国内镜像列表</strong><br />
<a target="_blank" rel="noopener" href="http://mirrors.sohu.com/mysql/MySQL-8.0/">http://mirrors.sohu.com/mysql/MySQL-8.0/</a></p>
<p><strong>安装仓库列表</strong></p>
<ol>
<li>
<p>要使用<strong>yum安装MySQL</strong>，要使用MySQL的yum仓库，先从官网下载适合你系统的仓库（即你要告诉yum你要安装哪个版本的MySQL）<br />
<u><code>http://dev.mysql.com/downloads/repo/yun/</code></u></p>
</li>
<li>
<p>我们centos6.4对应的rpm包为：<u>mysql-community-release-el6-5.noarch.rpm</u></p>
</li>
<li>
<p>然后将<u>mysql-community-release-el6-5.noarch.rpm</u>上传到Linux系统</p>
</li>
<li>
<p>在上传的MySQL的rpm包当前目录下，执行以下命令：</p>
</li>
</ol>
<pre><code class="highlight plaintext">yum localinstall mysql-community-release-el6-5.noarch.rpm</code></pre>
<p><strong>安装MySQL</strong></p>
<pre><code class="highlight plaintext">yum install mysql-community-server</code></pre>
<h4 id="启动mysql"><a class="markdownIt-Anchor" href="#启动mysql"></a> 启动MySql</h4>
<p><strong>启动MySQL</strong></p>
<pre><code class="highlight plaintext">service mysqld start
或者
systemctl start  mysqld.service</code></pre>
<p><strong>重启MySQL</strong></p>
<pre><code class="highlight plaintext">service mysqld restart
或者
systemctl restart mysqld.service</code></pre>
<p><strong>关闭MySql</strong></p>
<pre><code class="highlight plaintext">service mysqld stop
或者
systemctl stop mysqld.service</code></pre>
<p><strong>查看mysql启动状态</strong></p>
<pre><code class="highlight plaintext">service mysqld status
或者
systemctl status mysqld.service</code></pre>
<h4 id="设置root用户密码"><a class="markdownIt-Anchor" href="#设置root用户密码"></a> 设置root用户密码</h4>
<p><strong>设置root密码</strong></p>
<p>MySQL数据库安装完成以后只会有一个root管理员账号，但是此时的root账号还并没有为其设置密码，在第一次启动MySQL服务时，会进行数据库的一些初始化工作，在输出的信息中，会出现下面这行信息：</p>
<pre><code class="highlight plaintext">grep &quot;password&quot; /var/log/mysqld.log</code></pre>
<p>该信息即为MySQL的root初始密码:</p>
<p>如下命令进入数据库（输入上一步查出的密码）：</p>
<pre><code class="highlight plaintext">mysql -uroot -p</code></pre>
<hr />
<p>（Mysql5.x）在开始修改密码前，我们可以取消MySQL对密码难度的限制：</p>
<pre><code class="highlight plaintext">mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=1;</code></pre>
<p>（Mysql8.x）在开始修改密码前，我们可以取消MySQL对密码难度的限制：</p>
<pre><code class="highlight plaintext">mysql&gt; set global validate_password.policy=0;
mysql&gt; set global validate_password.length=1;</code></pre>
<p>输入初始密码，此时不能做任何事情，因为MySQL默认必须修改密码之后才能操作数据库：</p>
<pre><code class="highlight plaintext">mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;new password&#x27;;</code></pre>
<hr />
<p><s>运行下列命令即可设置root用户密码</s>：</p>
<pre><code class="highlight plaintext">/usr/bin/mysqladmin -u root password &#x27;new-password&#x27;         //运行此行命令为root账号设置密码</code></pre>
<h4 id="命令行连接mysql"><a class="markdownIt-Anchor" href="#命令行连接mysql"></a> 命令行连接mysql</h4>
<pre><code class="highlight plaintext">mysql -uroot -p123456</code></pre>
<h4 id="mysql远程连接授权"><a class="markdownIt-Anchor" href="#mysql远程连接授权"></a> MySQL远程连接授权</h4>
<p>正常情况下Windows客户端是无法远程连接Linux系统的MySQL的，需要远程连接授权才可以</p>
<pre><code class="highlight plaintext">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &#x27;myuser&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;mypassword&#x27; WITH GRANT OPTION</code></pre>
<blockquote>
<p>注意：‘myuser’，'mypassword’需要替换成实际的用户名和密码</p>
</blockquote>
<h4 id="关闭linux防火墙"><a class="markdownIt-Anchor" href="#关闭linux防火墙"></a> 关闭Linux防火墙</h4>
<p>如果是阿里云服务器，只需配置相应的安全组即可。</p>
<blockquote>
<p>防火墙主要目的是阻止端口用的，能ping通不代表能连接（ping主要是ping连接，ping并不涉及端口）</p>
</blockquote>
<pre><code class="highlight plaintext">service iptables stop</code></pre>
<h4 id="设置大小写不敏感"><a class="markdownIt-Anchor" href="#设置大小写不敏感"></a> 设置大小写不敏感</h4>
<ol>
<li>
<p>Linux下mysql安装完后是默认：区分表名的大小写，不区分列名的大小写</p>
</li>
<li>
<p>用root账号登陆后，在/etc/my.cnf中的[mysqld]后添加</p>
</li>
</ol>
<pre><code class="highlight plaintext">lower_case_table_names=1     

//0：区分大小写    
//1：不区分大小写</code></pre>
<ol start="3">
<li>重启MySQL服务，这样就设置成功不区分表名大小写</li>
</ol>
<h4 id="卸载"><a class="markdownIt-Anchor" href="#卸载"></a> 卸载</h4>
<p>运行以下命令即可</p>
<pre><code class="highlight plaintext">yum remove mysql mysql-server mysql-libs mysql-common

rm -rf /var/lib/mysql
rm /etc/my.cnf</code></pre>
<blockquote>
<p>软件卸载完毕后如果需要可以删除MySQL的数据库</p>
</blockquote>
<pre><code class="highlight plaintext">/var/lib/mysql</code></pre>
<h3 id="windows安装过程"><a class="markdownIt-Anchor" href="#windows安装过程"></a> windows安装过程</h3>
<ul>
<li>开始安装<br />
*</li>
<li>选择compelete，完整安装<br />
*</li>
<li>自动弹出配置界面<br />
*</li>
<li>选择标准配置<br />
*</li>
<li>设置root密码
<ul>
<li>root是MySQL默认的管理员账号</li>
<li></li>
</ul>
</li>
<li>成功界面<br />
*</li>
</ul>
<h4 id="完全卸载windows"><a class="markdownIt-Anchor" href="#完全卸载windows"></a> 完全卸载(windows)</h4>
<p><strong>mysql 卸载</strong></p>
<ul>
<li>运行安装程序，点击Remove进行卸载。</li>
<li></li>
</ul>
<p><strong>删除mysql安装目录</strong></p>
<ul>
<li>删除mysql目录</li>
</ul>
<pre><code class="highlight plaintext">C:\Program Files\MySQL</code></pre>
<p><strong>删除my.ini</strong></p>
<ul>
<li>检查C:\WINDOWS目录下是否有my.ini文件,将其删除</li>
<li>这个文件不一定存在</li>
</ul>
<p><strong>删除注册表</strong></p>
<ul>
<li>
<p><code>win+r</code> 弹出窗口输入 <code>regedit</code></p>
</li>
<li>
<p>删除key1</p>
</li>
</ul>
<pre><code class="highlight plaintext">HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL</code></pre>
<ul>
<li></li>
<li>删除key2
<ul>
<li>如下两个key不一定有，没有就不理了</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application \MySQL</code></pre>
<pre><code class="highlight plaintext">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQL</code></pre>
<p><strong>删除ProgramData目录下的文件</strong></p>
<ul>
<li>如果是win10,则删除</li>
</ul>
<pre><code class="highlight plaintext">C:\ProgramData\MySQL Server 5.5</code></pre>
<blockquote>
<p>这个目录默认是隐藏的，需要在文件夹选项中显示出来</p>
</blockquote>
<ul>
<li>如果是win7以下，删除</li>
</ul>
<pre><code class="highlight plaintext">C:\Documents and Settings\All Users\Application Data\MySQL</code></pre>
<p><strong>重新安装</strong></p>
<h4 id="windows启动"><a class="markdownIt-Anchor" href="#windows启动"></a> Windows启动</h4>
<p>启动服务：</p>
<pre><code class="highlight plaintext">mysqld --console　　
或　　net start mysql</code></pre>
<p>关闭服务：</p>
<pre><code class="highlight plaintext">mysqladmin -uroot shudown　　
或　　net stop mysql</code></pre>
<h3 id="sqlyog-安装与使用"><a class="markdownIt-Anchor" href="#sqlyog-安装与使用"></a> SQLyog 安装与使用</h3>
<p>输入用户名、密码，点击连接按钮，进行访问MySQL数据库进行操作</p>
<p>在Query窗口中，输入SQL代码，选中要执行的SQL代码，按F8键运行，或按执行按钮运行</p>
<h3 id="cmd命令"><a class="markdownIt-Anchor" href="#cmd命令"></a> CMD命令</h3>
<blockquote>
<p>MySQL配置文件：在MySQL目录下的  “my.ini”  文件中（可以修改端口号，字符集等）</p>
</blockquote>
<p><strong>cmd命令</strong></p>
<p>启动MySQL服务：</p>
<pre><code class="highlight plaintext">net start mysql</code></pre>
<p>关闭MySQL服务：</p>
<pre><code class="highlight plaintext">net stop mysql</code></pre>
<p>启动MySQL：</p>
<pre><code class="highlight plaintext">mysql -hlocalhost -uroot -p           (-h本机链接或远程链接域名    -u指定用户名 -p密码)</code></pre>
<p>关闭MySQL：</p>
<pre><code class="highlight plaintext">exit</code></pre>
<p>查看状态：</p>
<pre><code class="highlight plaintext">\s</code></pre>
<p>查看所有默认配置变量：</p>
<pre><code class="highlight plaintext">show variables;</code></pre>
<p>查看所有数据库：</p>
<pre><code class="highlight plaintext">show databases;</code></pre>
<p>帮助文档：</p>
<pre><code class="highlight plaintext">? contents</code></pre>
<h3 id="cmd中文乱码"><a class="markdownIt-Anchor" href="#cmd中文乱码"></a> CMD中文乱码</h3>
<p>修改my.ini文件，然后重启mysql服务器</p>
<h2 id="sql语句"><a class="markdownIt-Anchor" href="#sql语句"></a> SQL语句</h2>
<p><strong>什么是SQL？</strong></p>
<ul>
<li>
<p>全称Structured Query Language，简称SQL，中文叫结构化查询语言。</p>
</li>
<li>
<p>关系数据库语言的国际标准。SQL92、SQL99</p>
</li>
<li>
<p>不只是mysql还有其他数据库，在SQL92或者SQL99这些国际SQL标准基础之上，它们还扩展了自己的一些SQL语句，比如MySQL中的limit关键字</p>
</li>
</ul>
<p><strong>SQL分类：</strong></p>
<ul>
<li>
<p>数据定义语言：简称<strong>DDL</strong>(Data Definition Language)，用来定义数据库对象：数据库，表，列等。关键字：create，alter，drop等</p>
</li>
<li>
<p>数据操作语言：简称<strong>DML</strong>(Data Manipulation Language)，用来对数据库中表的记录进行更新。关键字：insert，delete，update等</p>
</li>
<li>
<p>数据控制语言：简称<strong>DCL</strong>(Data Control Language)，用来定义数据库的访问权限和安全级别，及创建用户；关键字：grant等</p>
</li>
<li>
<p>数据查询语言：简称<strong>DQL</strong>(Data Query Language)，用来查询数据库中表的记录。关键字：select，from，where等</p>
</li>
</ul>
<h3 id="数据库操作"><a class="markdownIt-Anchor" href="#数据库操作"></a> 数据库操作</h3>
<h4 id="创建数据库"><a class="markdownIt-Anchor" href="#创建数据库"></a> 创建数据库</h4>
<p>语法：</p>
<ul>
<li>&lt;数据库名&gt;：创建数据库的名称。MySQL 的数据存储区将以目录方式表示 MySQL 数据库，因此数据库名称必须符合操作系统的文件夹命名规则，注意在 MySQL 中不区分大小写。</li>
<li>IF NOT EXISTS：在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。此选项可以用来避免数据库已经存在而重复创建的错误。</li>
<li>[DEFAULT] CHARACTER SET：指定数据库的默认字符集。</li>
<li>[DEFAULT] COLLATE：指定字符集的默认校对规则。</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="operator">&lt;</span>数据库名<span class="operator">&gt;</span>
[[<span class="keyword">DEFAULT</span>] <span class="keyword">CHARACTER SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span>] [[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>];</code></pre>
<blockquote>
<p>MySQL 的字符集（CHARACTER）和校对规则（COLLATION）两个不同的概念：字符集是用来定义 MySQL 存储字符串的方式，校对规则定义了比较字符串的方式，解决排序和字符分组的问题</p>
</blockquote>
<blockquote>
<p>字符集和校对规则是一对多的关系，每个字符集至少对应一个校对规则，MySQL 支持 39 种字符集的将近 200 种校对规则</p>
</blockquote>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">create</span> database leeTest <span class="keyword">character set</span> 字符集;

<span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test_db_char <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8 <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_chinese_ci;</code></pre>
<h4 id="查看数据库"><a class="markdownIt-Anchor" href="#查看数据库"></a> 查看数据库</h4>
<ul>
<li>查看数据库服务器中的所有的数据库:</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">show</span> databases;

<span class="keyword">SHOW</span> DATABASES [<span class="keyword">LIKE</span> <span class="string">&#x27;数据库名&#x27;</span>];</code></pre>
<ul>
<li>查看某个数据库的定义的信息:</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">show</span> <span class="keyword">create</span> database 数据库名;</code></pre>
<p><strong>查看正在使用的数据库:</strong></p>
<pre><code class="highlight sql"><span class="keyword">select</span> database();</code></pre>
<h4 id="修改数据库"><a class="markdownIt-Anchor" href="#修改数据库"></a> 修改数据库</h4>
<p>语法：</p>
<ul>
<li>ALTER DATABASE 用于更改数据库的全局特性。这些特性存储在数据库目录的 db.opt 文件中。</li>
<li>使用 ALTER DATABASE 需要获得数据库 ALTER 权限。</li>
<li>数据库名称可以忽略，此时语句对应于默认数据库。</li>
<li>CHARACTER SET 子句用于更改默认的数据库字符集。</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">ALTER</span> DATABASE [数据库名] &#123; [ <span class="keyword">DEFAULT</span> ] <span class="keyword">CHARACTER SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span> <span class="operator">|</span>[ <span class="keyword">DEFAULT</span> ] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>&#125;</code></pre>
<h4 id="删除数据库"><a class="markdownIt-Anchor" href="#删除数据库"></a> 删除数据库</h4>
<pre><code class="highlight sql"><span class="keyword">drop</span> database 数据库名称;

<span class="keyword">DROP</span> DATABASE [ IF <span class="keyword">EXISTS</span> ] <span class="operator">&lt;</span>数据库名<span class="operator">&gt;</span></code></pre>
<h4 id="切换数据库"><a class="markdownIt-Anchor" href="#切换数据库"></a> 切换数据库</h4>
<pre><code class="highlight sql">use 数据库名;</code></pre>
<h3 id="字段类型"><a class="markdownIt-Anchor" href="#字段类型"></a> 字段类型</h3>
<h4 id="整数型"><a class="markdownIt-Anchor" href="#整数型"></a> <strong>整数型</strong></h4>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
<th>有符号数</th>
<th>无符号数</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>很小的整数</td>
<td>1个字节</td>
<td>-128〜127</td>
<td>0〜255</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>小的整数</td>
<td>2个宇节</td>
<td>-32768〜32767</td>
<td>0〜65535</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>中等大小的整数</td>
<td>3个字节</td>
<td>-8388608〜8388607</td>
<td>0〜16777215</td>
</tr>
<tr>
<td><strong>INT</strong></td>
<td>普通大小的整数</td>
<td>4个字节</td>
<td>-2147483648〜2147483647</td>
<td>0〜4294967295</td>
</tr>
<tr>
<td>BIGINT</td>
<td>大整数</td>
<td>8个字节</td>
<td>-9223372036854775808〜9223372036854775807</td>
<td>0〜18446744073709551615</td>
</tr>
</tbody>
</table>
<blockquote>
<p>该属性字段可以添加 AUTO_INCREMENT 自增约束条件</p>
</blockquote>
<blockquote>
<p><strong>指定字段unsigned，只能储存正数</strong></p>
</blockquote>
<hr />
<h4 id="浮点型"><a class="markdownIt-Anchor" href="#浮点型"></a> <strong>浮点型</strong></h4>
<p>浮点类型和定点类型都可以用(M, D)来表示，其中M称为精度，表示总共的位数；D称为标度，表示小数的位数</p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLOAT</td>
<td>单精度浮点数</td>
<td>4 个字节</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>双精度浮点数</td>
<td>8 个字节</td>
</tr>
<tr>
<td><strong>DECIMAL</strong> (M, D)，DEC</td>
<td>压缩的“严格”定点数</td>
<td>M+2 个字节</td>
</tr>
</tbody>
</table>
<p>DECIMAL 类型不同于 FLOAT 和 DOUBLE。DOUBLE 实际上是以字符串的形式存放的，DECIMAL 可能的最大取值范围与 DOUBLE 相同，但是有效的取值范围由 M 和 D 决定。如果改变 M 而固定 D，则取值范围将随 M 的变大而变大</p>
<blockquote>
<p>提示：不论是定点还是浮点类型，如果用户指定的精度超出精度范围，则会四舍五入进行处理</p>
</blockquote>
<blockquote>
<p>FLOAT 和 DOUBLE 在不指定精度时，默认会按照实际的精度（由计算机硬件和操作系统决定），DECIMAL 如果不指定精度，默认为（10，0）</p>
</blockquote>
<blockquote>
<p>在 MySQL 中，定点数以字符串形式存储，在对<strong>精度要求比较高的时候</strong>（如货币、科学数据），<strong>使用 DECIMAL 的类型比较好</strong>，另外两个浮点数进行减法和比较运算时也容易出问题，所以在使用浮点数时需要注意，并尽量避免做浮点数比较</p>
</blockquote>
<hr />
<h4 id="字符型"><a class="markdownIt-Anchor" href="#字符型"></a> <strong>字符型</strong></h4>
<ul>
<li>
<p>VARCHAR(M) 是长度可变的字符串，M 表示最大列的长度，M 的范围是 0～65535。VARCHAR 的最大实际长度由最长的行的大小和使用的字符集确定，而实际占用的空间为字符串的实际长度加 1</p>
</li>
<li>
<p>CHAR(M) 为固定长度字符串，在定义时指定字符串列长。当保存时，在右侧填充空格以达到指定的长度。M 表示列的长度，范围是 0～255 个字符</p>
</li>
<li>
<p>TEXT 列保存非二进制字符串，如文章内容、评论等</p>
</li>
</ul>
<blockquote>
<p>VARCHAR 和 TEXT 类型是变长类型，其存储需求取决于列值的实际长度（在前面的表格中用 L 表示），而不是取决于类型的最大可能尺寸</p>
</blockquote>
<ul>
<li>ENUM 是一个字符串对象，值为表创建时列规定中枚举的一列值</li>
</ul>
<pre><code class="highlight sql"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> ENUM( <span class="string">&#x27;值1&#x27;</span>, <span class="string">&#x27;值1&#x27;</span>, …, <span class="string">&#x27;值n&#x27;</span> )</code></pre>
<blockquote>
<p>提示：ENUM 列总有一个默认值。如果将 ENUM 列声明为 NULL，NULL 值则为该列的一个有效值，并且默认值为 NULL。如果 ENUM 列被声明为 NOT NULL，其默认值为允许的值列表的第 1 个元素。</p>
</blockquote>
<ul>
<li>SET 是一个字符串的对象，可以有零或多个值，SET 列最多可以有 64 个成员，值为表创建时规定的一列值。指定包括多个 SET 成员的 SET 列值时，各成员之间用逗号,隔开，语法格式如下：</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">SET</span>( <span class="string">&#x27;值1&#x27;</span>, <span class="string">&#x27;值2&#x27;</span>, …, <span class="string">&#x27;值n&#x27;</span> )</code></pre>
<blockquote>
<p>但与 ENUM 类型不同的是，ENUM 类型的字段只能从定义的列值中选择一个值插入，而 SET 类型的列可从定义的列值中选择多个字符的联合。</p>
</blockquote>
<blockquote>
<p>提示：如果插入 SET 字段中的列值有重复，则 MySQL 自动删除重复的值；插入 SET 字段的值的顺序并不重要，MySQL 会在存入数据库时，按照定义的顺序显示；如果插入了不正确的值，默认情况下，MySQL 将忽视这些值，给出警告。</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR(M)</td>
<td>固定长度非二进制字符串</td>
<td>M 字节，1&lt;=M&lt;=255</td>
</tr>
<tr>
<td><strong>VARCHAR</strong>(M)</td>
<td><strong>变长</strong>非二进制字符串</td>
<td>L+1字节，在此，L&lt; = M和 1&lt;=M&lt;=255</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>非常小的非二进制字符串</td>
<td>L+1字节，在此，L&lt;2^8</td>
</tr>
<tr>
<td>TEXT</td>
<td>小的非二进制字符串</td>
<td>L+2字节，在此，L&lt;2^16</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>中等大小的非二进制字符串</td>
<td>L+3字节，在此，L&lt;2^24</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>大的非二进制字符串</td>
<td>L+4字节，在此，L&lt;2^32</td>
</tr>
<tr>
<td>ENUM</td>
<td>枚举类型，只能有一个枚举字符串值</td>
<td>1或2个字节，取决于枚举值的数目 (最大值为65535)</td>
</tr>
<tr>
<td>SET</td>
<td>一个设置，字符串对象可以有零个或 多个SET成员</td>
<td>1、2、3、4或8个字节，取决于集合 成员的数量（最多64个成员）</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="日期类型"><a class="markdownIt-Anchor" href="#日期类型"></a> <strong>日期类型</strong></h4>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>日期格式</th>
<th>日期范围</th>
<th>存储需求</th>
</tr>
</thead>
<tbody>
<tr>
<td>YEAR</td>
<td>YYYY</td>
<td>1901 ~ 2155</td>
<td>1 个字节</td>
</tr>
<tr>
<td>TIME</td>
<td>HH:MM:SS</td>
<td>-838:59:59 ~ 838:59:59</td>
<td>3 个字节</td>
</tr>
<tr>
<td><strong>DATE</strong></td>
<td>YYYY-MM-DD</td>
<td>1000-01-01 ~ 9999-12-3</td>
<td>3 个字节</td>
</tr>
<tr>
<td><strong>DATETIME</strong></td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td>
<td>8 个字节</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td>
<td>4 个字节</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="二进制类型"><a class="markdownIt-Anchor" href="#二进制类型"></a> <strong>二进制类型</strong></h4>
<table>
<thead>
<tr>
<th>BIT(M)</th>
<th>位字段类型</th>
<th>大约 (M+7)/8 字节</th>
</tr>
</thead>
<tbody>
<tr>
<td>BINARY(M)</td>
<td>固定长度二进制字符串</td>
<td>M 字节</td>
</tr>
<tr>
<td>VARBINARY (M)</td>
<td>可变长度二进制字符串</td>
<td>M+1 字节</td>
</tr>
<tr>
<td>TINYBLOB (M)</td>
<td>非常小的BLOB</td>
<td>L+1 字节，在此，L&lt;2^8</td>
</tr>
<tr>
<td>BLOB (M)</td>
<td>小 BLOB</td>
<td>L+2 字节，在此，L&lt;2^16</td>
</tr>
<tr>
<td>MEDIUMBLOB (M)</td>
<td>中等大小的BLOB</td>
<td>L+3 字节，在此，L&lt;2^24</td>
</tr>
<tr>
<td>LONGBLOB (M)</td>
<td>非常大的BLOB</td>
<td>L+4 字节，在此，L&lt;2^32(4GB)</td>
</tr>
</tbody>
</table>
<p>boolean类型：不支持</p>
<h3 id="表操作"><a class="markdownIt-Anchor" href="#表操作"></a> 表操作</h3>
<h4 id="创建表create"><a class="markdownIt-Anchor" href="#创建表create"></a> 创建表create</h4>
<p><strong>语法：</strong></p>
<p>单表约束：</p>
<ul>
<li>主键约束：<code>primary key</code></li>
<li>复合主键：<code>primary key[字段1，字段2...]</code></li>
<li>唯一约束：<code>unique</code></li>
<li>非空约束：<code>not null</code></li>
<li>检查约束：<code>check &lt;表达式&gt;</code></li>
<li>默认值约束：<code>default '默认值'</code></li>
</ul>
<blockquote>
<p>注意：主键约束 = 唯一约束 + 非空约束</p>
</blockquote>
<pre><code class="highlight sql"><span class="keyword">create table</span> 表名(
   字段名 类型(长度) 约束,
   字段名 类型(长度) 约束,
   <span class="keyword">check</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>
);</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">CREATE TABLE</span> hero (
  id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT ,
  name <span class="type">varchar</span>(<span class="number">30</span>) ,
  hp <span class="type">float</span> ,
  damage <span class="type">int</span>(<span class="number">11</span>),
  <span class="keyword">group</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;金融事业部&#x27;</span>,
  createdate datetime,
  salary <span class="type">float</span>,
  <span class="keyword">check</span>(salary<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">and</span> salary<span class="operator">&lt;</span><span class="number">1000</span>)
)  <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</code></pre>
<h4 id="查看删除修改表"><a class="markdownIt-Anchor" href="#查看删除修改表"></a> 查看/删除/修改表</h4>
<hr />
<p><strong>查看表</strong></p>
<p>查看数据库中的所有表：</p>
<pre><code class="highlight sql"><span class="keyword">show</span> tables;</code></pre>
<p>查看表结构：</p>
<pre><code class="highlight sql"><span class="keyword">desc</span> 表名;</code></pre>
<hr />
<p><strong>删除表</strong></p>
<ul>
<li>&lt;表名&gt;：被删除的表名。DROP TABLE 语句可以同时删除多个表，用户必须拥有该命令的权限。</li>
<li>表被删除时，所有的表数据和表定义会被取消，所以使用本语句要小心。</li>
<li>表被删除时，用户在该表上的权限并不会自动被删除。</li>
<li>参数IF EXISTS用于在删除前判断删除的表是否存在，加上该参数后，在删除表的时候，如果表不存在，SQL 语句可以顺利执行，但会发出警告（warning）。</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;

<span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [ , <span class="operator">&lt;</span>表名<span class="number">1</span><span class="operator">&gt;</span> , <span class="operator">&lt;</span>表名<span class="number">2</span><span class="operator">&gt;</span>] …;</code></pre>
<hr />
<p><strong>修改表</strong></p>
<pre><code class="highlight sql"><span class="keyword">alter table</span> 表名 <span class="keyword">add</span> 列名 类型(长度) 约束; 		<span class="comment">--修改表 添加列. </span>
<span class="keyword">alter table</span> 表名 modify 列名 类型(长度) 约束;	<span class="comment">--修改表 修改列的类型长度及约束.</span>
<span class="keyword">alter table</span> 表名 change 旧列名 新列名 类型(长度) 约束;	<span class="comment">--修改表 修改列名.</span>
<span class="keyword">alter table</span> 表名 <span class="keyword">drop</span> 列名;					<span class="comment">--修改表 删除列.</span>
rename <span class="keyword">table</span> 表名 <span class="keyword">to</span> 新表名;					<span class="comment">--修改表名</span>
<span class="keyword">alter table</span> 表名 <span class="keyword">character set</span> 字符集;		<span class="comment">--修改表的字符集</span></code></pre>
<p>案例：</p>
<pre><code class="highlight sql"><span class="comment">--修改字段数据类型</span>
<span class="keyword">ALTER TABLE</span> tb_emp1 MODIFY name <span class="type">VARCHAR</span>(<span class="number">30</span>);
 <span class="comment">--删除字段</span>
<span class="keyword">ALTER TABLE</span> tb_emp1 <span class="keyword">DROP</span> col2;
<span class="comment">--修改字段名</span>
<span class="keyword">ALTER TABLE</span> tb_emp1 CHANGE col1 col3 <span class="type">CHAR</span>(<span class="number">30</span>);
<span class="comment">--修改表名</span>
<span class="keyword">ALTER TABLE</span> tb_emp1 RENAME <span class="keyword">TO</span> tb_emp2;

<span class="comment">--添加主键</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="keyword">PRIMARY KEY</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);
<span class="comment">--添加唯一约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">ADD CONSTRAINT</span> <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span> <span class="keyword">UNIQUE</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);
<span class="comment">--删除唯一约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> INDEX <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>;
<span class="comment">---添加检查约束</span>
<span class="keyword">ALTER TABLE</span> tb_emp7 <span class="keyword">ADD CONSTRAINT</span> <span class="operator">&lt;</span>检查约束名<span class="operator">&gt;</span> <span class="keyword">CHECK</span>(<span class="operator">&lt;</span>检查约束<span class="operator">&gt;</span>)
<span class="comment">--删除检查约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>检查约束名<span class="operator">&gt;</span>;
<span class="comment">--删除默认值约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span>
CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;
<span class="comment">--添加默认值约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span>
CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;
<span class="comment">--添加非空约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span>
CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span>
<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NOT NULL</span>;
<span class="comment">--删除非空约束</span>
<span class="keyword">ALTER TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span>
CHANGE <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">NULL</span>;</code></pre>
<h4 id="插入数据insert"><a class="markdownIt-Anchor" href="#插入数据insert"></a> 插入数据insert</h4>
<p>语法：</p>
<ol>
<li>列名数与values后面的值的个数相等</li>
<li>列的顺序与插入的值得顺序一致</li>
<li>列名的类型与插入的值要一致.</li>
<li>插入值得时候不能超过最大长度.</li>
<li>值如果是字符串或者日期需要加引号’’ （一般是单引号）</li>
</ol>
<pre><code class="highlight sql"><span class="keyword">insert into</span> 表 (列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3.</span>.) <span class="keyword">values</span>  (值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3.</span>.); <span class="comment">-- 向表中插入某些列</span>
<span class="keyword">insert into</span> 表 <span class="keyword">values</span> (值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3.</span>.); <span class="comment">--向表中插入所有列</span>
<span class="keyword">insert into</span> 表 (列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3.</span>.) <span class="keyword">values</span> <span class="keyword">select</span> (列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3.</span>.) <span class="keyword">from</span> 表
<span class="keyword">insert into</span> 表 <span class="keyword">values</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">insert into</span> sort(sid,sname) <span class="keyword">values</span>(<span class="string">&#x27;s002&#x27;</span>, <span class="string">&#x27;服饰&#x27;</span>);

<span class="keyword">insert into</span> hero <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">&#x27;盖伦&#x27;</span>, <span class="number">616</span>, <span class="number">100</span>)</code></pre>
<h4 id="修改数据update"><a class="markdownIt-Anchor" href="#修改数据update"></a> 修改数据update</h4>
<p>语法：</p>
<ol>
<li>列名的类型与修改的值要一致.</li>
<li>修改值得时候不能超过最大长度.</li>
<li>值如果是字符串或者日期需要加’’</li>
</ol>
<pre><code class="highlight sql"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="operator">=</span>值,字段名<span class="operator">=</span>值;

<span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="operator">=</span>值,字段名<span class="operator">=</span>值 <span class="keyword">where</span> 条件;</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">update</span> hero <span class="keyword">set</span> hp <span class="operator">=</span> <span class="number">818</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span></code></pre>
<h4 id="删除数据delete"><a class="markdownIt-Anchor" href="#删除数据delete"></a> 删除数据delete</h4>
<p>语法：</p>
<pre><code class="highlight sql"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件];</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">delete</span> <span class="keyword">from</span> hero <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span></code></pre>
<blockquote>
<p><strong>delete</strong> 一条一条删除，不清空<code>auto_increment</code>记录数</p>
</blockquote>
<blockquote>
<p><strong>truncate</strong> 直接将表删除，重新建表，<code>auto_increment</code>将置为零，从新开始</p>
</blockquote>
<h3 id="sql查询"><a class="markdownIt-Anchor" href="#sql查询"></a> SQL查询</h3>
<p>查询语句，在开发中使用的次数最多，此处使用“products”商品表。</p>
<ul>
<li>
<p>主键类型，本案例采用int类型，实际案例采用是varchar类型</p>
</li>
<li>
<p>时间类型，本案例采用date类型，实际案例采用datetime类型</p>
</li>
</ul>
<h4 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h4>
<pre><code class="highlight sql">创建商品表：
<span class="keyword">CREATE TABLE</span> products (
  pid <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT, #自增加 AUTO_INCREMENT
  pname <span class="type">VARCHAR</span>(<span class="number">20</span>),#商品名称
  price <span class="keyword">DOUBLE</span>, #商品价格
  pdate <span class="type">DATE</span>, # 日期
  sid <span class="type">VARCHAR</span>(<span class="number">20</span>) #分类ID
);

<span class="keyword">INSERT INTO</span> products <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;泰国大榴莲&#x27;</span>, <span class="number">98</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;s001&#x27;</span>);
<span class="keyword">INSERT INTO</span> products <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;新疆大枣&#x27;</span>, <span class="number">38</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;s002&#x27;</span>);
<span class="keyword">INSERT INTO</span> products <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;新疆切糕&#x27;</span>, <span class="number">68</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;s001&#x27;</span>);
<span class="keyword">INSERT INTO</span> products <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;十三香&#x27;</span>, <span class="number">10</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;s002&#x27;</span>);
<span class="keyword">INSERT INTO</span> products <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;老干妈&#x27;</span>, <span class="number">20</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;s002&#x27;</span>);</code></pre>
<h4 id="简单查询"><a class="markdownIt-Anchor" href="#简单查询"></a> 简单查询</h4>
<p>语法：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> [<span class="keyword">DISTINCT</span>]<span class="operator">*</span>[列名,列名] <span class="keyword">FROM</span>  表 [<span class="keyword">WHERE</span> 条件].</code></pre>
<p>案例：</p>
<pre><code class="highlight sql"><span class="comment">--1.查询所有的商品.		</span>
<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product;

<span class="comment">--2.查询商品名和商品价格.	</span>
<span class="keyword">select</span> pname,price <span class="keyword">from</span> product;

<span class="comment">--3.别名查询，使用的as关键字，as可以省略的.	</span>
<span class="comment">--   3.1表别名: </span>
   <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">as</span> p;
<span class="comment">--   3.2列别名：</span>
   <span class="keyword">select</span> pname <span class="keyword">as</span> pn <span class="keyword">from</span> product;	
   
<span class="comment">--4.去掉重复值.	</span>
<span class="keyword">select</span> <span class="keyword">distinct</span> price <span class="keyword">from</span> product;

<span class="comment">--5.查询结果是表达式（运算查询）：将所有商品的价格+10元进行显示.</span>
<span class="keyword">select</span> pname,price<span class="operator">+</span><span class="number">10</span> <span class="keyword">from</span> product;</code></pre>
<h4 id="去重"><a class="markdownIt-Anchor" href="#去重"></a> 去重</h4>
<p>有时出于对数据分析的要求，需要消除重复的记录值。这时候就需要用到 DISTINCT 关键字指示 MySQL 消除重复的记录值，语法格式为：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</code></pre>
<h4 id="条件查询"><a class="markdownIt-Anchor" href="#条件查询"></a> 条件查询</h4>
<p><strong>where</strong>后的条件写法：</p>
<ul>
<li><code>&gt; ,&lt;,=,&gt;=,&lt;=,&lt;&gt;</code></li>
<li><strong>like</strong> 使用占位符 <strong>_ 和 %</strong>  _代表一个字符 %代表任意个字符.</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;%新%&#x27;</span>;</code></pre>
<ul>
<li>in在某个范围中获得值（<strong>exists</strong>）.</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pid <span class="keyword">in</span> (<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>);</code></pre>
<p>案例：</p>
<pre><code class="highlight sql"><span class="comment">--1.查询商品名称为十三香的商品所有信息：</span>
<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="operator">=</span> <span class="string">&#x27;十三香&#x27;</span>;

<span class="comment">--2.查询商品价格&gt;60元的所有的商品信息:</span>
<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">60</span>;</code></pre>
<h4 id="排序"><a class="markdownIt-Anchor" href="#排序"></a> 排序</h4>
<p>SQL语法关键字：</p>
<ul>
<li><strong>ORDER BY</strong></li>
<li><strong>ASC（升序） DESC（降序）</strong></li>
</ul>
<p>案例：</p>
<pre><code class="highlight sql"><span class="comment">--1.查询所有的商品，按价格进行排序.(asc-升序,desc-降序)</span>
<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price;

<span class="comment">--2.查询名称有新的商品的信息并且按价格降序排序.</span>
<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;%新%&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>;</code></pre>
<h4 id="聚合函数"><a class="markdownIt-Anchor" href="#聚合函数"></a> 聚合函数</h4>
<p>特点：<strong>只对单列进行操作</strong><br />
常用的聚合函数：</p>
<ul>
<li><strong>sum</strong>()：求某一列的和</li>
<li><strong>avg</strong>()：求某一列的平均值</li>
<li><strong>max</strong>()：求某一列的最大值</li>
<li><strong>min</strong>()：求某一列的最小值</li>
<li><strong>count</strong>()：求某一列的元素个数<br />
案例</li>
</ul>
<pre><code class="highlight sql"><span class="comment">--1.获得所有商品的价格的总和：</span>
<span class="keyword">select</span> <span class="built_in">sum</span>(price) <span class="keyword">from</span> product;

<span class="comment">--2.获得所有商品的平均价格：</span>
<span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> product;

<span class="comment">--3.获得所有商品的个数：</span>
<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product;</code></pre>
<h4 id="分组"><a class="markdownIt-Anchor" href="#分组"></a> 分组</h4>
<p>SQL语法关键字：</p>
<ul>
<li><strong>GROUP BY</strong></li>
<li><strong>HAVING</strong></li>
</ul>
<p><strong>注意事项</strong>：</p>
<ol>
<li>select语句中的列（非聚合函数列），必须出现在group by子句中</li>
<li>group by子句中的列，不一定要出现在select语句中</li>
<li>聚合函数只能出现select语句中或者having语句中，一定不能出现在where语句中</li>
</ol>
<p>案例：</p>
<pre><code class="highlight sql"><span class="comment">--1.根据cno字段分组，分组后统计商品的个数.</span>
<span class="keyword">select</span> cid,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> cid;

<span class="comment">--2.根据cno分组，分组统计每组商品的平均价格，并且平均价格&gt; 60;</span>
<span class="keyword">select</span> cid,<span class="built_in">avg</span>(price) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> cid <span class="keyword">having</span> <span class="built_in">avg</span>(price)<span class="operator">&gt;</span><span class="number">60</span>;</code></pre>
<h4 id="分页查询"><a class="markdownIt-Anchor" href="#分页查询"></a> 分页查询</h4>
<p>LIMIT关键字不是SQL92标准提出的关键字，它是<strong>MySQL独有</strong>的语法。</p>
<p>通过Limit关键字，MySQL实现了<strong>物理分页</strong>。</p>
<p>分页分为逻辑分页和物理分页</p>
<ul>
<li>逻辑分页：将数据库中的数据查询到内存之后再进行分页。</li>
<li>物理分页：通过LIMIT关键字，直接在数据库中进行分页，最终返回的数据，只是分页后的数据。</li>
</ul>
<p>语法：</p>
<ul>
<li>offset：偏移量</li>
<li>rows：每页多少行记录</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT [<span class="keyword">offset</span>,] <span class="keyword">rows</span></code></pre>
<p>显示前五条数据：</p>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> hero limit <span class="number">0</span>,<span class="number">5</span></code></pre>
<h4 id="其他语句"><a class="markdownIt-Anchor" href="#其他语句"></a> 其他语句</h4>
<p>union 集合的并集（不包含重复记录）</p>
<p>unionall集合的并集（包含重复记录）</p>
<h4 id="语法顺序和执行顺序重要"><a class="markdownIt-Anchor" href="#语法顺序和执行顺序重要"></a> 语法顺序和执行顺序（重要）</h4>
<p><strong>MySQL查询语法顺序</strong></p>
<ol>
<li>SELECT</li>
<li>FROM</li>
<li>LEFT JOIN</li>
<li>ON</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>ORDER BY</li>
<li>LIMIT</li>
</ol>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">order</span> <span class="keyword">ON</span> user.id <span class="operator">=</span> order.uid <span class="keyword">WHERE</span> order.price <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> user.name <span class="keyword">HAVING</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="operator">&gt;</span> <span class="number">5</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user.name LIMIT <span class="number">0</span>,<span class="number">10</span></code></pre>
<p><strong>执行顺序</strong>（VT-virtual table表示虚拟表）：</p>
<ol>
<li>FROM（将最近的两张表，进行笛卡尔积）—VT1</li>
<li>ON（将VT1按照它的条件进行过滤）—VT2</li>
<li>LEFT JOIN（保留左表的记录）—VT3</li>
<li>WHERE（过滤VT3中的记录,每次过滤都会生成一张虚拟表）–VT4…VTn</li>
<li>GROUP BY（对VT4的记录进行分组）—VT5</li>
<li>HAVING（对VT5中的记录进行过滤）—VT6</li>
<li>SELECT（对VT6中的记录，选取指定的列）–VT7</li>
<li>ORDER BY（对VT7的记录进行排序）–游标</li>
<li>LIMIT（对排序之后的值进行分页）</li>
</ol>
<p>where条件执行顺序（影响性能）</p>
<ol>
<li>MYSQL：从左往右去执行WHERE条件的。</li>
<li>Oracle：从右往左去执行WHERE条件的。</li>
</ol>
<p><strong>结论</strong>：写WHERE条件的时候，优先级高的部分要去编写过滤力度最大的条件语句</p>
<h3 id="用户操作"><a class="markdownIt-Anchor" href="#用户操作"></a> 用户操作</h3>
<h4 id="创建用户"><a class="markdownIt-Anchor" href="#创建用户"></a> 创建用户</h4>
<p>语法说明如下：</p>
<ol>
<li>&lt;用户名&gt;<br />
指定创建用户账号，格式为 ‘user_name’@‘host_name’。这里user_name是用户名，host_name为主机名，即用户连接 MySQL 时所在主机的名字。若在创建的过程中，只给出了账户的用户名，而没指定主机名，则主机名默认为“%”，表示一组主机。</li>
<li>PASSWORD<br />
可选项，用于指定散列口令，即若使用明文设置口令，则需忽略PASSWORD关键字；若不想以明文设置口令，且知道 PASSWORD() 函数返回给密码的散列值，则可以在口令设置语句中指定此散列值，但需要加上关键字PASSWORD。</li>
<li>IDENTIFIED BY子句<br />
用于指定用户账号对应的口令，若该用户账号无口令，则可省略此子句。</li>
<li>&lt;口令&gt;<br />
指定用户账号的口令，在IDENTIFIED BY关键字或PASSWOED关键字之后。给定的口令值可以是只由字母和数字组成的明文，也可以是通过 PASSWORD() 函数得到的散列值。</li>
</ol>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span> [ IDENTIFIED ] <span class="keyword">BY</span> [ PASSWORD ] <span class="operator">&lt;</span>口令<span class="operator">&gt;</span></code></pre>
<p>使用 CREATE USER 语句应该注意以下几点：</p>
<ul>
<li>如果使用 CREATE USER 语句时没有为用户指定口令，那么 MySQL 允许该用户可以不使用口令登录系统，然而从安全的角度而言，不推荐这种做法。</li>
<li>使用 CREATE USER 语句必须拥有 MySQL 中 MySQL 数据库的 INSERT 权限或全局 CREATE USER 权限。</li>
<li>使用 CREATE USER 语句创建一个用户账号后，会在系统自身的 MySQL 数据库的 user 表中添加一条新记录。若创建的账户已经存在，则语句执行时会出现错误。</li>
<li>新创建的用户拥有的权限很少。他们可以登录 MySQL，只允许进行不需要权限的操作，如使用 SHOW 语句查询所有存储引擎和字符集的列表等。</li>
<li>如果两个用户具有相同的用户名和不同的主机名，MySQL 会将他们视为不同的用户，并允许为这两个用户分配不同的权限集合</li>
</ul>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;admin&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</code></pre>
<h4 id="修改用户"><a class="markdownIt-Anchor" href="#修改用户"></a> 修改用户</h4>
<p><strong>修改用户</strong></p>
<p>语法格式：</p>
<ul>
<li>&lt;旧用户&gt;：系统中已经存在的 MySQL 用户账号。</li>
<li>&lt;新用户&gt;：新的 MySQL 用户账号。</li>
</ul>
<pre><code class="highlight sql">RENAME <span class="keyword">USER</span> <span class="operator">&lt;</span>旧用户<span class="operator">&gt;</span> <span class="keyword">TO</span> <span class="operator">&lt;</span>新用户<span class="operator">&gt;</span></code></pre>
<p>使用 RENAME USER 语句时应该注意以下几点：</p>
<ul>
<li>RENAME USER 语句用于对原有的 MySQL 账户进行重命名。</li>
<li>若系统中旧账户不存在或者新账户已存在，则该语句执行时会出现错误。</li>
<li>要使用 RENAME USER 语句，必须拥有 MySQL 中的 MySQL 数据库的 UPDATE 权限或全局 CREATE USER 权限</li>
</ul>
<pre><code class="highlight sql">RENAME <span class="keyword">USER</span> james@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">TO</span> jack@<span class="string">&#x27;localhost&#x27;</span>;</code></pre>
<hr />
<p><strong>修改用户口令</strong></p>
<ul>
<li>FOR 子句：可选项。指定欲修改口令的用户。</li>
<li>PASSWORD(‘新明文口令’)：表示使用函数 PASSWORD() 设置新口令，即新口令必须传递到函数 PASSWORD() 中进行加密。</li>
<li>加密口令值：表示已被函数 PASSWORD() 加密的口令值。</li>
</ul>
<blockquote>
<p>注意：PASSWORD() 函数为单向加密函数，一旦加密后不能解密出原明文。</p>
</blockquote>
<pre><code class="highlight sql"><span class="keyword">SET</span> PASSWORD [ <span class="keyword">FOR</span> <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span> ] <span class="operator">=</span>
&#123;
    PASSWORD(<span class="string">&#x27;新明文口令&#x27;</span>)
    <span class="operator">|</span> OLD_PASSWORD(<span class="string">&#x27;旧明文口令&#x27;</span>)
    <span class="operator">|</span> <span class="string">&#x27;加密口令值&#x27;</span>
&#125;</code></pre>
<p>使用 SET PASSWORD 语句应注意以下几点：</p>
<ul>
<li>在 SET PASSWORD 语句中，若不加上 FOR 子句，表示修改当前用户的口令。若加上 FOR 子句，表示修改账户为 user 的用户口令。</li>
<li>user 必须以 ‘user_name’@‘host_name’ 的格式给定，user_name 为账户的用户名，host_name 为账户的主机名。</li>
<li>该账户必须在系统中存在，否则语句执行时会出现错误。</li>
<li>在 SET PASSWORD 语句中，只能使用选项 PASSWORD(‘新明文口令’) 和加密口令值中的一项，且必须使用其中的一项。</li>
</ul>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;jack&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span><span class="operator">=</span>PASSWORD(<span class="string">&#x27;lion&#x27;</span>);</code></pre>
<h4 id="删除用户"><a class="markdownIt-Anchor" href="#删除用户"></a> 删除用户</h4>
<p>使用 DROP USER 语句应该注意以下几点：</p>
<ul>
<li>DROP USER 语句可用于删除一个或多个 MySQL 账户，并撤销其原有权限。</li>
<li>使用 DROP USER 语句必须拥有 MySQL 中的 MySQL 数据库的 DELETE 权限或全局 CREATE USER 权限。</li>
<li>在 DROP USER 语句的使用中，若没有明确地给出账户的主机名，则该主机名默认为“%”。</li>
</ul>
<blockquote>
<p>注意：用户的删除不会影响他们之前所创建的表、索引或其他数据库对象，因为 MySQL 并不会记录是谁创建了这些对象。</p>
</blockquote>
<pre><code class="highlight sql"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="operator">&lt;</span>用户名<span class="number">1</span><span class="operator">&gt;</span> [ , <span class="operator">&lt;</span>用户名<span class="number">2</span><span class="operator">&gt;</span> ]…</code></pre>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;jack&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</code></pre>
<h4 id="用户授权"><a class="markdownIt-Anchor" href="#用户授权"></a> 用户授权</h4>
<p><strong>权限查看</strong><br />
当成功创建用户账户后，还不能执行任何操作，需要为该用户分配适当的访问权限。可以使用下列语句来查询用户的权限。</p>
<pre><code class="highlight sql"><span class="keyword">SHOW</span> <span class="keyword">GRANT</span> <span class="keyword">FOR</span></code></pre>
<blockquote>
<p>注意：新创建的用户只有登录 MySQL 服务器的权限，没有任何其他权限，不能进行其他操作。</p>
</blockquote>
<hr />
<p><strong>用户授权</strong></p>
<pre><code class="highlight sql"><span class="keyword">GRANT</span>
<span class="operator">&lt;</span>权限类型<span class="operator">&gt;</span> [ ( <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> ) ] [ , <span class="operator">&lt;</span>权限类型<span class="operator">&gt;</span> [ ( <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> ) ] ]
<span class="keyword">ON</span> <span class="operator">&lt;</span>对象<span class="operator">&gt;</span> <span class="operator">&lt;</span>权限级别<span class="operator">&gt;</span> <span class="keyword">TO</span> <span class="operator">&lt;</span>用户<span class="operator">&gt;</span>

其中<span class="operator">&lt;</span>用户<span class="operator">&gt;</span>的格式：
<span class="operator">&lt;</span>用户名<span class="operator">&gt;</span> [ IDENTIFIED ] <span class="keyword">BY</span> [ PASSWORD ] <span class="operator">&lt;</span>口令<span class="operator">&gt;</span>
[ <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION]
<span class="operator">|</span> MAX_QUERIES_PER_HOUR <span class="operator">&lt;</span>次数<span class="operator">&gt;</span>
<span class="operator">|</span> MAX_UPDATES_PER_HOUR <span class="operator">&lt;</span>次数<span class="operator">&gt;</span>
<span class="operator">|</span> MAX_CONNECTIONS_PER_HOUR <span class="operator">&lt;</span>次数<span class="operator">&gt;</span>
<span class="operator">|</span> MAX_USER_CONNECTIONS <span class="operator">&lt;</span>次数<span class="operator">&gt;</span></code></pre>
<ul>
<li>&lt;列名&gt;：可选项。用于指定权限要授予给表中哪些具体的列。</li>
<li>ON 子句：用于指定权限授予的对象和级别，如在 ON 关键字后面给出要授予权限的数据库名或表名等。</li>
<li>&lt;权限级别&gt;：用于指定权限的级别。可以授予的权限有如下几组：
<ul>
<li>列权限，和表中的一个具体列相关。例如，可以使用 UPDATE 语句更新表 students 中 student_name 列的值的权限。</li>
<li>表权限，和一个具体表中的所有数据相关。例如，可以使用 SELECT 语句查询表 students 的所有数据的权限。</li>
<li>数据库权限，和一个具体的数据库中的所有表相关。例如，可以在已有的数据库 mytest 中创建新表的权限。</li>
<li>用户权限，和 MySQL 中所有的数据库相关。例如，可以删除已有的数据库或者创建一个新的数据库的权限。</li>
</ul>
</li>
</ul>
<p>对应地，在 GRANT 语句中可用于指定<strong>权限级别</strong>的值有以下几类格式：</p>
<ul>
<li>*：表示当前数据库中的所有表。</li>
<li>*.*：表示所有数据库中的所有表。</li>
<li>db_name.*：表示某个数据库中的所有表，db_name 指定数据库名。</li>
<li>db_name.tbl_name：表示某个数据库中的某个表或视图，db_name 指定数据库名，tbl_name 指定表名或视图名。</li>
<li>tbl_name：表示某个表或视图，tbl_name 指定表名或视图名。</li>
<li>db_name.routine_name：表示某个数据库中的某个存储过程或函数，routine_name 指定存储过程名或函数名。</li>
<li>TO 子句：用来设定用户口令，以及指定被赋予权限的用户 user。若在 TO 子句中给系统中存在的用户指定口令，则新密码会将原密码覆盖；如果权限被授予给一个不存在的用户，MySQL 会自动执行一条 CREATE USER 语句来创建这个用户，但同时必须为该用户指定口令。</li>
</ul>
<p>GRANT语句中的&lt;<strong>权限类型</strong>&gt;的使用说明如下：</p>
<p>1.授予数据库权限时，&lt;权限类型&gt;可以指定为以下值：</p>
<ul>
<li>SELECT：表示授予用户可以使用 SELECT 语句访问特定数据库中所有表和视图的权限。</li>
<li>INSERT：表示授予用户可以使用 INSERT 语句向特定数据库中所有表添加数据行的权限。</li>
<li>DELETE：表示授予用户可以使用 DELETE 语句删除特定数据库中所有表的数据行的权限。</li>
<li>UPDATE：表示授予用户可以使用 UPDATE 语句更新特定数据库中所有数据表的值的权限。</li>
<li>REFERENCES：表示授予用户可以创建指向特定的数据库中的表外键的权限。</li>
<li>CREATE：表示授权用户可以使用 CREATE TABLE 语句在特定数据库中创建新表的权限。</li>
<li>ALTER：表示授予用户可以使用 ALTER TABLE 语句修改特定数据库中所有数据表的权限。</li>
<li>SHOW VIEW：表示授予用户可以查看特定数据库中已有视图的视图定义的权限。</li>
<li>CREATE ROUTINE：表示授予用户可以为特定的数据库创建存储过程和存储函数的权限。</li>
<li>ALTER ROUTINE：表示授予用户可以更新和删除数据库中已有的存储过程和存储函数的权限。</li>
<li>INDEX：表示授予用户可以在特定数据库中的所有数据表上定义和删除索引的权限。</li>
<li>DROP：表示授予用户可以删除特定数据库中所有表和视图的权限。</li>
<li>CREATE TEMPORARY TABLES：表示授予用户可以在特定数据库中创建临时表的权限。</li>
<li>CREATE VIEW：表示授予用户可以在特定数据库中创建新的视图的权限。</li>
<li>EXECUTE ROUTINE：表示授予用户可以调用特定数据库的存储过程和存储函数的权限。</li>
<li>LOCK TABLES：表示授予用户可以锁定特定数据库的已有数据表的权限。</li>
<li>ALL 或 ALL PRIVILEGES：表示以上所有权限。</li>
</ul>
<p>2.授予表权限时，&lt;权限类型&gt;可以指定为以下值：</p>
<ul>
<li>SELECT：授予用户可以使用 SELECT 语句进行访问特定表的权限。</li>
<li>INSERT：授予用户可以使用 INSERT 语句向一个特定表中添加数据行的权限。</li>
<li>DELETE：授予用户可以使用 DELETE 语句从一个特定表中删除数据行的权限。</li>
<li>DROP：授予用户可以删除数据表的权限。UPDATE：授予用户可以使用</li>
<li>UPDATE 语句更新特定数据表的权限。</li>
<li>ALTER：授予用户可以使用 ALTER TABLE 语句修改数据表的权限。</li>
<li>REFERENCES：授予用户可以创建一个外键来参照特定数据表的权限。</li>
<li>CREATE：授予用户可以使用特定的名字创建一个数据表的权限。</li>
<li>INDEX：授予用户可以在表上定义索引的权限。</li>
<li>ALL 或 ALL PRIVILEGES：所有的权限名。</li>
</ul>
<p>3.授予列权限时，&lt;权限类型&gt;的值只能指定为 SELECT、INSERT 和 UPDATE，同时权限的后面需要加上列名列表 column-list。</p>
<p>4.最有效率的权限是用户权限。</p>
<p>授予用户权限时，&lt;权限类型&gt;除了可以指定为授予数据库权限时的所有值之外，还可以是下面这些值：</p>
<ul>
<li>CREATE USER：表示授予用户可以创建和删除新用户的权限。</li>
<li>SHOW DATABASES：表示授予用户可以使用 SHOW DATABASES 语句查看所有已有的数据库的定义的权限。</li>
</ul>
<p><strong>案例：</strong></p>
<pre><code class="highlight sql"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;testUser&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;testPwd&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;

<span class="comment">--使用 SELECT 语句查询用户 testUser 的权限，如下所示。</span>
<span class="keyword">SELECT</span> Host,<span class="keyword">User</span>,Select_priv,Grant_priv <span class="keyword">FROM</span> mysql.user <span class="keyword">WHERE</span> <span class="keyword">User</span><span class="operator">=</span><span class="string">&#x27;testUser&#x27;</span>;</code></pre>
<h4 id="删除用户授权"><a class="markdownIt-Anchor" href="#删除用户授权"></a> 删除用户授权</h4>
<p>第一种方式：</p>
<pre><code class="highlight sql"><span class="keyword">REVOKE</span> <span class="operator">&lt;</span>权限类型<span class="operator">&gt;</span> [ ( <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> ) ] [ , <span class="operator">&lt;</span>权限类型<span class="operator">&gt;</span> [ ( <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> ) ] ]…
<span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span> <span class="operator">&lt;</span>权限名<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>用户<span class="number">1</span><span class="operator">&gt;</span> [ , <span class="operator">&lt;</span>用户<span class="number">2</span><span class="operator">&gt;</span> ]…</code></pre>
<p>第二种方式：</p>
<pre><code class="highlight sql"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES, <span class="keyword">GRANT</span> OPTION
<span class="keyword">FROM</span> <span class="keyword">user</span> <span class="operator">&lt;</span>用户<span class="number">1</span><span class="operator">&gt;</span> [ , <span class="operator">&lt;</span>用户<span class="number">2</span><span class="operator">&gt;</span> ]…</code></pre>
<p>语法说明如下：</p>
<ul>
<li>REVOKE 语法和 GRANT 语句的语法格式相似，但具有相反的效果。</li>
<li>第一种语法格式用于回收某些特定的权限。</li>
<li>第二种语法格式用于回收特定用户的所有权限。</li>
<li>要使用 REVOKE 语句，必须拥有 MySQL 数据库的全局 CREATE USER 权限或 UPDATE 权限。</li>
</ul>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">REVOKE</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;testUser&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</code></pre>
<h3 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h3>
<h4 id="case"><a class="markdownIt-Anchor" href="#case"></a> case</h4>
<p>CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了</p>
<pre><code class="highlight sql"><span class="keyword">CASE</span> expression
    <span class="keyword">WHEN</span> condition1 <span class="keyword">THEN</span> result1
    <span class="keyword">WHEN</span> condition2 <span class="keyword">THEN</span> result2
   ...
    <span class="keyword">WHEN</span> conditionN <span class="keyword">THEN</span> resultN
    <span class="keyword">ELSE</span> <span class="keyword">result</span>
<span class="keyword">END</span></code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span>
	&quot;name&quot;,
        <span class="keyword">CASE</span>
            <span class="keyword">WHEN</span> &quot;age&quot; <span class="operator">&gt;</span> <span class="number">15</span> <span class="keyword">THEN</span>
            <span class="string">&#x27;15&#x27;</span> 
            <span class="keyword">WHEN</span> &quot;age&quot; <span class="operator">&lt;</span> <span class="number">10</span> <span class="keyword">THEN</span>
            <span class="string">&#x27;10&#x27;</span> <span class="keyword">ELSE</span> <span class="string">&#x27;0&#x27;</span> 
        <span class="keyword">END</span> 
<span class="keyword">FROM</span>
LBTEST.&quot;student&quot;</code></pre>
<h4 id="if"><a class="markdownIt-Anchor" href="#if"></a> if</h4>
<p>如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2。</p>
<pre><code class="highlight sql">IF(expr,v1,v2)</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> IF(<span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span>,<span class="string">&#x27;正确&#x27;</span>,<span class="string">&#x27;错误&#x27;</span>)</code></pre>
<h4 id="ifnull"><a class="markdownIt-Anchor" href="#ifnull"></a> ifnull</h4>
<p>如果 v1 的值不为 NULL，则返回 v1，否则返回 v2。</p>
<pre><code class="highlight sql">IFNULL(v1,v2)</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> IFNULL(<span class="keyword">null</span>,<span class="string">&#x27;Hello Word&#x27;</span>)</code></pre>
<h4 id="isnull"><a class="markdownIt-Anchor" href="#isnull"></a> isnull</h4>
<p>判断表达式是否为 NULL</p>
<pre><code class="highlight sql">ISNULL(expression)</code></pre>
<p>示例：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> ISNULL(<span class="keyword">NULL</span>);</code></pre>
<h3 id="存储过程"><a class="markdownIt-Anchor" href="#存储过程"></a> 存储过程</h3>
<h4 id="循环"><a class="markdownIt-Anchor" href="#循环"></a> 循环</h4>
<p><strong>while</strong></p>
<pre><code class="highlight sql"><span class="comment">-- 设置mysql分隔符为//，也就意味着，当遇到下一个//时，整体执行SQL语句</span>
DELIMITER <span class="operator">/</span><span class="operator">/</span>
 
<span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> if <span class="keyword">EXISTS</span> ‘test’;    # 如果存在test存储过程则删除
<span class="keyword">CREATE</span> <span class="keyword">procedure</span> test() # 创建无参存储过程，名称为test
<span class="keyword">BEGIN</span>
<span class="keyword">DECLARE</span> i <span class="type">INT</span>;  # 申明变量
<span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;  # 变量赋值
WHILE i<span class="operator">&lt;</span><span class="number">5</span> DO # 结束循环的条件: 当i大于<span class="number">5</span>时跳出while循环
<span class="keyword">INSERT INTO</span> test <span class="keyword">VALUES</span>(i<span class="operator">+</span><span class="number">11</span>,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;20&#x27;</span>);  # 往test表添加数据
<span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;    # 循环一次,i加<span class="number">1</span>
<span class="keyword">END</span> WHILE;  # 结束while循环
<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test; # 查看test表数据
<span class="keyword">END</span>
<span class="operator">/</span><span class="operator">/</span>  # 结束定义语句
<span class="keyword">CALL</span> test();    # 调用存储过程
DELIMITER ; # 重新将分隔符设置为;</code></pre>
<p><strong>loop</strong></p>
<pre><code class="highlight sql">DELIMITER <span class="operator">/</span><span class="operator">/</span>
<span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> test;
<span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test()
<span class="keyword">BEGIN</span>
  <span class="keyword">DECLARE</span> i <span class="type">INT</span>;
  <span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;
    lp : LOOP                               　　　　# lp为循环体名,可随意 loop为关键字
        <span class="keyword">INSERT INTO</span> test <span class="keyword">VALUES</span>(i<span class="operator">+</span><span class="number">11</span>,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;20&#x27;</span>);　　　# 往test表添加数据
        <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;                      　　　　# 循环一次,i加一
        IF i <span class="operator">&gt;</span> <span class="number">10</span> <span class="keyword">THEN</span>                   　　　　# 结束循环的条件: 当i大于<span class="number">10</span>时跳出loop循环
                    LEAVE lp;
            <span class="keyword">END</span> IF;
    <span class="keyword">END</span> LOOP;
    <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test;
<span class="keyword">END</span>
<span class="operator">/</span><span class="operator">/</span>
<span class="keyword">CALL</span> test();
DELIMITER ;</code></pre>
<p><strong>repeat</strong></p>
<pre><code class="highlight sql">DELIMITER <span class="operator">/</span><span class="operator">/</span>
<span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> test;
<span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test()
<span class="keyword">BEGIN</span>
  <span class="keyword">DECLARE</span> i <span class="type">INT</span>;
  <span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;
  REPEAT
    <span class="keyword">INSERT INTO</span> test <span class="keyword">VALUES</span>(i<span class="operator">+</span><span class="number">11</span>,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;20&#x27;</span>);  　　　　　　　　　# 往test表添加数据
    <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;                              　　　　# 循环一次,i加一
  UNTIL i <span class="operator">&gt;</span> <span class="number">10</span> <span class="keyword">END</span> REPEAT;                       　　　　# 结束循环的条件: 当i大于<span class="number">10</span>时跳出repeat循环
  <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test;
<span class="keyword">END</span>
<span class="operator">/</span><span class="operator">/</span>
<span class="keyword">CALL</span> test();
DELIMITER ;</code></pre>
<h4 id="案例"><a class="markdownIt-Anchor" href="#案例"></a> 案例</h4>
<pre><code class="highlight sql">delimiter $$
<span class="keyword">drop</span> <span class="keyword">procedure</span> if <span class="keyword">exists</span> sdm_update_random; 
<span class="keyword">create</span> <span class="keyword">procedure</span> sdm_update_random()
<span class="keyword">begin</span>
		<span class="keyword">declare</span> icount <span class="type">int</span>;
		<span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;
		<span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">into</span> icount <span class="keyword">from</span> t_sdm_extract_task;
		while i <span class="operator">&lt;</span> icount do 
				<span class="keyword">select</span> extract_task_id,random_flag,random_seed <span class="keyword">into</span> <span class="variable">@taskId</span>,<span class="variable">@randomFlag</span>,<span class="variable">@randomSeed</span> <span class="keyword">from</span> t_sdm_extract_task limit i,<span class="number">1</span>;
				<span class="keyword">update</span> t_sdm_extract_monitor <span class="keyword">set</span> random_flag<span class="operator">=</span><span class="variable">@randomFlag</span>,random_seed<span class="operator">=</span><span class="variable">@randomSeed</span> <span class="keyword">where</span> extract_task_id<span class="operator">=</span><span class="variable">@taskId</span>;
				<span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;
		<span class="keyword">end</span> while; 
		
		<span class="keyword">set</span> i<span class="operator">=</span><span class="number">0</span>;
		<span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">into</span> icount <span class="keyword">from</span> t_sdm_masking_task;
    while i <span class="operator">&lt;</span> icount do 
				<span class="keyword">select</span> masking_task_id,random_flag,random_seed <span class="keyword">into</span> <span class="variable">@taskId</span>,<span class="variable">@randomFlag</span>,<span class="variable">@randomSeed</span> <span class="keyword">from</span> t_sdm_masking_task limit i,<span class="number">1</span>;
				<span class="keyword">update</span> t_sdm_masking_monitor <span class="keyword">set</span> random_flag<span class="operator">=</span><span class="variable">@randomFlag</span>,random_seed<span class="operator">=</span><span class="variable">@randomSeed</span> <span class="keyword">where</span> masking_task_id<span class="operator">=</span><span class="variable">@taskId</span>;
				<span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;
		<span class="keyword">end</span> while;                      
<span class="keyword">end</span>
$$
delimiter;


<span class="keyword">call</span> sdm_update_random();</code></pre>
<h2 id="多表之间的关系"><a class="markdownIt-Anchor" href="#多表之间的关系"></a> 多表之间的关系</h2>
<p>如上图所示，实际业务数据库中的表之间都是有关系的，我们接下来主要要学习的就是如何分析表关系及建立表关系</p>
<pre><code class="highlight sql"><span class="number">1.</span>分类表
<span class="keyword">create table</span> category(
	cid <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">primary key</span>,
	cname <span class="type">varchar</span>(<span class="number">100</span>)
);

<span class="number">2.</span>商品表
<span class="keyword">create table</span> product(
	pid <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">primary key</span>,
	pname <span class="type">varchar</span>(<span class="number">40</span>),
	price <span class="keyword">double</span>
);

<span class="number">3.</span>订单表
<span class="keyword">create table</span> orders(
	oid <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">primary key</span>,
	totalprice <span class="keyword">double</span>
);

<span class="number">4.</span>订单项表
<span class="keyword">create table</span> orderitem(
	oid <span class="type">varchar</span>(<span class="number">50</span>),
	pid <span class="type">varchar</span>(<span class="number">50</span>)
);</code></pre>
<h3 id="表与表之间的关系"><a class="markdownIt-Anchor" href="#表与表之间的关系"></a> 表与表之间的关系</h3>
<p><strong>表与表之间的关系，说的就是表与表之间数据的关系</strong>。<br />
一对一关系</p>
<ul>
<li>常见实例：一夫一妻</li>
</ul>
<p>一对多关系</p>
<ul>
<li>常见实例：会员和订单</li>
</ul>
<p>多对多关系（需要中间表实现）</p>
<ul>
<li>常见实例：商品和订单</li>
</ul>
<h3 id="外键"><a class="markdownIt-Anchor" href="#外键"></a> 外键</h3>
<p>主表添加外键的格式：</p>
<pre><code class="highlight sql"><span class="keyword">alter table</span> 表名 <span class="keyword">add</span> [<span class="keyword">constraint</span>][约束名称] <span class="keyword">foreign key</span> (主表外键字段) <span class="keyword">references</span> 从表(从表主键)</code></pre>
<p>主表删除外键的格式：</p>
<pre><code class="highlight sql"><span class="keyword">alter table</span> 表名 <span class="keyword">drop</span> <span class="keyword">foreign key</span> 外键约束名称</code></pre>
<p>使用外键目的：</p>
<ul>
<li>保证数据完整性（数据保存在多张表中的时候）</li>
<li>在互联网项目中，一般情况下，<strong>不建议建立外键关系</strong>。</li>
</ul>
<h3 id="一对一关系"><a class="markdownIt-Anchor" href="#一对一关系"></a> 一对一关系</h3>
<p>在实际工作中，一对一在开发中应用不多，因为一对一完全可以创建成一张表</p>
<p>案例：一个丈夫只能有一个妻子</p>
<pre><code class="highlight sql"><span class="keyword">CREATE TABLE</span> wife(
	id 	<span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> ,
	wname	<span class="type">VARCHAR</span>(<span class="number">20</span>),
	sex	<span class="type">CHAR</span>(<span class="number">1</span>)
);

<span class="keyword">CREATE TABLE</span> husband(
	id 	<span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> ,
	hname	<span class="type">VARCHAR</span>(<span class="number">20</span>),
	sex	<span class="type">CHAR</span>(<span class="number">1</span>)
);</code></pre>
<p>一对一关系创建方式1之外键唯一：</p>
<ul>
<li>添加外键列wid，指定该列的约束为唯一（不加唯一约束就是一对多关系）</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">ALTER TABLE</span> husband <span class="keyword">ADD</span> wid <span class="type">INT</span> <span class="keyword">UNIQUE</span>;</code></pre>
<ul>
<li>添加外键约束</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">alter table</span> husband <span class="keyword">add</span> <span class="keyword">foreign key</span> (wid) <span class="keyword">references</span> wife(id);</code></pre>
<h3 id="一对多关系"><a class="markdownIt-Anchor" href="#一对多关系"></a> 一对多关系</h3>
<p>案例：一个分类对应多个商品</p>
<p>注意事项：</p>
<ul>
<li>一对多关系和一对一关系的创建很类似，唯一区别就是外键不唯一</li>
</ul>
<p>一对多关系创建：</p>
<ul>
<li>添加外键列</li>
<li>添加外键约束</li>
</ul>
<h3 id="多对多关系"><a class="markdownIt-Anchor" href="#多对多关系"></a> 多对多关系</h3>
<p>案例：同一个商品对应多个订单，一个订单对应多个商品</p>
<p>注意事项：</p>
<ul>
<li>
<p>需要中间表去完成多对多关系的创建</p>
</li>
<li>
<p>多对多关系其实就是两个一对多关系的组合</p>
</li>
</ul>
<p>多对多关系创建：</p>
<ul>
<li>创建中间表，并在其中创建多对多关系中两张表的外键列</li>
<li>在中间表中添加外键约束</li>
<li>在中间表中添加联合主键约束</li>
</ul>
<h2 id="多表关联查询"><a class="markdownIt-Anchor" href="#多表关联查询"></a> 多表关联查询</h2>
<p>可以在 <code>SELECT</code>, <code>UPDATE</code> 和 <code>DELETE</code> 语句中使用 MySQL 的 <strong>JOIN</strong> 来联合多表查询</p>
<p>JOIN 按照<strong>功能</strong>大致分为如下三类：</p>
<ul>
<li><code>CROSS JOIN</code>（交叉连接）</li>
<li><code>INNER JOIN</code>（内连接或等值连接）。</li>
<li><code>OUTER JOIN</code>（外连接）</li>
</ul>
<h3 id="前置条件"><a class="markdownIt-Anchor" href="#前置条件"></a> 前置条件</h3>
<pre><code class="highlight sql"><span class="keyword">insert into</span> category (cid,cname) <span class="keyword">values</span> (<span class="string">&#x27;c001&#x27;</span>,<span class="string">&#x27;家电&#x27;</span>);
<span class="keyword">insert into</span> category (cid,cname) <span class="keyword">values</span> (<span class="string">&#x27;c002&#x27;</span>,<span class="string">&#x27;服饰&#x27;</span>);
<span class="keyword">insert into</span> category (cid,cname) <span class="keyword">values</span> (<span class="string">&#x27;c003&#x27;</span>,<span class="string">&#x27;化妆品&#x27;</span>);

<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p001&#x27;</span>,<span class="string">&#x27;联想&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p002&#x27;</span>,<span class="string">&#x27;海尔&#x27;</span>,<span class="number">3000</span>,<span class="string">&#x27;c001&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p003&#x27;</span>,<span class="string">&#x27;雷神&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);

<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p004&#x27;</span>,<span class="string">&#x27;阿迪&#x27;</span>,<span class="number">1000</span>,<span class="string">&#x27;c002&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p005&#x27;</span>,<span class="string">&#x27;耐克&#x27;</span>,<span class="number">1200</span>,<span class="string">&#x27;c002&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p006&#x27;</span>,<span class="string">&#x27;NB&#x27;</span>,<span class="number">800</span>,<span class="string">&#x27;c002&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p007&#x27;</span>,<span class="string">&#x27;彪马&#x27;</span>,<span class="number">600</span>,<span class="string">&#x27;c002&#x27;</span>);

<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p008&#x27;</span>,<span class="string">&#x27;雪花秀&#x27;</span>,<span class="number">1500</span>,<span class="string">&#x27;c003&#x27;</span>);
<span class="keyword">insert into</span> product(pid,pname,price,cid) <span class="keyword">values</span> (<span class="string">&#x27;p009&#x27;</span>,<span class="string">&#x27;悦诗风吟&#x27;</span>,<span class="number">1100</span>,<span class="string">&#x27;c003&#x27;</span>);</code></pre>
<h3 id="交叉连接"><a class="markdownIt-Anchor" href="#交叉连接"></a> 交叉连接</h3>
<p>交叉连接的关键字：<strong>CROSS JOIN</strong></p>
<p><em>交叉连接也叫笛卡尔积连接</em></p>
<ul>
<li>笛卡尔积是指在数学中，两个集合X和Y的笛卡尓积（Cartesian product），又称直积，表示为X×Y，第一个对象是X的成员而第二个对象是Y的所有可能有序对的其中一个成员</li>
</ul>
<blockquote>
<p>行数相乘，列数相加</p>
</blockquote>
<p>隐式交叉连接</p>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> a,b</code></pre>
<p>显式交叉连接</p>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> a <span class="keyword">cross</span> <span class="keyword">join</span> b</code></pre>
<p>案例：查询商品表和分类表的笛卡尔积。</p>
<h3 id="内连接"><a class="markdownIt-Anchor" href="#内连接"></a> 内连接</h3>
<p>内连接的关键字：<strong>INNER JOIN</strong></p>
<p>内连接也叫等值连接，内联接使用比较运算符根据每个表共有的列的值匹配两个表中的行</p>
<p>隐式内连接</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> A,B <span class="keyword">WHERE</span> A.id <span class="operator">=</span> B.id</code></pre>
<p>显式内连接</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> B <span class="keyword">ON</span> A.id <span class="operator">=</span> B.id</code></pre>
<h3 id="外连接"><a class="markdownIt-Anchor" href="#外连接"></a> 外连接</h3>
<p>也就是说外连接又分为：<strong>左外连接、右外连接、全外连接</strong></p>
<blockquote>
<p>如果使用LEFT JOIN，则主表在它左边</p>
</blockquote>
<blockquote>
<p>如果使用RIGHT JOIN，则主表在它右边</p>
</blockquote>
<blockquote>
<p>查询结果以主表为主，从表记录匹配不到，则补null</p>
</blockquote>
<p><strong>左外连接</strong>：<code>LEFT JOIN</code> 或者 <code>LEFT OUTER JOIN</code></p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>  A  <span class="keyword">LEFT</span>  <span class="keyword">JOIN</span>  B <span class="keyword">ON</span> A.id <span class="operator">=</span> B.id</code></pre>
<blockquote>
<p>多个连续的left join连接，a left join b on 条件1 left join c on 条件2 执行顺序是：先a和b进行连接，生成一张中间表d，然后再和c进行条件连接生成最后的表的数据</p>
</blockquote>
<p><strong>右外连接</strong>:：<code>RIGHT JOIN</code> 或者 <code>RIGHT OUTER JOIN</code></p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>  A  <span class="keyword">RIGHT</span>  <span class="keyword">JOIN</span>  B <span class="keyword">ON</span> A.id <span class="operator">=</span> B.id</code></pre>
<p><strong>全外连接</strong>（MySQL不支持）：<code>FULL  JOIN 或 FULL OUTER JOIN</code></p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>  A  <span class="keyword">FULL</span> <span class="keyword">JOIN</span>  B <span class="keyword">ON</span> A.id <span class="operator">=</span> B.id</code></pre>
<h3 id="子查询"><a class="markdownIt-Anchor" href="#子查询"></a> 子查询</h3>
<p>子查询允许<strong>把一个查询嵌套在另一个查询当中</strong>。</p>
<p>子查询，又叫内部查询，相对于<strong>内部查询</strong>，包含内部查询的就称为<strong>外部查询</strong>。</p>
<p>子查询可以包含普通select可以包括的任何子句，比如：distinct、 group by、order<br />
by、limit、join和union等；</p>
<p>但是对应的外部查询必须是以下语句之一：select、insert、update、delete</p>
<blockquote>
<p><strong>select 中、from 后、where 中.</strong></p>
</blockquote>
<blockquote>
<p>group by 和order by 中无实用意义</p>
</blockquote>
<h3 id="查询原理"><a class="markdownIt-Anchor" href="#查询原理"></a> 查询原理</h3>
<p><strong>单表查询</strong>：根据WHERE条件过滤表中的记录，形成中间表（这个中间表对用户是不可见的）；然后根据SELECT的选择列选择相应的列进行返回最终结果。</p>
<p><strong>两表连接查询</strong>：对两表求积（笛卡尔积）并用ON条件和连接连接类型进行过滤形成中间表；然后根据WHERE条件过滤中间表的记录，并根据SELECT指定的列返回查询结果。</p>
<p><strong>多表连接查询</strong>：先对第一个和第二个表按照两表连接做查询，然后用查询结果和第三个表做连接查询，以此类推，直到所有的表都连接上为止，最终形成一个中间的结果表，然后根据WHERE条件过滤中间表的记录，并根据SELECT指定的列返回查询结果。</p>
<blockquote>
<p>理解SQL查询的过程是进行SQL优化的理论依据。</p>
</blockquote>
<h2 id="mysql架构"><a class="markdownIt-Anchor" href="#mysql架构"></a> MySQL架构</h2>
<p><strong>Connectors</strong></p>
<p>指的是不同语言中与sql的交互</p>
<p><strong>Management Serveices &amp; Utilities</strong>：</p>
<p>系统管理和控制工具</p>
<p><strong>Connection Pool: 连接池</strong></p>
<p>管理缓冲<u>用户连接</u>，<u>线程处理</u>等需要缓存的需求。</p>
<p>负责监听对 MySQL Server 的各种请求，接收连接请求，转发所有连接请求到<u>线程管理模块</u>。每一个连接上 MySQL Server 的客户端请求都会被分配（或创建）一个连接线程为其单独服务。</p>
<p>而连接线程的主要工作就是负责 MySQL Server 与客户端的通信，接受客户端的命令请求，传递 Server 端的结果信息等。线程管理模块则负责管理维护这些连接线程。包括线程的创建，线程的 cache 等。</p>
<p><strong>SQL Interface: SQL接口</strong></p>
<p>接受用户的SQL命令，并且返回用户需要查询的结果。比如select from就是调用SQL Interface</p>
<p><strong>Parser: 解析器</strong></p>
<p>SQL命令传递到解析器的时候会被解析器<u>验证和解析</u>。<br />
主要功能：</p>
<ol>
<li>将SQL语句进行语义和语法的分析，分解成数据结构，然后按照<u>不同的操作类型进行分类</u>，然后做出针对性的转发到后续步骤，以后SQL语句的传递和处理就是基于这个结构的。</li>
<li>如果在分解构成中遇到错误，那么就说明这个sql语句是不合理的</li>
</ol>
<p><strong>Optimizer: 查询优化器</strong><br />
SQL语句在查询之前会<u>使用查询优化器对查询进行优化</u>。</p>
<p>它使用的是“<u>选取-投影-联接</u>”策略进行查询。</p>
<ul>
<li>用一个例子就可以理解： select uid,name from user where gender = 1;
<ul>
<li>这个select 查询先根据where 语句进行<strong>选取</strong>，而不是先将表全部查询出来以后再进行过滤</li>
<li>这个select查询先根据uid和name进行属性<strong>投影</strong>，而不是将属性全部取出以后再进行过滤</li>
<li>将这两个查询条件<strong>联接</strong>起来生成最终查询结果</li>
</ul>
</li>
</ul>
<p><strong>Cache和Buffer： 查询缓存</strong></p>
<p>他的主要功能是将客户端提交给MySQL的 select请求的返回结果集 cache 到内存中，与该 query 的一个 hash 值 做一个对应。该 Query 所取数据的基表发生任何数据的变化之后， MySQL 会自动使该 query 的Cache 失效。在读写比例非常高的应用系统中， Query Cache 对性能的提高是非常显著的。当然它对内存的消耗也是非常大的。</p>
<p>如果查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。这个缓存机制是由一系列小缓存组成的。比如表缓存，记录缓存，key缓存，权限缓存等</p>
<p><strong>存储引擎接口</strong><br />
存储引擎接口模块可以说是 MySQL 数据库中最有特色的一点了。目前各种数据库产品中，基本上只有 MySQL 可以实现其底层数据存储引擎的插件式管理。这个模块实际上只是 一个抽象类，但正是因为它成功地将各种数据处理高度抽象化，才成就了今天 MySQL 可插拔存储引擎的特色。</p>
<p>从图还可以看出，MySQL区别于其他数据库的最重要的特点就是<strong>其插件式的表存储引擎</strong>。MySQL插件式的存储引擎架构提供了一系列标准的管理和服务支持，这些标准与存储引擎本身无关，可能是每个数据库系统本身都必需的，如SQL分析器和优化器等，而存储引擎是底层物理结构的实现，每个存储引擎开发者都可以按照自己的意愿来进行开发。</p>
<blockquote>
<p>注意：存储引擎是基于表的，而不是数据库。</p>
</blockquote>
<h3 id="执行流程图"><a class="markdownIt-Anchor" href="#执行流程图"></a> 执行流程图</h3>
<h3 id="存储引擎"><a class="markdownIt-Anchor" href="#存储引擎"></a> 存储引擎</h3>
<p>数据库存储引擎是数据库底层软件组件，数据库管理系统使用数据引擎进行创建、查询、更新和删除数据操作。不同的存储引擎提供不同的存储机制、索引技巧、锁定水平等功能，使用不同的存储引擎还可以获得特定的功能。</p>
<p>现在许多数据库管理系统都支持多种不同的存储引擎。MySQL 的核心就是存储引擎</p>
<ul>
<li>多存储引擎是mysql有别于其他数据库的一大特性;</li>
<li>存储引擎是针对表的</li>
<li>MySQL 5.5之后，默认的存储引擎由<strong>MyISAM</strong>变为<strong>InnoDB</strong>。</li>
<li>MyISAM 是基于 ISAM 的存储引擎，并对其进行扩展，是在 Web、数据仓储和其他应用环境下最常使用的存储引擎之一。MyISAM 拥有较高的插入、查询速度，但不支持事务</li>
</ul>
<blockquote>
<p>提示：InnoDB 事务型数据库的首选引擎，支持事务安全表（ACID），支持行锁定和外键。MySQL 5.5.5 之后，InnoDB 作为默认存储引擎</p>
</blockquote>
<hr />
<p><strong>查看存储引擎：</strong></p>
<pre><code class="highlight sql"><span class="keyword">show</span> engines;</code></pre>
<p><strong>临时修改默认存储引擎</strong></p>
<pre><code class="highlight sql"><span class="keyword">SET</span> default_storage_engine<span class="operator">=</span><span class="operator">&lt;</span> 存储引擎名 <span class="operator">&gt;</span></code></pre>
<blockquote>
<p>但是当再次重启客户端时，默认存储引擎仍然是 InnoDB</p>
</blockquote>
<hr />
<p><strong>如何选择存储引擎</strong></p>
<ul>
<li>如果要提供提交、回滚和恢复的事务安全（ACID 兼容）能力，并要求实现并发控制，InnoDB 是一个很好的选择。</li>
<li>如果数据表主要用来插入和查询记录，则 MyISAM 引擎提供较高的处理效率。</li>
<li>如果只是临时存放数据，数据量不大，并且不需要较高的数据安全性，可以选择将数据保存在内存的 MEMORY 引擎中，MySQL 中使用该引擎作为临时表，存放查询的中间结果。</li>
<li>如果只有 INSERT 和 SELECT 操作，可以选择Archive 引擎，Archive 存储引擎支持高并发的插入操作，但是本身并不是事务安全的。Archive 存储引擎非常适合存储归档数据，如记录日志信息可以使用 Archive 引擎。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>InnoDB</th>
<th>MyISAM</th>
</tr>
</thead>
<tbody>
<tr>
<td>存储文件</td>
<td>.frm表定义文件/.ibd数据文件</td>
<td>.frm表定义文件/.myd数据文件/.myi索引文件</td>
</tr>
<tr>
<td>锁</td>
<td>表锁、<strong>行锁</strong></td>
<td>表锁</td>
</tr>
<tr>
<td>事务</td>
<td>ACID</td>
<td>不支持</td>
</tr>
<tr>
<td>CRDU</td>
<td>读、写</td>
<td>读多</td>
</tr>
<tr>
<td>count</td>
<td>扫表</td>
<td>专门存储的地方</td>
</tr>
<tr>
<td>索引结构</td>
<td>B+ Tree</td>
<td>B+ Tree</td>
</tr>
<tr>
<td>存储限制</td>
<td>256TB</td>
<td>64TB</td>
</tr>
<tr>
<td>全文索引</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>树索引</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>哈希索引</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>数据缓存</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>支持外键</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote>
<p>提示：使用哪一种引擎要根据需要灵活选择，一个数据库中多个表可以使用不同的引擎以满足各种性能和实际需求。使用合适的存储引擎将会提高整个数据库的性能</p>
</blockquote>
<h3 id="mysql物理结构"><a class="markdownIt-Anchor" href="#mysql物理结构"></a> MySQL物理结构</h3>
<p>MySQL是通过文件系统对数据进行存储和管理的。</p>
<p>MySQL从物理结构上可以分为日志文件和数据文件</p>
<h4 id="日志文件"><a class="markdownIt-Anchor" href="#日志文件"></a> 日志文件</h4>
<p>MySQL通过日志记录了数据库操作信息和错误信息。常用的日志文件包括<strong>错误日志、二进制日志、查询日志、慢查询日志和 InnoDB 引擎在线 Redo 日志、中继日志等</strong></p>
<p><strong>错误日志（err log）</strong>：</p>
<ul>
<li>默认是<strong>开启</strong>的，而且从5.5.7以后无法关闭错误日志</li>
<li>记录了运行过程中遇到的<strong>所有严重的错误信息</strong>,以及 MySQL每次<strong>启动和关闭的详细信息</strong>。</li>
<li>默认的错误日志名称：hostname.err，该名字可以通过命令<code>system hostname;</code>查询获得</li>
<li>错误日志所记录的信息是可以通过<strong>log-error和log-warnings</strong>来定义的，其中log-err是定义是否启用错误日志的功能和错误日志的存储位置，log-warnings是定义是否将警告信息也定义至错误日志中。</li>
<li>log_error可以直接定义为文件路径，也可以为ON|OFF；log_warings只能使用<strong>1|0</strong>来定义开关启动</li>
</ul>
<blockquote>
<p>在<code>vim /etc/my.cnf</code>中存储了log-error的存储位置</p>
</blockquote>
<p><strong>二进制日志（bin log）</strong>：（重要）</p>
<ul>
<li>默认是关闭的，需要通过<code>vim /etc/my.cnf</code>配置：进行开启</li>
</ul>
<pre><code class="highlight plaintext">log-bin=mysql-bin</code></pre>
<ul>
<li>其中mysql-bin是binlog日志文件的basename，binlog日志文件的名称：<code>mysql-bin-000001.log</code></li>
<li>binlog记录了数据库所有的<strong>ddl语句和dml语句</strong>，但不包括select语句内容，语句以事件的形式保存，描述了数据的变更顺序，binlog还包括了每个更新语句的执行时间信息，binlog主要作用是用于恢复数据，因此binlog对于灾难恢复和备份恢复来说至关重要。</li>
<li>如果是DDL语句，则直接记录到binlog日志，而DML语句，必须通过事务提交才能记录到binlog日志中。</li>
<li>binlog还用于实现<strong>mysql主从复制</strong>。</li>
<li>binlog<strong>还用于数据恢复</strong>。</li>
</ul>
<p><strong>通用查询日志（general query log）</strong>：</p>
<ul>
<li>默认情况下通用查询日志是<strong>关闭</strong>的。</li>
<li>由于通用查询日志会记录用户的所有操作，其中还包含增删查改等信息，在并发操作大的环境下会产生大量的信息从而导致不必要的磁盘IO，会影响mysql的性能的。如若不是为了调试数据库的目的<strong>建议不要开启查询日志</strong>。</li>
</ul>
<p><strong>慢查询日志（slow query log）</strong>：</p>
<ul>
<li>默认是<strong>关闭</strong>的。需要通过在<code>vim /etc/my.cnf</code>设置进行开启</li>
</ul>
<pre><code class="highlight plaintext">slow_query_log=ON</code></pre>
<ul>
<li>记录执行时间超过<strong>long_query_time</strong>(默认10秒钟)秒的所有查询，便于收集查询时间比较长的SQL语句</li>
</ul>
<p><strong>事务日志</strong>：</p>
<ul>
<li>事务日志（InnoDB特有的日志）也叫redo日志。</li>
<li>文件名为&quot;ib_logfile0&quot;和“ib_logfile1”，默认存放在表空间所在目录。</li>
<li>还有一个日志文件叫undo 日志，默认存储在ib_data目录下。</li>
</ul>
<p><strong>中继日志</strong>：</p>
<ul>
<li>是在主从复制环境中产生的日志。</li>
<li>主要作用是为了从机可以从中继日志中获取到主机同步过来的SQL语句，然后执行到从机中。</li>
</ul>
<h4 id="数据文件"><a class="markdownIt-Anchor" href="#数据文件"></a> 数据文件</h4>
<p>查看MySQL数据文件存储地址：</p>
<pre><code class="highlight sql">use lee_home;

<span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;%datadir%&#x27;</span>;</code></pre>
<ul>
<li>.<strong>frm文件</strong>：主要存放与表相关的数据信息,主要包括表结构的定义信息</li>
<li><strong>.ibd和.ibdata文件</strong>：用来存储<strong>InnoDB</strong>存储引擎的表数据和索引信息</li>
<li><strong>.myd文件</strong>：主要用来存储使用<strong>MyISAM</strong>存储引擎的表数据信息。</li>
<li><strong>.myi文件</strong>：主要用来存储使用<strong>MyISAM</strong>存储引擎的表数据文件中任何索引的数据树</li>
</ul>
<blockquote>
<p>一张表对应一套</p>
</blockquote>
<h2 id="mysql索引"><a class="markdownIt-Anchor" href="#mysql索引"></a> MySQL索引</h2>
<h3 id="为什么使用索引"><a class="markdownIt-Anchor" href="#为什么使用索引"></a> 为什么使用索引</h3>
<p>使用索引的主要目的是为了<strong>优化查询速度</strong></p>
<p>索引是一种<strong>特殊的文件或者叫数据结构</strong>(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。更通俗的说，数据库索引好比是一本书前面的目录，能<strong>加快数据库的查询速度</strong>。</p>
<p>索引是 MySQL 中一种十分重要的数据库对象。它是数据库性能调优技术的基础，常用于实现数据的快速检索。</p>
<p>索引就是根据表中的一列或若干列按照一定顺序建立的列值与记录行之间的对应关系表，实质上是一张描述索引列的列值与原表中记录行之间一一对应关系的有序表。</p>
<p>在 MySQL 中，通常有以下两种方式访问数据库表的行数据：</p>
<p><strong>1) 顺序访问</strong></p>
<p>顺序访问是在表中实行全表扫描，从头到尾逐行遍历，直到在无序的行数据中找到符合条件的目标数据。这种方式实现比较简单，但是当表中有大量数据的时候，效率非常低下。例如，在几千万条数据中查找少量的数据时，使用顺序访问方式将会遍历所有的数据，花费大量的时间，显然会影响数据库的处理性能。</p>
<p><strong>2) 索引访问</strong></p>
<p>索引访问是通过遍历索引来直接访问表中记录行的方式。使用这种方式的前提是对表建立一个索引，在列上创建了索引之后，查找数据时可以直接根据该列上的索引找到对应记录行的位置，从而快捷地查找到数据。索引存储了指定列数据值的指针，根据指定的排序顺序对这些指针排序。<br />
例如，在学生基本信息表 students 中，如果基于 student_id 建立了索引，系统就建立了一张索引列到实际记录的映射表，当用户需要查找 student_id 为 12022 的数据的时候，系统先在 student_id 索引上找到该记录，然后通过映射表直接找到数据行，并且返回该行数据。因为扫描索引的速度一般远远大于扫描实际数据行的速度，所以采用索引的方式可以大大提高数据库的工作效率。</p>
<h3 id="索引的分类"><a class="markdownIt-Anchor" href="#索引的分类"></a> 索引的分类</h3>
<p>索引是在存储引擎中实现的，也就是说不同的存储引擎，会使用不同的索引</p>
<ul>
<li>MyISAM和InnoDB存储引擎：只支持<strong>BTREE索引</strong>， 也就是说<strong>默认</strong>使用BTREE，<strong>不能够更换</strong></li>
<li>MEMORY/HEAP存储引擎：支持HASH和BTREE索引</li>
</ul>
<hr />
<p>MySQL 中常用的索引在物理上分为以下两类。</p>
<p><strong>1) B-树索引</strong></p>
<p>B-树索引又称为 BTREE 索引，目前大部分的索引都是采用 B-树索引来存储的。B-树索引是一个典型的数据结构，其包含的组件主要有以下几个：</p>
<ul>
<li>叶子节点：包含的条目直接指向表里的数据行。叶子节点之间彼此相连，一个叶子节点有一个指向下一个叶子节点的指针。</li>
<li>分支节点：包含的条目指向索引里其他的分支节点或者叶子节点。</li>
<li>根节点：一个 B-树索引只有一个根节点，实际上就是位于树的最顶端的分支节点。</li>
</ul>
<p>基于这种树形数据结构，表中的每一行都会在索引上有一个对应值。因此，在表中进行数据查询时，可以根据索引值一步一步定位到数据所在的行。</p>
<p>B-树索引可以进行全键值、键值范围和键值前缀查询，也可以对查询结果进行 ORDER BY 排序。但 B-树索引必须遵循左边前缀原则，要考虑以下几点约束：</p>
<ul>
<li>查询必须从索引的最左边的列开始。</li>
<li>查询不能跳过某一索引列，必须按照从左到右的顺序进行匹配。</li>
<li>存储引擎不能使用索引中范围条件右边的列。</li>
</ul>
<p><strong>2) 哈希索引</strong></p>
<p>哈希（Hash）一般翻译为“散列”，也有直接音译成“哈希”的，就是把任意长度的输入（又叫作预映射，pre-image）通过散列算法变换成固定长度的输出，该输出就是散列值。</p>
<p>哈希索引也称为散列索引或 HASH 索引。MySQL 目前仅有 MEMORY 存储引擎和 HEAP 存储引擎支持这类索引。其中，MEMORY 存储引擎可以支持 B- 树索引和 HASH 索引，且将 HASH 当成默认索引。</p>
<p>HASH 索引不是基于树形的数据结构查找数据，而是根据索引列对应的哈希值的方法获取表的记录行。哈希索引的最大特点是访问速度快，但也存在下面的一些缺点：</p>
<ul>
<li>MySQL 需要读取表中索引列的值来参与散列计算，散列计算是一个比较耗时的操作。也就是说，相对于 B- 树索引来说，建立哈希索引会耗费更多的时间。</li>
<li>不能使用 HASH 索引排序。</li>
<li>HASH 索引只支持等值比较，如“=”“IN()”或“&lt;=&gt;”。</li>
<li>HASH 索引不支持键的部分匹配，因为在计算 HASH 值的时候是通过整个索引值来计算的。</li>
</ul>
<hr />
<p>根据索引的具体用途，MySQL 中的索引在逻辑上分为以下 5 类：</p>
<ul>
<li>
<p><strong>单列索引</strong></p>
<ul>
<li><strong>普通索引</strong>：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，纯粹为了查询数据更快一点。</li>
<li><strong>唯一索引</strong>：索引列中的值必须是唯一的，但是允许为空值，</li>
<li><strong>主键索引</strong>：是一种特殊的唯一索引，不允许有空值。</li>
</ul>
</li>
<li>
<p><strong>组合索引</strong></p>
<ul>
<li>在表中的<strong>多个字段组合上创建的索引</strong>，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循<strong>最左前缀集合</strong>。</li>
</ul>
</li>
<li>
<p><strong>全文索引</strong></p>
<ul>
<li>全文索引，只有在<strong>MyISAM</strong>引擎上才能使用，只能在CHAR,VARCHAR,TEXT类型字段上使用全文索引。</li>
</ul>
</li>
</ul>
<p><strong>空间索引</strong></p>
<ul>
<li>不做介绍，一般使用不到</li>
</ul>
<h3 id="索引使用原则注意事项"><a class="markdownIt-Anchor" href="#索引使用原则注意事项"></a> 索引使用原则/注意事项</h3>
<p>虽然索引可以加快查询速度，提高 MySQL 的处理性能，但是过多地使用索引也会造成以下弊端：</p>
<ul>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。</li>
<li>除了数据表占数据空间之外，每一个索引还要占一定的物理空间。如果要建立聚簇索引，那么需要的空间就会更大。</li>
<li>当对表中的数据进行增加、删除和修改的时候，索引也要动态地维护，这样就降低了数据的维护速度。</li>
</ul>
<blockquote>
<p>注意：索引可以在一些情况下加速查询，但是在某些情况下，会降低效率。</p>
</blockquote>
<p>索引只是提高效率的一个因素，因此在建立索引的时候应该遵循以下原则：</p>
<ul>
<li>在经常需要搜索的列上建立索引，可以加快搜索的速度。</li>
<li>在作为主键的列上创建索引，强制该列的唯一性，并组织表中数据的排列结构。</li>
<li>在经常使用表连接的列上创建索引，这些列主要是一些外键，可以加快表连接的速度。</li>
<li>在经常需要根据范围进行搜索的列上创建索引，因为索引已经排序，所以其指定的范围是连续的。</li>
<li>在经常需要排序的列上创建索引，因为索引已经排序，所以查询时可以利用索引的排序，加快排序查询。</li>
<li>在经常使用 WHERE 子句的列上创建索引，加快条件的判断速度。</li>
</ul>
<p>与此对应，在某些应用场合下建立索引不能提高 MySQL 的工作效率，甚至在一定程度上还带来负面效应，降低了数据库的工作效率，一般来说不适合创建索引的环境如下：</p>
<ul>
<li>对于那些在查询中很少使用或参考的列不应该创建索引。因为这些列很少使用到，所以有索引或者无索引并不能提高查询速度。相反，由于增加了索引，反而降低了系统的维护速度，并增大了空间要求。</li>
<li>对于那些只有很少数据值的列也不应该创建索引。因为这些列的取值很少，例如人事表的性别列。查询结果集的数据行占了表中数据行的很大比例，增加索引并不能明显加快检索速度。</li>
<li>对于那些定义为 TEXT、IMAGE 和 BIT 数据类型的列不应该创建索引。因为这些列的数据量要么相当大，要么取值很少。当修改性能远远大于检索性能时，不应该创建索引。因为修改性能和检索性能是互相矛盾的。</li>
<li>当创建索引时，会提高检索性能，降低修改性能。当减少索引时，会提高修改性能，降低检索性能。因此，当修改性能远远大于检索性能时，不应该创建索引。</li>
</ul>
<h3 id="索引的使用"><a class="markdownIt-Anchor" href="#索引的使用"></a> 索引的使用</h3>
<p><strong>单列索引</strong></p>
<ul>
<li>普通索引</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> INDEX index_name <span class="keyword">ON</span> <span class="keyword">table</span>(<span class="keyword">column</span>(length)) 

<span class="keyword">ALTER TABLE</span> table_name <span class="keyword">ADD</span> INDEX index_name <span class="keyword">ON</span> (<span class="keyword">column</span>(length))

案例：
<span class="keyword">create</span> index idx_name <span class="keyword">on</span> <span class="keyword">user</span>(name);

<span class="keyword">CREATE TABLE</span> tb_stu_info(
     id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,
     name <span class="type">CHAR</span>(<span class="number">45</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,
     dept_id <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,
     age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,
     height <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,
     INDEX(height)
     );</code></pre>
<ul>
<li>唯一索引</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX index_name <span class="keyword">ON</span> <span class="keyword">table</span>(<span class="keyword">column</span>(length))</code></pre>
<ul>
<li>全文索引</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">CREATE</span> FULLTEXT INDEX index_name <span class="keyword">ON</span> <span class="keyword">table</span>(<span class="keyword">column</span>(length))</code></pre>
<p><strong>联合索引</strong></p>
<pre><code class="highlight sql"><span class="keyword">ALTER TABLE</span> article <span class="keyword">ADD</span> INDEX index_titme_time (title(<span class="number">50</span>),<span class="type">time</span>(<span class="number">10</span>))</code></pre>
<hr />
<p><strong>删除索引</strong></p>
<pre><code class="highlight sql"><span class="keyword">DROP</span> INDEX index_name <span class="keyword">ON</span> <span class="keyword">table</span></code></pre>
<hr />
<p><strong>查看索引</strong></p>
<pre><code class="highlight sql"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [ <span class="keyword">FROM</span> <span class="operator">&lt;</span>数据库名<span class="operator">&gt;</span>]</code></pre>
<p>该语句会返回一张结果表，该表有如下几个字段，每个字段所显示的内容说明如下。</p>
<ul>
<li>Table：表的名称。</li>
<li>Non_unique：用于显示该索引是否是唯一索引。若不是唯一索引，则该列的值显示为 1；若是唯一索引，则该列的值显示为 0。</li>
<li>Key_name：索引的名称。Seq_in_index：索引中的列序列号，从 1 开始计数。</li>
<li>Column_name：列名称。</li>
<li>Collation：显示列以何种顺序存储在索引中。在 MySQL 中，升序显示值“A”（升序），若显示为 NULL，则表示无分类。</li>
<li>Cardinality：显示索引中唯一值数目的估计值。基数根据被存储为整数的统计数据计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL 使用该索引的机会就越大。</li>
<li>Sub_part：若列只是被部分编入索引，则为被编入索引的字符的数目。若整列被编入索引，则为 NULL。</li>
<li>Packed：指示关键字如何被压缩。若没有被压缩，则为 NULL。</li>
<li>Null：用于显示索引列中是否包含 NULL。若列含有 NULL，则显示为 YES。若没有，则该列显示为 NO。</li>
<li>Index_type：显示索引使用的类型和方法（BTREE、FULLTEXT、HASH、RTREE）。</li>
<li>Comment：显示评注。</li>
</ul>
<h3 id="索引的存储结构"><a class="markdownIt-Anchor" href="#索引的存储结构"></a> 索引的存储结构</h3>
<p><a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">数据结构查看https://www.cs.usfca.edu/~galles/visualization/Algorithms.html</a></p>
<p><strong>B Tree和B+ Tree的特点与区别</strong></p>
<ul>
<li>树的高度一般都是在2-4这个高度，树的高度直接影响IO读写的次数。</li>
<li>如果是三层树结构—支撑的数据可以达到20G，如果是四层树结构—支撑的数据可以达到几十T</li>
<li>B Tree和B+ Tree的最大区别在于非叶子节点是否存储数据的问题。B Tree是非叶子节点和叶子节点都会存储数据。而B+ Tree只有叶子节点才会存储数据，而且存储的数据都是在一行上，而且这些数据都是<strong>有指针指向</strong>的，也就是有<strong>顺序</strong>的。</li>
</ul>
<p><strong>非聚集索引</strong></p>
<ul>
<li>叶子节点只会存储数据行的指针，简单来说数据和索引不在一起，就是非聚集索引。</li>
<li>主键索引和辅助索引都会存储指针的值</li>
</ul>
<p><strong>聚集索引（InnoDB）</strong></p>
<ul>
<li>主键索引（聚集索引）的叶子节点会存储<strong>数据行</strong>，也就是说数据和索引是在一起，这就是聚集索引。</li>
<li>辅助索引只会存储主键值</li>
<li>如果没有没有主键，则使用唯一索引建立聚集索引；如果没有唯一索引，MySQL会按照一定规则创建聚集索引。</li>
</ul>
<blockquote>
<p>myISAM索引和数据是分开的，叶子节点只存了数据的引用（myd文件的指针），并没有存值</p>
</blockquote>
<blockquote>
<p>innodb中只有为主键索引的b+树叶子节点才会挂在完整的数据，其他列的索引的b+树的叶子节点只会挂载主键值，先找主键节点，然后从主键节点中找到要取的值</p>
</blockquote>
<blockquote>
<p>一个索引对应一个b+树</p>
</blockquote>
<h3 id="索引的注意事项"><a class="markdownIt-Anchor" href="#索引的注意事项"></a> 索引的注意事项</h3>
<p>尽量创建组合索引（组合索引其实会默认按照最左前缀原则帮我们创建多组索引）组合索引（id,name,sex）</p>
<p>索引<strong>最左前缀原则</strong></p>
<p>索引覆盖：<strong>要查询的列，也要使用索引覆盖住</strong></p>
<h2 id="mysql性能优化"><a class="markdownIt-Anchor" href="#mysql性能优化"></a> MySQL性能优化</h2>
<h3 id="查看执行计划explain"><a class="markdownIt-Anchor" href="#查看执行计划explain"></a> 查看执行计划explain</h3>
<p>MySQL 提供了一个<strong>EXPLAIN 命令</strong>, 它可以<strong>对 SELECT 语句进行分析</strong>, 并输出<br />
SELECT 执行的详细信息, 以供开发人员针对性优化.</p>
<p>使用explain这个命令来查看一个这些SQL语句的执行计划，查看该SQL语句有没有使用上了索引，有没有做全表扫描，这都可以通过explain命令来查看。</p>
<p>可以通过explain命令深入了解MySQL的基于开销的优化器，还可以获得很多可能被优化器考虑到的访问策略的细节，以及当运行SQL语句时哪种策略预计会被优化器采用。</p>
<p>EXPLAIN 命令用法十分简单, 在 <strong>SELECT 语句前加上 explain 就可以了</strong>, 例如:</p>
<pre><code class="highlight sql">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</code></pre>
<p><strong>参数说明</strong><br />
expain出来的信息有10列，分别是id、select_type、table、type、possible_keys、key、key_len、ref、rows、Extra,下面对这些字段进行解释：</p>
<ul>
<li>id: SELECT 查询的标识符. 每个 SELECT 都会自动分配一个唯一的标识符，也<strong>相当于执行顺序</strong>.</li>
<li><strong>select_type</strong>: SELECT 查询的类型.
<ul>
<li><code>SIMPLE</code>, 表示此查询不包含 UNION 查询或子查询</li>
<li><code>PRIMARY</code>, 表示此查询是最外层的查询</li>
<li><code>UNION</code>, 表示此查询是 UNION 的第二或随后的查询</li>
<li><code>DEPENDENT UNION</code>, UNION 中的第二个或后面的查询语句, 取决于外面的查询</li>
<li><code>UNION RESULT</code>, UNION 的结果</li>
<li><code>SUBQUERY</code>, 子查询中的第一个 SELECT</li>
<li><code>DEPENDENT SUBQUERY</code>: 子查询中的第一个 SELECT, 取决于外面的查询. 即子查询依赖于外层查询的结果.</li>
</ul>
</li>
<li>table: 查询的是哪个表</li>
<li>partitions: 匹配的分区</li>
<li><strong>type</strong>: 使用索引类型</li>
<li>possible_keys: 此次查询中可能选用的索引</li>
<li><strong>key</strong>: 此次查询中确切使用到的索引.</li>
<li><strong>ref</strong>: 哪个字段或常数与 key 一起被使用</li>
<li><strong>rows</strong>: 显示此查询一共扫描了多少行. 这个是一个估计值.</li>
<li>key_len：索引列的长度（太长了也不好）</li>
<li>filtered: 表示此查询条件所过滤的数据的百分比</li>
<li>extra: 额外的信息</li>
</ul>
<p><strong>type列说明</strong></p>
<p>通常来说, 不同的 type 类型的性能关系如下:<br />
<code>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</code></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>system</td>
<td>表只有一行</td>
</tr>
<tr>
<td>const</td>
<td>表最多只有一行匹配，通用用于主键或者唯一索引比较时</td>
</tr>
<tr>
<td>eq_ref</td>
<td>每次与之前的表合并行都只在该表读取一行，这是除了system，const之外最好的一种，特点是使用=，而且索引的所有部分都参与join且索引是主键或非空唯一键的索引</td>
</tr>
<tr>
<td>ref</td>
<td>如果每次只匹配少数行，那就是比较好的一种，使用=或&lt;=&gt;，可以是左覆盖索引或非主键或非唯一键</td>
</tr>
<tr>
<td>fulltext</td>
<td>全文搜索</td>
</tr>
<tr>
<td>ref_or_null</td>
<td>与ref类似，但包括NULL</td>
</tr>
<tr>
<td>index_merge</td>
<td>表示出现了索引合并优化(包括交集，并集以及交集之间的并集)，但不包括跨表和全文索引。这个比较复杂，目前的理解是合并单表的范围索引扫描（如果成本估算比普通的range要更优的话</td>
</tr>
<tr>
<td>unique_subquery</td>
<td>在in子查询中，就是value in (select…)把形如“select unique_key_column”的子查询替换。PS：</td>
</tr>
<tr>
<td>index_subquery</td>
<td>同上，但把形如”select non_unique_key_column“的子查询替换</td>
</tr>
<tr>
<td>range</td>
<td>常数值的范围</td>
</tr>
<tr>
<td>index</td>
<td>a.当查询是索引覆盖的，即所有数据均可从索引树获取的时候（Extra中有Using Index）；b.以索引顺序从索引中查找数据行的全表扫描（无 Using Index）；c.如果Extra中Using Index与Using Where同时出现的话，则是利用索引查找键值的意思；d.如单独出现，则是用读索引来代替读行，但不用于查找</td>
</tr>
<tr>
<td>all</td>
<td>全表扫描</td>
</tr>
</tbody>
</table>
<p>参考网址：<br />
<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008131735">https://segmentfault.com/a/1190000008131735</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/rewiner120/article/details/70598797">https://blog.csdn.net/rewiner120/article/details/70598797</a></p>
<h3 id="慢查询"><a class="markdownIt-Anchor" href="#慢查询"></a> 慢查询</h3>
<h4 id="优化思路"><a class="markdownIt-Anchor" href="#优化思路"></a> 优化思路</h4>
<ol>
<li>
<p>首先需要使用<strong>慢查询</strong>功能，去获取所有查询时间比较长的SQL语句</p>
</li>
<li>
<p>其次使用<strong>explain</strong>命令去查看有问题的SQL的执行计划</p>
</li>
<li>
<p>最后可以使用<strong>show profile</strong>[s] 查看有问题的SQL的性能使用情况（底层的资源使用情况）</p>
</li>
</ol>
<h4 id="慢查询介绍"><a class="markdownIt-Anchor" href="#慢查询介绍"></a> 慢查询介绍</h4>
<p>数据库查询快慢是影响项目性能的一大因素，对于数据库，我们除了要优化 SQL，更重要的是得<strong>先找到需要优化的 SQL</strong>。</p>
<p>MySQL 数据库有一个“<strong>慢查询日志</strong>”功能，用来<strong>记录</strong>查询时间超过<strong>某个设定值的SQL</strong>，这将极大程度帮助我们<strong>快速定位到症结所在</strong>，以便对症下药。</p>
<ul>
<li>至于查询时间的多少才算慢，每个项目、业务都有不同的要求。</li>
<li>传统企业的软件允许查询时间高于某个值，但是把这个标准放在互联网项目或者访问量大的网站上，估计就是一个bug，甚至可能升级为一个功能性缺陷。</li>
</ul>
<p>MySQL的慢查询日志功能，<strong>默认是关闭的，需要手动开启</strong></p>
<h4 id="开启慢查询功能"><a class="markdownIt-Anchor" href="#开启慢查询功能"></a> 开启慢查询功能</h4>
<p><strong>查看是否开启慢查询功能</strong></p>
<p><strong>参数说明：</strong></p>
<ul>
<li><strong>slow_query_log</strong>    ：是否开启慢查询日志，ON 为开启，OFF 为关闭，如果为关闭可以开启。</li>
<li>log-slow-queries  ：旧版（5.6以下版本）MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.log</li>
<li><strong>slow-query-log-file</strong>：新版（5.6及以上版本）MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.log</li>
<li><strong>long_query_time</strong> ：慢查询阈值，当查询时间多于设定的阈值时，记录日志，单位为秒。</li>
</ul>
<p><strong>临时开启慢查询功能</strong></p>
<p>在MySQL执行sql语句设置，但是如果重启MySQL会失效</p>
<pre><code class="highlight sql"><span class="keyword">set</span> <span class="keyword">global</span> slow_query_log <span class="operator">=</span> <span class="keyword">ON</span>;

<span class="keyword">set</span> <span class="keyword">global</span> long_query_time <span class="operator">=</span> <span class="number">1</span>;</code></pre>
<p><strong>永久开启慢查询功能</strong></p>
<p>修改<code>/etc/my.cnf</code>配置文件，重启 MySQL, 这种永久生效.</p>
<pre><code class="highlight plaintext">[mysqld]

slow_query_log = ON

slow_query_log_file = /var/log/mysql/slow.log

long_query_time = 1</code></pre>
<p><strong>慢查询日志的格式</strong></p>
<pre><code class="highlight sql"><span class="comment">--让select睡眠3秒钟，模拟要优化的sql，为了查看慢查询日志</span>
<span class="keyword">select</span> sleep(<span class="number">3</span>);</code></pre>
<p><strong>格式说明</strong></p>
<ul>
<li>第一行,SQL查询执行的时间</li>
<li>第二行,执行SQL查询的连接信息，用户和连接IP</li>
<li>第三行,记录了一些我们比较有用的信息，如下解析
<ul>
<li>Query_time,这条SQL执行的时间,越长则越慢</li>
<li>Lock_time,在MySQL服务器阶段(不是在存储引擎阶段)等待表锁时间</li>
<li>Rows_sent,查询返回的行数</li>
<li>Rows_examined,查询检查的行数，越长就当然越费时间</li>
</ul>
</li>
<li>第四行,设置时间戳，没有实际意义，只是和第一行对应执行时间。</li>
<li>第五行及后面所有行（第二个# Time:之前）,执行的sql语句记录信息，因为sql可能会很长。</li>
</ul>
<h4 id="分析慢查询日志"><a class="markdownIt-Anchor" href="#分析慢查询日志"></a> 分析慢查询日志</h4>
<p><strong>MySQL自带的mysqldumpslow</strong></p>
<pre><code class="highlight bash">[root@localhost mysql]# mysqldumpslow /var/lib/mysql/localhost-slow.log</code></pre>
<p><strong>常用参数说明</strong></p>
<ul>
<li>-s：表示按照何种方式排序<br />
*</li>
<li>-t：是top n的意思，即为返回前面多少条的数据</li>
<li>-g：后边可以写一个正则匹配模式，大小写不敏感的</li>
</ul>
<p><strong>示例:</strong></p>
<p>得到按照时间排序的前10条里面含有左连接的查询语句</p>
<pre><code class="highlight bash">mysqldumpslow -s t -t 10 -g “left <span class="built_in">join</span>” /var/lib/mysql/localhost_slow.log</code></pre>
<p><strong>使用mysqlsla 工具</strong></p>
<ul>
<li>
<p>mysqlsla工具，功能非常强大。数据报表，非常有利于分析慢查询的原因，包括执行频率，数据量，查询消耗等。</p>
</li>
<li>
<p>不过此工具已停止维护，项目 github 介绍页面推荐使用 percona-toolkit，下面有介绍。</p>
</li>
</ul>
<pre><code class="highlight plaintext">mysqlsla -lt /var/log/mysql/slow.log</code></pre>
<p><strong>使用percona-toolkit工具</strong></p>
<p>percona-toolkit是一组高级命令行工具的集合，可以查看当前服务的摘要信息，磁盘检测，分析慢查询日志，查找重复索引，实现表同步等等</p>
<p><a target="_blank" rel="noopener" href="https://www.percona.com/downloads/percona-toolkit/3.0.11/binary/tarball/percona-toolkit-3.0.11_x86_64.tar.gz">percona-toolkit工具 下载</a></p>
<p>安装：</p>
<pre><code class="highlight bash">tar -xf percona-toolkit-3.0.11_x86_64.tar.gz
<span class="built_in">cd</span> percona-toolkit-3.0.11
perl Makefile.PL
make
make install</code></pre>
<p>调错：</p>
<pre><code class="highlight plaintext">Can&#x27;t locate ExtUtils/MakeMaker.pm in @INC 错误的解决方式:
* yum install -y perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker

Can&#x27;t locate Time/HiRes.pm in @INC
* yum install -y perl-Time-HiRes</code></pre>
<p>使用pt-query-digest查看慢查询日志</p>
<pre><code class="highlight plaintext">pt-query-digest /var/lib/mysql/localhost-slow.log</code></pre>
<h3 id="性能分析语句show-profile"><a class="markdownIt-Anchor" href="#性能分析语句show-profile"></a> 性能分析语句show profile</h3>
<p>Query Profiler是MYSQL自带的一种<strong>query诊断分析工具</strong>，通过它可以分析出一条SQL语句的<strong>性能瓶颈</strong>在什么地方。</p>
<p>通常我们是使用的explain,以及slow query log都无法做到精确分析，但是Query<br />
Profiler却可以<strong>定位出一条SQL语句执行的各种资源消耗情况</strong>，比如CPU，IO等，以及该SQL执行所耗费的时间等。不过该工具只有在MYSQL 5.0.37以及以上版本中才有实现。</p>
<p>默认的情况下，MYSQL的该功能没有打开，<strong>需要自己手动启动</strong>。</p>
<h4 id="语句使用"><a class="markdownIt-Anchor" href="#语句使用"></a> 语句使用</h4>
<p><strong>show profile</strong> 和 <strong>show profiles</strong> 语句可以展示<strong>当前会话</strong>(<u>退出session后,profiling重置为0</u>) 中执行语句的资源使用情况.</p>
<ul>
<li><strong>show profiles</strong> :以列表形式显示最近发送到服务器上执行的语句的资源使用情况.显示的记录数由变量:profiling_history_size 控制,默认15条</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">show</span> profiles;</code></pre>
<ul>
<li><strong>show profile</strong>: 展示<u>最近一条</u>语句执行的详细资源占用信息,默认显示 Status和Duration（时间）两列；</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">show</span> profile;</code></pre>
<ul>
<li><strong>show profile</strong>还可根据 show profiles 列表中的 Query_ID ,选择显示某条记录的性能分析信息</li>
</ul>
<p>案例：</p>
<pre><code class="highlight sql"><span class="keyword">show</span> profile <span class="keyword">all</span> forquery <span class="number">2</span>;</code></pre>
<h4 id="开启profile功能"><a class="markdownIt-Anchor" href="#开启profile功能"></a> 开启profile功能</h4>
<p>Profile 功能由MySQL会话变量 : <strong>profiling</strong>控制,默认是<strong>OFF</strong>关闭状态。</p>
<p>查看是否开启了Profile功能:</p>
<pre><code class="highlight sql"><span class="keyword">select</span> @<span class="variable">@profiling</span>;
<span class="keyword">show</span> variables <span class="keyword">like</span> ‘<span class="operator">%</span>profil<span class="operator">%</span>’;</code></pre>
<p><strong>开启profile功能</strong></p>
<pre><code class="highlight sql"><span class="keyword">set</span> profiling<span class="operator">=</span><span class="number">1</span>; <span class="comment">--1是开启、0是关闭</span></code></pre>
<h4 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h4>
<ol>
<li>
<p>开启profiling功能</p>
</li>
<li>
<p>执行sql语句</p>
</li>
<li>
<p>执行 show profiles 查看分析列表</p>
</li>
<li>
<p>查询第二条语句的执行情况</p>
</li>
</ol>
<pre><code class="highlight sql"><span class="keyword">show</span> profile <span class="keyword">for</span> query <span class="number">2</span>;</code></pre>
<ol start="5">
<li>可指定资源类型查询</li>
</ol>
<pre><code class="highlight sql"><span class="keyword">show</span> profile cpu,swaps <span class="keyword">for</span> query <span class="number">2</span>;</code></pre>
<h3 id="性能优化细节"><a class="markdownIt-Anchor" href="#性能优化细节"></a> 性能优化细节</h3>
<ul>
<li>合理的创建及使用索引（考虑数据的增删情况）</li>
<li>合理的冗余字段（尽量建一些大表，考虑数据库的三范式和业务设计的取舍）</li>
<li>使用SQL要注意一些细节：select语句中尽量不要使用*、count(*)，WHERE语句中尽量不要使用1=1、in语句（建议使用exists）、注意组合索引的创建顺序按照顺序组着查询条件、尽量查询粒度大的SQL放到最左边、尽量建立组合索引</li>
<li>合理利用慢查询日志、explain执行计划查询、show profile查看SQL执行时的资源使用情况。</li>
</ul>
<h2 id="mysql事务处理"><a class="markdownIt-Anchor" href="#mysql事务处理"></a> MySQL事务处理</h2>
<h3 id="事务概述"><a class="markdownIt-Anchor" href="#事务概述"></a> 事务概述</h3>
<p>MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你即需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务！</p>
<ul>
<li>
<p>在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。</p>
</li>
<li>
<p>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</p>
</li>
<li>
<p>事务用来管理DML操作，比如 insert,update,delete 语句</p>
</li>
</ul>
<p>一般来说，事务是必须满足4个条件（ACID）：</p>
<ul>
<li>
<p><strong>Atomicity</strong>（原子性）：事务必须是原子工作单元，事务中的操作要么全部执行，要么全都不执行，不能只完成部分操作。原子性在数据库系统中，由恢复机制来实现</p>
</li>
<li>
<p><strong>Consistency</strong>（一致性）：事务开始之前，数据库处于一致性的状态；事务结束后，数据库必须仍处于一致性状态。数据库一致性的定义是由用户负责的。例如，在银行转账中，用户可以定义转账前后两个账户金额之和保持不变。</p>
</li>
<li>
<p><strong>Isolation</strong>（隔离性）：系统必须保证事务不受其他并发执行事务的影响，即当多个事务同时运行时，各事务之间相互隔离，不可互相干扰。事务查看数据时所处的状态，要么是另一个并发事务修改它之前的状态，要么是另一个并发事务修改它之后的状态，事务不会查看中间状态的数据。隔离性通过系统的并发控制机制实现。</p>
</li>
<li>
<p><strong>Durability</strong>（持久性）：一个已完成的事务对数据所做的任何变动在系统中是永久有效的，即使该事务产生的修改不正确，错误也将一直保持。持久性通过恢复机制实现，发生故障时，可以通过日志等手段恢复数据库信息。</p>
</li>
</ul>
<h3 id="mysql事务支持"><a class="markdownIt-Anchor" href="#mysql事务支持"></a> MySQL事务支持</h3>
<p>常见的操作有一下三个：</p>
<ul>
<li>
<p><strong>BEGIN</strong>或START TRANSACTION；显式地开启一个事务；</p>
</li>
<li>
<p><strong>COMMIT</strong>；也可以使用COMMIT WORK，不过二者是等价的。COMMIT会提交事务，并使已对数据库进行的所有修改称为永久性的；</p>
</li>
<li>
<p><strong>ROLLBACK</strong>；有可以使用ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</p>
</li>
</ul>
<p>在 MySQL 命令行的<strong>默认</strong>设置下，事务都是<strong>自动提交</strong>的，即执行 SQL 语句后就会马上执行COMMIT 操作。因此要<strong>显式地开启一个事务务</strong>须使用命令<strong>BEGIN</strong> 或 START TRANSACTION，或者执行命令 <strong>SET AUTOCOMMIT=0</strong>，用来禁止使用当前会话的自动提交。</p>
<h4 id="事务并发问题"><a class="markdownIt-Anchor" href="#事务并发问题"></a> 事务并发问题</h4>
<p><strong>丢失更新</strong>：一个事务更新之后，另一个事务也更新了，但是第二个事务回滚了，则第一个事务也被回滚了。</p>
<p><strong>脏读</strong>：一个事务读取到另一个事务未提交的数据。（行锁：<em>我写的时候其他人不可读</em> ）</p>
<p><strong>不可重复读</strong>：一个事务因读取到另一个事务已提交的数据。导致对同一条记录读取两次以上的结果不一致。update操作（行锁：<em>只要我读了其他人就不能写</em> ）</p>
<p><strong>幻读</strong>：一个事务因读取到另一个事务已提交的数据。导致对同一张表读取两次以上的结果不一致。insert、delete操作（表锁：<em>读表的同时锁掉写表的权限</em>）</p>
<h4 id="事务隔离级别"><a class="markdownIt-Anchor" href="#事务隔离级别"></a> 事务隔离级别</h4>
<p>为了避免上面出现的几种情况，在标准SQL规范中，定义了<strong>4个事务隔离级别（由低到高）</strong>，不同的隔离级别对事务的处理不同</p>
<ul>
<li><strong>Read uncommitted</strong> (读未提交)：最低级别，任何情况都无法保证。</li>
<li><strong>Read committed</strong> (读已提交)：可避免脏读的发生，<code>使用排他写锁实现</code>。</li>
<li><strong>Repeatable read</strong> (可重复读)：可避免脏读、不可重复读的发生。<code>排他写锁+本事务查询了某条记录，就会保留备份，即使其他事务修改了这条记录，本事务依然查到是第一次查出的值</code></li>
<li><strong>Serializable</strong> (串行化)：可避免脏读、不可重复读、幻读的发生。</li>
</ul>
<p><strong>默认级别</strong></p>
<p>大多数数据库的默认隔离级别是Read committed，比如Oracle、DB2等。</p>
<p>MySQL数据库的默认隔离级别是<strong>Repeatable read</strong>。<code>排他写锁+本事务查询了某条记录，就会保留备份，即使其他事务修改了这条记录，本事务依然查到是第一次查出的值</code></p>
<p><strong>如何查看和设置隔离级别：</strong></p>
<ul>
<li>在MySQL数据库中查看当前事务的隔离级别：</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">select</span> @<span class="variable">@tx_isolation</span>;</code></pre>
<ul>
<li>在MySQL数据库中设置事务的隔离 级别：</li>
</ul>
<pre><code class="highlight sql"><span class="comment">-- -glogal表示全局的</span>
<span class="comment">-- -session表示当前会话</span>
<span class="keyword">set</span>  [glogal <span class="operator">|</span> session]  transaction isolation level 隔离级别名称;

<span class="keyword">set</span> tx_isolation<span class="operator">=</span>’隔离级别名称;’</code></pre>
<p><strong>注意事项</strong></p>
<ul>
<li>
<p>隔离级别越高，越能保证数据的完整性和一致性，但是对并发性能的影响也越大。</p>
</li>
<li>
<p>对于多数应用程序，可以优先考虑把数据库系统的隔离级别设为Read Committed。它能够避免脏读取，而且具有较好的并发性能。尽管它会导致不可重复读、幻读这些并发问题，在可能出现这类问题的个别场合，可以由应用程序采用悲观锁或乐观锁来控制</p>
</li>
</ul>
<h3 id="事务使用"><a class="markdownIt-Anchor" href="#事务使用"></a> 事务使用</h3>
<p><strong>开始事务</strong><br />
事务以 BEGIN TRANSACTION 开始。</p>
<p>语法格式如下：</p>
<pre><code class="highlight sql"><span class="keyword">BEGIN</span> TRANSACTION <span class="operator">&lt;</span>事务名称<span class="operator">&gt;</span> <span class="operator">|</span>@<span class="operator">&lt;</span>事务变量名称<span class="operator">&gt;</span></code></pre>
<p>语法说明如下：</p>
<ul>
<li>@&lt;事务变量名称&gt;是由用户定义的变量，必须用 char、varchar、nchar 或 nvarchar数据类型来声明该变量。</li>
<li>BEGIN TRANSACTION 语句的执行使全局变量 @@TRANCOUNT 的值加 1。</li>
</ul>
<hr />
<p><strong>提交事务</strong></p>
<p>COMMIT 表示提交事务，即提交事务的所有操作。具体地说，就是将事务中所有对数据库的更新写回到磁盘上的物理数据库中，事务正常结束。</p>
<p>提交事务，意味着将事务开始以来所执行的所有数据修改成为数据库的永久部分，因此也标志着一个事务的结束。一旦执行了该命令，将不能回滚事务。只有在所有修改都准备好提交给数据库时，才执行这一操作。</p>
<p>语法格式如下：</p>
<pre><code class="highlight sql"><span class="keyword">COMMIT</span> TRANSACTION <span class="operator">&lt;</span>事务名称<span class="operator">&gt;</span> <span class="operator">|</span>@<span class="operator">&lt;</span>事务变量名称<span class="operator">&gt;</span></code></pre>
<blockquote>
<p>其中：COMMIT TRANSACTION语句的执行使全局变量 @@TRANCOUNT 的值减 1。</p>
</blockquote>
<hr />
<p><strong>撤销事务</strong></p>
<p>ROLLBACK 表示撤销事务，即在事务运行的过程中发生了某种故障，事务不能继续执行，系统将事务中对数据库的所有已完成的操作全部撤销，回滚到事务开始时的状态。这里的操作指对数据库的更新操作。</p>
<p>当事务执行过程中遇到错误时，使用 ROLLBACK TRANSACTION 语句使事务回滚到起点或指定的保持点处。同时，系统将清除自事务起点或到某个保存点所做的所有的数据修改，并且释放由事务控制的资源。因此，这条语句也标志着事务的结束。</p>
<p>语法格式如下：</p>
<pre><code class="highlight sql"><span class="keyword">ROLLBACK</span> [TRANSACTION]
[<span class="operator">&lt;</span>事务名称<span class="operator">&gt;</span><span class="operator">|</span> @<span class="operator">&lt;</span>事务变量名称<span class="operator">&gt;</span> <span class="operator">|</span> <span class="operator">&lt;</span>存储点名称<span class="operator">&gt;</span><span class="operator">|</span> @ <span class="operator">&lt;</span>含有存储点名称的变量名<span class="operator">&gt;</span></code></pre>
<p>语法说明如下：</p>
<ul>
<li>当条件回滚只影响事务的一部分时，事务不需要全部撤销已执行的操作。可以让事务回滚到指定位置，此时，需要在事务中设定保存点（SAVEPOINT）。保存点所在位置之前的事务语句不用回滚，即保存点之前的操作被视为有效的。保存点的创建通过“SAVING TRANSACTION&lt;保存点名称&gt;”语句来实现，再执行“ROLLBACK TRANSACTION&lt;保存点名称&gt;”语句回滚到该保存点。</li>
<li>若事务回滚到起点，则全局变量 @@TRANCOUNT 的值减 1；若事务回滚到指定的保存点，则全局变量 @@TRANCOUNT 的值不变。</li>
</ul>
<h2 id="mysql锁"><a class="markdownIt-Anchor" href="#mysql锁"></a> MySQL锁</h2>
<h3 id="锁介绍"><a class="markdownIt-Anchor" href="#锁介绍"></a> 锁介绍</h3>
<p>数据库锁定机制简单来说就是数据库为了保证数据的一致性而使各种共享资源在被并发访问访问变得有序所设计的一种规则。</p>
<p>对于任何一种数据库来说都需要有相应的锁定机制，所以MySQL自然也不能例外。</p>
<p>MySQL数据库由于其自身架构的特点，存在多种数据存储引擎，每种存储引擎所针对的应用场景特点都不太一样，为了满足各自特定应用场景的需求，<strong>每种存储引擎的锁定机制都是为各自所面对的特定场景而优化设计，所以各存储引擎的锁定机制也有较大区别</strong>。</p>
<p>总的来说，MySQL各存储引擎使用了三种类型（级别）的锁定机制：<strong>行级锁定，页级锁定和表级锁定</strong>。下面我们先分析一下MySQL这三种锁定的特点和各自的优劣所在。</p>
<ul>
<li>按照锁的粒度来分：行级锁和表级锁</li>
<li>按照锁的功能来分：共享读锁和排他写锁</li>
</ul>
<p>悲观锁（排他写锁）和乐观锁（使用某一版本列或者唯一列进行逻辑控制）</p>
<p>MySQL的InnoDB和MyISAM存储引擎最大的区别：事务的支持、行级锁的支持。</p>
<p><strong>行级锁定（row-level）</strong></p>
<p>行级锁定最大的特点就是锁定对象的颗粒度很小，也是目前各大数据库管理软件所实现的锁定颗粒度最小的。由于锁定颗粒度很小，所以发生锁定资源争用的概率也最小，能够给予应用程序尽可能大的并发处理能力而提高一些需要高并发应用系统的整体性能。</p>
<p>虽然能够在并发处理能力上面有较大的优势，但是行级锁定也因此带来了不少弊端。由于锁定资源的颗粒度很小，所以每次获取锁和释放锁需要做的事情也更多，带来的消耗自然也就更大了。此外，行级锁定也最容易发生死锁。</p>
<p><strong>表级锁定（table-level）</strong></p>
<p>和行级锁定相反，表级别的锁定是MySQL各存储引擎中最大颗粒度的锁定机制。该锁定机制最大的特点是实现逻辑非常简单，带来的系统负面影响最小。所以获取锁和释放锁的速度很快。由于表级锁一次会将整个表锁定，所以可以很好的避免困扰我们的死锁问题。</p>
<p>当然，锁定颗粒度大所带来最大的负面影响就是出现锁定资源争用的概率也会最高，致使并发度大打折扣。</p>
<p><strong>页级锁定（page-level）</strong></p>
<p>页级锁定是MySQL中比较独特的一种锁定级别，在其他数据库管理软件中也并不是太常见。页级锁定的特点是锁定颗粒度介于行级锁定与表级锁之间，所以获取锁定所需要的资源开销，以及所能提供的并发处理能力也同样是介于上面二者之间。另外，页级锁定和行级锁定一样，会发生死锁</p>
<p><strong>总的来说，MySQL这3种锁的特性可大致归纳如下：</strong></p>
<ul>
<li><strong>表级锁</strong>：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低；</li>
<li><strong>行级锁</strong>：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高；</li>
<li>页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般。</li>
</ul>
<h3 id="表级锁"><a class="markdownIt-Anchor" href="#表级锁"></a> 表级锁</h3>
<p>MySQL的表级锁定有两种模式：<strong>表共享读锁</strong>（Table Read Lock<em>我可读不可写，其他可读写等待</em>）和<strong>表独占写锁</strong>（Table Write Lock<em>只有我可以读写，别人都不可以干</em>）。</p>
<p>MySQL 实现的表级锁定的争用状态变量：</p>
<pre><code class="highlight sql"><span class="keyword">show</span> status <span class="keyword">like</span> <span class="string">&#x27;table%&#x27;</span>;</code></pre>
<blockquote>
<p><code>table_locks_immediate</code>：产生表级锁定的次数；</p>
</blockquote>
<blockquote>
<p><code>table_locks_waited</code>：出现表级锁定争用而发生等待的次数；</p>
</blockquote>
<p><strong>手动增加（获取）表锁</strong></p>
<pre><code class="highlight sql">lock <span class="keyword">table</span> 表名称 read(write),表名称<span class="number">2</span> read(write)，其他;</code></pre>
<p><strong>查看表锁情况</strong></p>
<pre><code class="highlight sql"><span class="keyword">show</span> <span class="keyword">open</span> tables;</code></pre>
<p><strong>（释放）删除表锁</strong></p>
<pre><code class="highlight sql">unlock tables;</code></pre>
<h3 id="表锁演示"><a class="markdownIt-Anchor" href="#表锁演示"></a> 表锁演示</h3>
<p><strong>前提准备</strong></p>
<pre><code class="highlight sql">建表语句
<span class="keyword">CREATE TABLE</span> `mylock` (  
 	`id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT,   
	`NAME` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,   
	<span class="keyword">PRIMARY KEY</span> (`id`) );


添加记录
<span class="keyword">INSERT INTO</span> mylock (id,NAME) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>);
<span class="keyword">INSERT INTO</span> mylock (id,NAME) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>);
<span class="keyword">INSERT INTO</span> mylock (id,NAME) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>);
<span class="keyword">INSERT INTO</span> mylock (id,NAME) <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;d&#x27;</span>);</code></pre>
<p><strong>读锁演示</strong></p>
<p><strong>写锁演示</strong></p>
<h3 id="innodb引擎的锁机制"><a class="markdownIt-Anchor" href="#innodb引擎的锁机制"></a> InnoDB引擎的锁机制</h3>
<p><strong>共享锁</strong>（S）：允许一个事务去读一行，阻止其他事务获得相同数据集的排他锁。</p>
<p><strong>排他锁</strong>（X)：允许获得排他锁的事务更新数据，阻止其他事务取得相同数据集的共享读锁和排他写锁。</p>
<p><strong>意向共享锁</strong>（IS）：事务打算给数据行加行共享锁，事务在给一个数据行加共享锁前必须先取得该表的IS锁。</p>
<p><strong>意向排他锁</strong>（IX）：事务打算给数据行加行排他锁，事务在给一个数据行加排他锁前必须先取得该表的IX锁。</p>
<p>1）共享锁和排他锁都是行锁，意向锁都是表锁，应用中我们只会使用到共享锁和排他锁，意向锁是mysql内部使用的，不需要用户干预。</p>
<p>2）对于UPDATE、DELETE和INSERT语句，InnoDB会自动给涉及数据集加排他锁（X)；对于普通SELECT语句，InnoDB不会加任何锁，事务可以通过以下语句显示给记录集加共享锁或排他锁。</p>
<p>共享锁（S）：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ... LOCK <span class="keyword">IN</span> SHARE MODE</code></pre>
<p>排他锁（X)：</p>
<pre><code class="highlight sql"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ... <span class="keyword">FOR</span> <span class="keyword">UPDATE</span></code></pre>
<p>3）<strong>InnoDB行锁</strong>是通过给<strong>索引上的索引项加锁来实现的</strong>，因此InnoDB这种行锁实现特点意味着：只有通过索引条件检索数据，InnoDB才使用行级锁，否则，InnoDB将使用表锁！</p>
<p><strong>Innodb的锁定是通过在指向数据记录的第一个索引键之前和最后一个索引键之后的空域空间上标记锁定信息而实现的</strong>。Innodb的这种锁定实现方式被称为“NEXT-KEYlocking”（间隙锁），因为Query执行过程中通过过范围查找的华，他会锁定整个范围内所有的索引键值，即使这个键值并不存在</p>
<p><strong>Innodb所使用的行级锁定争用状态查看：</strong></p>
<pre><code class="highlight sql"><span class="keyword">show</span> status <span class="keyword">like</span> <span class="string">&#x27;innodb_row_lock%&#x27;</span>;</code></pre>
<ul>
<li>
<p><code>Innodb_row_lock_current_waits</code>：当前正在等待锁定的数量；</p>
</li>
<li>
<p><code>Innodb_row_lock_time</code>：从系统启动到现在锁定总时间长度；</p>
</li>
<li>
<p><code>Innodb_row_lock_time_avg</code>：每次等待所花平均时间；</p>
</li>
<li>
<p><code>Innodb_row_lock_time_max</code>：从系统启动到现在等待最常的一次所花的时间；</p>
</li>
<li>
<p><code>Innodb_row_lock_waits</code>：系统启动后到现在总共等待的次数；</p>
</li>
</ul>
<hr />
<blockquote>
<p>对于这5个状态变量，比较重要的是:</p>
</blockquote>
<blockquote>
<p><code>Innodb_row_lock_time_avg</code>（等待平均时长）<br />
<code>Innodb_row_lock_waits</code>（等待总次数）<br />
<code>Innodb_row_lock_time</code>（等待总时长）这三项。</p>
</blockquote>
<blockquote>
<p>尤其是当等待次数很高，而且每次等待时长也不小的时候，我们就需要分析系统中为什么会有如此多的等待，然后根据分析结果着手指定优化计划</p>
</blockquote>
<h3 id="innodb行锁演示"><a class="markdownIt-Anchor" href="#innodb行锁演示"></a> InnoDB行锁演示</h3>
<pre><code class="highlight sql"><span class="keyword">create table</span> test_innodb_lock (a <span class="type">int</span>(<span class="number">11</span>),b <span class="type">varchar</span>(<span class="number">16</span>)) engine<span class="operator">=</span>innodb;
Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)
 
<span class="keyword">create</span> index test_innodb_a_idx <span class="keyword">on</span> test_innodb_lock(a);
Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)
Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span>

<span class="keyword">create</span> index test_innodb_lock_b_idx <span class="keyword">on</span> test_innodb_lock(b);
Query OK, <span class="number">11</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)
Records: <span class="number">11</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></code></pre>
<h2 id="集群搭建"><a class="markdownIt-Anchor" href="#集群搭建"></a> 集群搭建</h2>
<h3 id="主从复制"><a class="markdownIt-Anchor" href="#主从复制"></a> 主从复制</h3>
<h4 id="原理"><a class="markdownIt-Anchor" href="#原理"></a> 原理</h4>
<p>主从复制原理：</p>
<blockquote>
<p>可以一主多从</p>
</blockquote>
<p>查看binlog日志：</p>
<pre><code class="highlight sql">mysqlbinlog 文件名称</code></pre>
<h4 id="主从复制配置"><a class="markdownIt-Anchor" href="#主从复制配置"></a> 主从复制配置</h4>
<p><strong>主服务器配置</strong></p>
<blockquote>
<p>先关闭防火墙</p>
</blockquote>
<p>第一步：修改<code>my.conf</code>文件：在[mysqld]段下添加：</p>
<pre><code class="highlight plaintext">#启用二进制日志
log-bin=mysql-bin

#服务器唯一ID，一般取IP最后一段
server-id=133</code></pre>
<p>第二步：重启mysql服务</p>
<pre><code class="highlight sql">service mysqld restart</code></pre>
<p>第三步：建立帐户并授权slave从机（登录到MySQL）</p>
<ul>
<li><code>grant</code>：关键字表示授权</li>
<li><code>FILE</code>：让从机有文件读写的能力</li>
<li><code>REPLICATION SLAVE</code> ：从机复制权限</li>
<li><code>REPLICATION CLIENT</code>：复制客户端权限</li>
<li><code>ALL</code>：表示所有权限</li>
<li><code>%</code>：可以换成IP地址，表示哪个ip地址可以访问我</li>
<li><code>root/123456</code>：是主机的账号的密码</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">GRANT</span> FILE <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;

<span class="keyword">GRANT</span> REPLICATION SLAVE, REPLICATION CLIENT <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> 
identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>; 


<span class="comment">--只设置下面这一个权限也是可以的</span>
<span class="keyword">GRANT</span> REPLICATION SLAVE <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;root&#x27;</span>;</code></pre>
<blockquote>
<p>一般不用root帐号，“%”表示所有客户端都可能连，只要帐号，密码正确，此处可用具体客户端IP代替，如192.168.145.226，加强安全</p>
</blockquote>
<p>执行完上述命令需要刷新，使在缓冲区的权限生效：</p>
<pre><code class="highlight sql">mysql<span class="operator">&gt;</span> FLUSH PRIVILEGES;</code></pre>
<p>查看mysql现在有哪些用户</p>
<pre><code class="highlight sql">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="keyword">user</span>,host <span class="keyword">from</span> mysql.user;</code></pre>
<p>第四步：查询master的状态</p>
<pre><code class="highlight plaintext">mysql&gt; show master status;</code></pre>
<p><strong>从服务器配置</strong></p>
<blockquote>
<p>从机默认也是可以写操作的，最好是关闭掉，从机增删改是不会同步到主机的</p>
</blockquote>
<blockquote>
<p>只能是从机同步主机的数据</p>
</blockquote>
<blockquote>
<p>先关闭防火墙</p>
</blockquote>
<p>第一步：修改<code>my.conf</code>文件</p>
<pre><code class="highlight plaintext">[mysqld]
#服务器唯一ID，一般取IP最后一段
server-id=135</code></pre>
<p>第二步：删除UUID文件</p>
<pre><code class="highlight plaintext">错误处理：
如果出现此错误：
Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work.


因为是mysql是克隆的系统所以mysql的uuid是一样的，所以需要修改。


解决方法：
删除/var/lib/mysql/auto.cnf文件，重新启动服务。</code></pre>
<p>第三步：重启 并 登录 到MySQL进行配置从服务器</p>
<ul>
<li><code>change master to</code>：改变主机信息</li>
<li><code>master_log_file</code>：二进制文件名</li>
<li><code>master_log_pos</code>：偏移量（填Position的值）</li>
</ul>
<pre><code class="highlight sql">mysql<span class="operator">&gt;</span>change master <span class="keyword">to</span> master_host<span class="operator">=</span><span class="string">&#x27;192.168.10.133&#x27;</span>,master_port<span class="operator">=</span><span class="number">3306</span>,master_user<span class="operator">=</span><span class="string">&#x27;root&#x27;</span>,master_password<span class="operator">=</span><span class="string">&#x27;root&#x27;</span>,master_log_file<span class="operator">=</span><span class="string">&#x27;mysql-bin.000001&#x27;</span>,master_log_pos<span class="operator">=</span><span class="number">120</span></code></pre>
<blockquote>
<p>注意语句中间不要断开，master_port为mysql服务器端口号(无引号)，master_user为执行同步操作的数据库账户，“120”无单引号(此处的120就是show master status 中看到的position的值，这里的mysql-bin.000001就是file对应的值)</p>
</blockquote>
<p>第四步：启动从服务器复制功能</p>
<pre><code class="highlight plaintext">mysql&gt;start slave;</code></pre>
<p>第五步：检查从服务器复制功能状态：</p>
<pre><code class="highlight plaintext">mysql&gt; show slave status</code></pre>
<pre><code class="highlight plaintext">……………………(省略部分)

Slave_IO_Running: Yes //此状态必须YES

Slave_SQL_Running: Yes //此状态必须YES

……………………(省略部分)
</code></pre>
<blockquote>
<p>Slave_IO及Slave_SQL进程必须正常运行，即YES状态，否则都是错误的状态(如：其中一个NO均属错误)</p>
</blockquote>
<p>第六步：设置只读</p>
<pre><code class="highlight sql"><span class="keyword">set</span> <span class="keyword">global</span> read_only<span class="operator">=</span><span class="number">1</span>;    #<span class="number">1</span>是只读，<span class="number">0</span>是读写

<span class="keyword">show</span> <span class="keyword">global</span> variables <span class="keyword">like</span> &quot;%read_only%&quot;;</code></pre>
<h3 id="读写分离"><a class="markdownIt-Anchor" href="#读写分离"></a> 读写分离</h3>
<p>HAC：High Availability Cluster 高可用集群</p>
<p>MySQL的主从复制，只会保证主机对外提供服务，而从机是不对外提供服务的，只是在后台为主机进行备份，所以可以用从机来<strong>只读</strong></p>
<p>要实现读写分离有两种办法：</p>
<ol>
<li>使用MySQL-Proxy</li>
<li>使用Mycat</li>
</ol>
<p><strong>MySQL-Proxy下载</strong></p>
<p><strong>MySQL-Proxy安装</strong></p>
<ul>
<li>
<p>准备一台机器作为MySQL Proxy</p>
</li>
<li>
<p>上传压缩包</p>
</li>
<li>
<p>解压缩</p>
</li>
</ul>
<pre><code class="highlight plaintext">tar -xf mysql-proxy-0.8.5-linux-el6-x86-64bit.tar.gz -C /kkb</code></pre>
<p><strong>MySQL-Proxy配置</strong></p>
<ul>
<li>创建mysql-proxy.cnf文件（放在MySQL-proxy根目录即可）</li>
</ul>
<pre><code class="highlight plaintext">[mysql-proxy]
user=root
admin-username=root			
admin-password=111	#代理机器的root密码
proxy-address=OSmysqlProxy:4040		#代理机器的ip,4040为MySQL-proxy默认端口
proxy-backend-addresses=OSmysqlMaster:3306	#主机的ip
proxy-read-only-backend-addresses=OSmysqlSlave:3306	#从机的ip
proxy-lua-script=/leeboer/mysql-proxy/share/doc/mysql-proxy/rw-splitting.lua	#这个地址要更改为MySQL-proxy目录的真实地址
log-file=/leeboer/mysql-proxy/logs/mysql-proxy.log	#自己更改日志文件的存储地址
log-level=debug		#日志级别
keepalive=true		#心跳检测
daemon=true		#后台守护</code></pre>
<ul>
<li>修改mysql-proxy.cnf文件的权限</li>
</ul>
<pre><code class="highlight plaintext">chmod g+w,o-r mysql-proxy.cnf</code></pre>
<ul>
<li>修改<code>vim /leeboer/mysql-proxy/share/doc/mysql-proxy/rw-splitting.lua</code>脚本
<ul>
<li>这两个参数为读写分离的条件</li>
<li>这个可改可不改，这里只为测试用，所以改小了</li>
</ul>
</li>
</ul>
<p><strong>MySQL-Proxy启动域测试</strong></p>
<p>启动命令</p>
<pre><code class="highlight plaintext">./mysql-proxy  --defaults-file=mysql-proxy.cnf配置文件的地址</code></pre>
<p>在其他客户端，通过mysql命令去连接MySQL Proxy机器</p>
<pre><code class="highlight plaintext">mysql -uroot -proot -h192.168.10.134 -P4040</code></pre>
<blockquote>
<p>代理服务器默认地址是4040</p>
</blockquote>
<h2 id="mycat分库分表"><a class="markdownIt-Anchor" href="#mycat分库分表"></a> MyCat（分库分表）</h2>
<p>其他的分布式数据库中间件还有：<code>sharding-jdbc，mycat，drds</code></p>
<h3 id="分库分表"><a class="markdownIt-Anchor" href="#分库分表"></a> 分库分表</h3>
<p>前提：当你们的数据库表数据特别大时，比如说上亿的记录，数据库本身的优化基本上无法解决性能问题了，根本原因是数据库本身的io读写到了一个瓶颈，这个时候，需要海量数据的存储和查询问题。此时我们需要利用分库分表的思想去进行数据库的架构优化。</p>
<p>随着微服务这种架构的兴起，我们应用从一个完整的大的应用，切分为很多可以独立提供服务的小应用。每个应用都有独立的数据库</p>
<p>数据的切分分为两种：</p>
<ul>
<li>
<p><strong>垂直切分</strong>：按照业务模块进行切分，将不同模块的表切分到不同的数据库中。<br />
*</p>
</li>
<li>
<p><strong>水平切分</strong>：将一张大表按照一定的切分规则，按照行切分到不同的表或者不同的库中。<br />
*</p>
</li>
</ul>
<h3 id="mycat"><a class="markdownIt-Anchor" href="#mycat"></a> MyCat</h3>
<p>官方网站：<a target="_blank" rel="noopener" href="http://www.mycat.org.cn/">http://www.mycat.org.cn/</a></p>
<p>简单的说，MyCAT就是：</p>
<ul>
<li>一个彻底开源的，面向企业应用开发的“大数据库集群”</li>
<li>支持事务、ACID、可以替代Mysql的加强版数据库</li>
<li>一个可以视为“Mysql”集群的企业级数据库，用来替代昂贵的Oracle集群</li>
<li>一个融合内存缓存技术、Nosql技术、HDFS大数据的新型SQL Server</li>
<li>结合传统数据库和新型分布式数据仓库的新一代企业级数据库产品</li>
<li>一个新颖的数据库中间件产品</li>
</ul>
<p>MyCAT的目标是：低成本的将现有的单机数据库和应用平滑迁移到“云”端，解决数据存储和业务规模迅速增长情况下的数据瓶颈问题。</p>
<p><strong>MyCAT的关键特性</strong></p>
<ul>
<li>支持 SQL 92标准</li>
<li>支持Mysql集群，可以作为Proxy使用</li>
<li>支持JDBC连接ORACLE、DB2、SQL Server，将其模拟为MySQL  Server使用</li>
<li>支持galera for mysql集群，percona-cluster或者mariadb cluster，提供高可用性数据分片集群</li>
<li>自动故障切换，高可用性</li>
<li>支持读写分离，支持Mysql双主多从，以及一主多从的模式</li>
<li>支持全局表，数据自动分片到多个节点，用于高效表关联查询</li>
<li>支持独有的基于E-R 关系的分片策略，实现了高效的表关联查询</li>
<li>多平台支持，部署和实施简单</li>
</ul>
<p><strong>MyCat架构</strong></p>
<p><strong>核心概念</strong></p>
<ul>
<li>
<p>Schema：由它指定逻辑数据库</p>
</li>
<li>
<p>Table： 逻辑表</p>
</li>
<li>
<p>DataNode：真正存储节点</p>
</li>
<li>
<p>DataHost：真正的数据库主机</p>
</li>
</ul>
<p>MyCAT使用Mysql的通讯协议模拟成了一个Mysql服务器，并建立了完整的<strong>Schema</strong>（数据库）、<strong>Table</strong> （数据表）、<strong>User</strong>(用户)的逻辑模型，并将这套逻辑模型映射到后端的存储节点<strong>DataNode</strong>（MySQL Instance）上的真实物理库中，这样一来，所有能使用Mysql的客户端以及编程语言都能将MyCAT当成是Mysql Server来使用，不必开发新的客户端协议</p>
<p><strong>mycat存在的问题</strong></p>
<p>跨库join问题(即多表关联查询)</p>
<ul>
<li>通过业务分析，将不同库的join查询拆分成多个select</li>
<li>建立全局表（每个库都有一个相同的表）</li>
<li>冗余字段（不符合数据库三范式）</li>
<li>E-R分片（将有关系的记录都存储到一个库中）</li>
<li>最多支持跨两张表跨库的join</li>
</ul>
<p>分布式事务（弱事务）</p>
<ul>
<li>强一致性事务（同步）</li>
<li>最终一致性事务（异步思想）</li>
</ul>
<p>分布式主键（即水平切分多库主键生成问题）</p>
<ul>
<li><u>redis incr命令</u></li>
<li>数据库（生成主键）</li>
<li>UUID</li>
<li><u>snowflake算法（分布式主键算法）</u></li>
</ul>
<p><strong>Mycat解决的问题</strong></p>
<ul>
<li>海量数据存储</li>
<li>查询优化</li>
</ul>
<p><strong>MyCat对多数据库的支持</strong></p>
<h3 id="分片策略"><a class="markdownIt-Anchor" href="#分片策略"></a> 分片策略</h3>
<p>MyCAT支持水平分片与垂直分片：</p>
<ul>
<li>水平分片：一个表格的数据分割到多个节点上，按照行分隔。</li>
<li>垂直分片：一个数据库中多个表格A，B，C，A存储到节点1上，B存储到节点2上，C存储到节点3上</li>
</ul>
<p>MyCAT通过定义表的分片规则来实现分片，每个表格可以捆绑一个分片规则，每个分片规则指定一个分片字段并绑定一个函数，来实现动态分片算法。</p>
<ol>
<li><strong>Schema</strong>：逻辑库，与MySQL中的Database（数据库）对应，一个逻辑库中定义了所包括的Table。</li>
<li><strong>Table</strong>：表，即物理数据库中存储的某一张表，与传统数据库不同，这里的表格需要声明其所存储的逻辑数据节点DataNode。在此可以指定表的分片规则。</li>
<li><strong>DataNode</strong>：MyCAT的逻辑数据节点，是存放table的具体物理节点，也称之为分片节点，通过DataSource来关联到后端某个具体数据库上</li>
<li><strong>DataSource</strong>：定义某个物理库的访问地址，用于捆绑到Datanode上</li>
</ol>
<h3 id="mycat下载安装"><a class="markdownIt-Anchor" href="#mycat下载安装"></a> MyCat下载安装</h3>
<p><strong>下载mycat</strong></p>
<p>github地址：<a target="_blank" rel="noopener" href="https://github.com/MyCATApache">https://github.com/MyCATApache</a></p>
<p><strong>Mycat安装</strong></p>
<p>安装rz上传文件工具</p>
<pre><code class="highlight plaintext">yum install -y lrzsz</code></pre>
<p>第一步：把MyCat的压缩包上传到linux服务器</p>
<p>第二步：解压缩，得到mycat目录</p>
<pre><code class="highlight plaintext">tar -zxvf Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz</code></pre>
<p>第三步：进入mycat/bin，启动MyCat</p>
<pre><code class="highlight plaintext">启动命令：./mycat start

停止命令：./mycat stop

重启命令：./mycat restart</code></pre>
<blockquote>
<p>注意：可以使用mysql的客户端直接连接mycat服务。<strong>默认服务端口为8066</strong></p>
</blockquote>
<h3 id="mycat分片"><a class="markdownIt-Anchor" href="#mycat分片"></a> MyCat分片</h3>
<p><strong>需求</strong></p>
<p>把商品表分片存储到三个数据节点上</p>
<p><strong>安装环境</strong></p>
<p>mysql节点1环境</p>
<ul>
<li>操作系统版本 : centos6.5</li>
<li>数据库版本 : mysql-5.6</li>
<li>mycat版本 ：1.6 release</li>
<li>数据库名 : db1、db2、db3</li>
<li>ip：192.168.10.133</li>
</ul>
<p>MyCat安装到节点192.168.10.134上（需要安装jdk）</p>
<h4 id="配置schemaxml"><a class="markdownIt-Anchor" href="#配置schemaxml"></a> 配置Schema.xml</h4>
<p><strong>Schema.xml介绍</strong></p>
<p>Schema.xml作为MyCat中重要的配置文件之一，<em>管理着MyCat的逻辑库、表、分片规则、DataNode以及DataSource</em>。弄懂这些配置，是正确使用MyCat的前提。这里就一层层对该文件进行解析。</p>
<p>schema 标签用于定义MyCat实例中的逻辑库</p>
<p>Table 标签定义了MyCat中的逻辑表</p>
<p>dataNode 标签定义了MyCat中的数据节点，也就是我们通常说所的数据分片。</p>
<p>dataHost标签在mycat逻辑库中也是作为最底层的标签存在，直接定义了具体的数据库实例、读写分离配置和心跳语句</p>
<blockquote>
<p>注意：若是LINUX版本的MYSQL，则需要设置为Mysql大小写不敏感，否则可能会发生表找不到的问题。</p>
</blockquote>
<pre><code class="highlight plaintext">在MySQL的配置文件中my.ini [mysqld] 中增加一行

ower_case_table_names = 1</code></pre>
<p><strong>Schema.xml配置</strong></p>
<pre><code class="highlight xml"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>
<span class="meta">&lt;!DOCTYPE <span class="keyword">mycat</span>:schema <span class="keyword">SYSTEM</span> <span class="string">&quot;schema.dtd&quot;</span>&gt;</span>
<span class="tag">&lt;<span class="name">mycat:schema</span> <span class="attr">xmlns:mycat</span>=<span class="string">&quot;http://org.opencloudb/&quot;</span>&gt;</span>
<span class="comment">&lt;!--schema name相当于数据库名--&gt;</span>
	<span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;TESTDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span>&gt;</span>
		<span class="comment">&lt;!-- auto sharding by id (long) --&gt;</span>
		<span class="comment">&lt;!-- </span>
<span class="comment">		name:定义表名</span>
<span class="comment">		dataNode:表示把该表分配到dn1/dn2/dn3三个节点上</span>
<span class="comment">		rule：表示切片规则,切片规则在rule.xml中配置--&gt;</span>
		<span class="tag">&lt;<span class="name">table</span> <span class="attr">name</span>=<span class="string">&quot;item&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn1,dn2,dn3&quot;</span> <span class="attr">rule</span>=<span class="string">&quot;auto-sharding-long&quot;</span> /&gt;</span>
		<span class="tag">&lt;<span class="name">table</span> <span class="attr">name</span>=<span class="string">&quot;TB_USER&quot;</span> <span class="attr">primaryKey</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">type</span>=<span class="string">&quot;global&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn1,dn2&quot;</span> /&gt;</span>
	<span class="tag">&lt;/<span class="name">schema</span>&gt;</span>
	<span class="comment">&lt;!-- </span>
<span class="comment">	配置节点在哪个主机dataHost上</span>
<span class="comment">	database:表示真正的数据库名</span>
<span class="comment">	--&gt;</span>
	<span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn1&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db1&quot;</span> /&gt;</span>
	<span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn2&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost2&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db2&quot;</span> /&gt;</span>
	<span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn3&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db3&quot;</span> /&gt;</span>
	<span class="comment">&lt;!--配置主机dataHost--&gt;</span>
	<span class="tag">&lt;<span class="name">dataHost</span> <span class="attr">name</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">maxCon</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">minCon</span>=<span class="string">&quot;10&quot;</span> <span class="attr">balance</span>=<span class="string">&quot;0&quot;</span></span>
<span class="tag">		<span class="attr">writeType</span>=<span class="string">&quot;0&quot;</span> <span class="attr">dbType</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">dbDriver</span>=<span class="string">&quot;native&quot;</span> <span class="attr">switchType</span>=<span class="string">&quot;1&quot;</span>  <span class="attr">slaveThreshold</span>=<span class="string">&quot;100&quot;</span>&gt;</span>
		<span class="comment">&lt;!--心跳检测语法--&gt;</span>
		<span class="tag">&lt;<span class="name">heartbeat</span>&gt;</span>select user()<span class="tag">&lt;/<span class="name">heartbeat</span>&gt;</span>
		
		<span class="comment">&lt;!-- can have multi write hosts --&gt;</span>
		<span class="comment">&lt;!-- 读写分离的配置方法 --&gt;</span>
		<span class="tag">&lt;<span class="name">writeHost</span> <span class="attr">host</span>=<span class="string">&quot;hostM1&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.25.134:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span>
<span class="tag">			<span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span>
			<span class="comment">&lt;!-- can have multi read hosts --&gt;</span>
			<span class="tag">&lt;<span class="name">readHost</span> <span class="attr">host</span>=<span class="string">&quot;hostS2&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.1.200:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span> <span class="attr">password</span>=<span class="string">&quot;xxx&quot;</span>/&gt;</span>
		<span class="tag">&lt;/<span class="name">writeHost</span>&gt;</span>

		<span class="comment">&lt;!-- 普通分片配置方法 --&gt;</span>
		<span class="comment">&lt;!--mycat真正要连的数据库--&gt;</span>
		<span class="tag">&lt;<span class="name">writeHost</span> <span class="attr">host</span>=<span class="string">&quot;hostM1&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.10.133:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span>
<span class="tag">			<span class="attr">password</span>=<span class="string">&quot;root&quot;</span>/&gt;</span>
	<span class="tag">&lt;/<span class="name">dataHost</span>&gt;</span>
	<span class="tag">&lt;<span class="name">dataHost</span> <span class="attr">name</span>=<span class="string">&quot;localhost2&quot;</span> <span class="attr">maxCon</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">minCon</span>=<span class="string">&quot;10&quot;</span> <span class="attr">balance</span>=<span class="string">&quot;0&quot;</span></span>
<span class="tag">		<span class="attr">writeType</span>=<span class="string">&quot;0&quot;</span> <span class="attr">dbType</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">dbDriver</span>=<span class="string">&quot;native&quot;</span> <span class="attr">switchType</span>=<span class="string">&quot;1&quot;</span>  <span class="attr">slaveThreshold</span>=<span class="string">&quot;100&quot;</span>&gt;</span>
		<span class="tag">&lt;<span class="name">heartbeat</span>&gt;</span>select user()<span class="tag">&lt;/<span class="name">heartbeat</span>&gt;</span>
		<span class="comment">&lt;!-- can have multi write hosts --&gt;</span>
		<span class="tag">&lt;<span class="name">writeHost</span> <span class="attr">host</span>=<span class="string">&quot;hostM1&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.25.166:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span>
<span class="tag">			<span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span>
			<span class="comment">&lt;!-- can have multi read hosts --&gt;</span>
		<span class="tag">&lt;/<span class="name">writeHost</span>&gt;</span>
	<span class="tag">&lt;/<span class="name">dataHost</span>&gt;</span>
<span class="tag">&lt;/<span class="name">mycat:schema</span>&gt;</span></code></pre>
<h4 id="配置serverxml"><a class="markdownIt-Anchor" href="#配置serverxml"></a> 配置Server.xml</h4>
<p><strong>Server.xml配置</strong></p>
<p>server.xml几乎保存了所有mycat需要的系统配置信息。最常用的是在此配置用户名、密码及权限。</p>
<ul>
<li>指定别人连接mycat用的用户名和密码</li>
<li>schemas：需要和schema.xml中的schema name一致</li>
</ul>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;root&quot;</span>&gt;</span>
    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;schemas&quot;</span>&gt;</span>TESTDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;readOnly&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;/<span class="name">user</span>&gt;</span>
</code></pre>
<h4 id="配置rulexml"><a class="markdownIt-Anchor" href="#配置rulexml"></a> 配置rule.xml</h4>
<p><strong>rule.xml配置</strong></p>
<p>rule.xml里面就定义了我们对表进行拆分所涉及到的规则定义。我们可以灵活的对表使用不同的分片算法，或者对表使用相同的算法但具体的参数不同。这个文件里面主要有tableRule和function这两个标签。在具体使用过程中可以按照需求添加tableRule和function。</p>
<p><u>此配置文件可以不用修改，使用默认即可</u>。</p>
<blockquote>
<p>最好保证规则里的columns中的字段名和数据库主键的字段名一致</p>
</blockquote>
<h4 id="测试分片"><a class="markdownIt-Anchor" href="#测试分片"></a> 测试分片</h4>
<p><strong>测试分片</strong></p>
<p>配置完毕后，重新启动mycat。使用mysql客户端连接mycat，创建表</p>
<pre><code class="highlight sql"><span class="comment">-- ----------------------------</span>
<span class="comment">-- Table structure for tb_item</span>
<span class="comment">-- ----------------------------</span>
<span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `tb_item`;
<span class="keyword">CREATE TABLE</span> `tb_item` (
  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;商品id，同时也是商品编号&#x27;</span>,
  `title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;商品标题&#x27;</span>,
  `sell_point` <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品卖点&#x27;</span>,
  `price` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;商品价格，单位为：分&#x27;</span>,
  `num` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;库存数量&#x27;</span>,
  `barcode` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品条形码&#x27;</span>,
  `image` <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;商品图片&#x27;</span>,
  `cid` <span class="type">bigint</span>(<span class="number">10</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;所属类目，叶子类目&#x27;</span>,
  `status` tinyint(<span class="number">4</span>) <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;商品状态，1-正常，2-下架，3-删除&#x27;</span>,
  `created` datetime <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,
  `updated` datetime <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,
  <span class="keyword">PRIMARY KEY</span> (`id`),
  KEY `cid` (`cid`),
  KEY `status` (`status`),
  KEY `updated` (`updated`)
) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;商品表&#x27;</span>;

<span class="comment">-- ----------------------------</span>
<span class="comment">-- Table structure for tb_user</span>
<span class="comment">-- ----------------------------</span>
<span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `tb_user`;
<span class="keyword">CREATE TABLE</span> `tb_user` (
  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT,
  `username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,
  `password` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;密码，加密存储&#x27;</span>,
  `phone` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;注册手机号&#x27;</span>,
  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;注册邮箱&#x27;</span>,
  `created` datetime <span class="keyword">NOT NULL</span>,
  `updated` datetime <span class="keyword">NOT NULL</span>,
  <span class="keyword">PRIMARY KEY</span> (`id`),
  <span class="keyword">UNIQUE</span> KEY `username` (`username`) <span class="keyword">USING</span> BTREE,
  <span class="keyword">UNIQUE</span> KEY `phone` (`phone`) <span class="keyword">USING</span> BTREE,
  <span class="keyword">UNIQUE</span> KEY `email` (`email`) <span class="keyword">USING</span> BTREE
) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">37</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;用户表&#x27;</span>;</code></pre>
<p>插入数据</p>
<pre><code class="highlight sql"><span class="comment">/*</span>
<span class="comment">Navicat MySQL Data Transfer</span>
<span class="comment"></span>
<span class="comment">Source Server         : localhost_3306</span>
<span class="comment">Source Server Version : 50521</span>
<span class="comment">Source Host           : localhost:3306</span>
<span class="comment">Source Database       : taotao</span>
<span class="comment"></span>
<span class="comment">Target Server Type    : MYSQL</span>
<span class="comment">Target Server Version : 50521</span>
<span class="comment">File Encoding         : 65001</span>
<span class="comment"></span>
<span class="comment">Date: 2015-12-20 15:56:27</span>
<span class="comment">*/</span>


<span class="comment">-- ----------------------------</span>
<span class="comment">-- Records of tb_item</span>
<span class="comment">-- ----------------------------</span>
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;536563&#x27;</span>, <span class="string">&#x27;new2 - 阿尔卡特 (OT-927) 炭黑 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;清仓！仅北京，武汉仓有货！&#x27;</span>, <span class="string">&#x27;29900000&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;http://image.taotao.com/jd/4ef8861cf6854de9889f3db9b24dc371.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>, <span class="string">&#x27;2015-04-11 20:38:38&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;562379&#x27;</span>, <span class="string">&#x27;new8- 三星 W999 黑色 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;下单送12000毫安移动电源！双3.5英寸魔焕炫屏，以非凡视野纵观天下时局，尊崇翻盖设计，张弛中，尽显从容气度！&#x27;</span>, <span class="string">&#x27;1100&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;http://image.taotao.com/jd/d2ac340e728d4c6181e763e772a9944a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>, <span class="string">&#x27;2015-04-12 17:10:43&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;605616&#x27;</span>, <span class="string">&#x27;阿尔卡特 (OT-979) 冰川白 联通3G手机&#x27;</span>, <span class="string">&#x27;清仓！仅上海仓有货！&#x27;</span>, <span class="string">&#x27;30900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/a69d0d09a1a04164969c2d0369659b1a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;635906&#x27;</span>, <span class="string">&#x27;阿尔卡特 (OT-927) 单电版 炭黑 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;清仓！仅北京，武汉仓有货！&#x27;</span>, <span class="string">&#x27;24900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/9c1fcdf2bf20450788195c707da00a87.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;679532&#x27;</span>, <span class="string">&#x27;阿尔卡特 (OT-986+) 玫红 AK47 加强版 联通3G手机&#x27;</span>, <span class="string">&#x27;仅上海，广州，沈阳仓有货！预购从速！&#x27;</span>, <span class="string">&#x27;49900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/65e2007d41dc4e3cb308833a1a910f8d.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:32:31&#x27;</span>, <span class="string">&#x27;2015-03-08 21:32:31&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;679533&#x27;</span>, <span class="string">&#x27;阿尔卡特 (OT-986+) 曜石黑 AK47 加强版 联通3G手机&#x27;</span>, <span class="string">&#x27;少量库存，抢完即止！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/bxYeI1346g.html?erpad_source=erpad\&quot;&gt;“领券更优惠！”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;49900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/b3251c85da8e4302b7389f3371dd0a68.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:36&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:36&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;691300&#x27;</span>, <span class="string">&#x27;三星 B9120 钛灰色 联通3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;下单即送10400毫安移动电源！再赠手机魔法盒！&#x27;</span>, <span class="string">&#x27;439900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/c1775819c7e44b1c903f27514e70b998.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:27&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:27&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;738388&#x27;</span>, <span class="string">&#x27;三星 Note II (N7100) 云石白 联通3G手机&#x27;</span>, <span class="string">&#x27;经典回顾！超值价格值得拥有。&#x27;</span>, <span class="string">&#x27;169900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/089b79cbe19f454dab24cce65f2e9602.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;741524&#x27;</span>, <span class="string">&#x27;三星 Note II (N7100) 钛金灰 联通3G手机&#x27;</span>, <span class="string">&#x27;下单赠12000毫安移动电源&#x27;</span>, <span class="string">&#x27;169900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/29e1b92dc7e146489ce46a2262479a0f.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;816448&#x27;</span>, <span class="string">&#x27;三星 Note II (N7100) 钻石粉 联通3G手机&#x27;</span>, <span class="string">&#x27;经典回顾！超值特惠！&#x27;</span>, <span class="string">&#x27;169900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/5a45e88aeca046ec88d7b7ffbc47092a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;816753&#x27;</span>, <span class="string">&#x27;夏普（SHARP）LCD-46DS40A 46英寸 日本原装液晶面板 智能全高清液晶电视&#x27;</span>, <span class="string">&#x27;要好屏，选夏普！日本原装面板，智能电视，高画质高音质！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://item.jd.com/1278686.html\&quot;&gt;还有升级版安卓智能新机46DS52供您选择！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;379900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/2e45ff47f2e7424cb6d95fb9f05151bd.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;830972&#x27;</span>, <span class="string">&#x27;飞利浦 老人手机 (X2560) 深情蓝 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;赠：九安血压计+8G内存！超长待机，关爱无限，更好用！飞利浦简单健康老人手机！外观圆滑，手感极佳！&#x27;</span>, <span class="string">&#x27;48900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/4f1d41baa6c84219a622f20a4f1c32bb.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;832739&#x27;</span>, <span class="string">&#x27;中兴 U288 珠光白 移动3G手机&#x27;</span>, <span class="string">&#x27;好评过万！超大彩屏，超大字体，超大按键，超大音量，一键SOS紧急呼叫 ！&#x27;</span>, <span class="string">&#x27;19900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/4021f8a1ffcc4ae2a313c2012d9f35c8.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;844022&#x27;</span>, <span class="string">&#x27;三星 SCH-W899 亮金色 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;双3.3英寸魔焕炫屏，CG双网双待，臻尊体验，心系天下！&#x27;</span>, <span class="string">&#x27;299900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/e638243d8341474293be09ad157546b8.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;847276&#x27;</span>, <span class="string">&#x27;飞利浦 老人手机 (X2560) 喜庆红 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超长待机，关爱无限，更好用！飞利浦简单健康老人手机！外观圆滑，手感极佳！&#x27;</span>, <span class="string">&#x27;48900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/657c61e5018043f89d9fe0f9a1519884.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;847278&#x27;</span>, <span class="string">&#x27;飞利浦 老人手机 (X2560) 硬朗黑 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超长待机，关爱无限，更好用！飞利浦简单健康老人手机！外观圆滑，手感极佳！&#x27;</span>, <span class="string">&#x27;46900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/306b2287ce1c4b3bb541f37984d67929.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;855739&#x27;</span>, <span class="string">&#x27;三星 Galaxy S4 (I9500)16G版 皓月白 联通3G手机&#x27;</span>, <span class="string">&#x27;三星经典旗舰机！5英寸1080P高清屏+1300万像素主摄像头！&#x27;</span>, <span class="string">&#x27;188800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/c687f304b5164b1b84736b9a4d34a37c.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;856645&#x27;</span>, <span class="string">&#x27;三星 Galaxy S4 (I9500) 16G版 星空黑 联通3G手机&#x27;</span>, <span class="string">&#x27;年货特价来袭！三星经典旗舰机！&#x27;</span>, <span class="string">&#x27;188800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/2cd67c806e054435bce4c931a731493a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;858025&#x27;</span>, <span class="string">&#x27;三星 I8552 白色 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;经济实惠机器~~开春入手好时机~&#x27;</span>, <span class="string">&#x27;79900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/d958a21cec814fdeab934d43b4fb2e06.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;860275&#x27;</span>, <span class="string">&#x27;长虹（CHANGHONG） 3D51C1080i 51英寸 快门式3D智能Android 电视（黑色）&#x27;</span>, <span class="string">&#x27;智能安卓系统 可自由安装应用程序 &lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/Kt0aHzbU7uR1M.html\&quot;&gt;“点击进入长虹新年专场”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;269900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/08dabc37342943ffb717632f9ee40685.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;868462&#x27;</span>, <span class="string">&#x27;LG 47LA6800-CA 47英寸 全高清智能3D液晶电视 （红色）&#x27;</span>, <span class="string">&#x27;【疯狂清仓】无边框硬屏，不闪式3D技术，动感应遥控器，“船”型底座设计！仅北京、沈阳、深圳有货！&#x27;</span>, <span class="string">&#x27;999900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/914ba6a287044e0d897a6cded583c8ac.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:12&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:12&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;875722&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 1050 (RM-908) 黑色 移动联通2G手机&#x27;</span>, <span class="string">&#x27;经典神器，简单实用,超长待机，更多色彩！&#x27;</span>, <span class="string">&#x27;14900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/902958f543874a4caed08045c96dcf30.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;875724&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 1050 (RM-908) 蓝色 移动联通2G手机&#x27;</span>, <span class="string">&#x27;经典神器，简单实用,超长待机，更多色彩！&#x27;</span>, <span class="string">&#x27;14900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/625735ae97524f77bc9e0ab39e0d2a2b.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;883893&#x27;</span>, <span class="string">&#x27;联想 MA388 老人手机 星夜黑 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;孝敬爸妈首选，好评超22000条，大按键 大喇叭 大翻盖，配置1900mAh大容量电池，带来超长续航体验！&#x27;</span>, <span class="string">&#x27;28700&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/ee56ceae4466431cb5c1bed035203a4b.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;907012&#x27;</span>, <span class="string">&#x27;海信（Hisense）LED42EC260JD 42英寸 窄边网络 LED电视（黑色）&#x27;</span>, <span class="string">&#x27;&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/YykdEtrMRaSsT.html\&quot;&gt;“春宵一刻值千金”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;229900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/38406d85be2e4e3eb81b934df63e5ced.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;909245&#x27;</span>, <span class="string">&#x27;酷派 8076D 咖啡棕 移动3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.0英寸屏幕，双核处理器！移动用户无需换号，直接尊享3G网络！&#x27;</span>, <span class="string">&#x27;19900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/a1df8eaa64774b498a2ba9457fd60190.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:19&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:19&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;912107&#x27;</span>, <span class="string">&#x27;创维(Skyworth)LED 42E5DHR 42英寸 海量影视资源智能网络平板液晶电视二代升级版(黑色)&#x27;</span>, <span class="string">&#x27;二代新品！！智能双系统，正版影视随心看，丰富安卓应用，多屏互动！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://jmall.jd.com/p117514.html\&quot;&gt;“猛戳这里，更多惊喜”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;249900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/ff78fea47d20439a8e2bb837caed7384.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;915676&#x27;</span>, <span class="string">&#x27;联想 P780 极速版 深邃黑 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;待机王，5吋HD高清炫屏，9.9mm锐薄机身，背壳全金属材质，独创智恒省电技术！&#x27;</span>, <span class="string">&#x27;69900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/8886d8cac9204d34beee17de09a94124.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;917460&#x27;</span>, <span class="string">&#x27;华为 P6 (P6-C00) 黑 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;经典旗舰！雅然天成纤薄之美，强悍四核，前置500万美颜自拍,，2GB RAM+16GB ROM大内存！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/0akd8u5vomz.html\&quot;&gt;【买卡上京东，省钱又轻松】点击有惊喜！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;128800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/e6fa8fe64cad49ff93fe0af67ac52055.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;917461&#x27;</span>, <span class="string">&#x27;华为 P6 (P6-C00) 白 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;经典旗舰，万人好评！强悍四核，前置500万美颜自拍,，2GB RAM+16GB ROM大内存！&#x27;</span>, <span class="string">&#x27;129900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/a898d6b93e124a6bb26d58254a112250.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;917770&#x27;</span>, <span class="string">&#x27;华为 P6-C00 电信3G手机（粉色） CDMA2000/GSM 双模双待双通&#x27;</span>, <span class="string">&#x27;情人节神器！粉色机身，女神必备！数量有限前置500万美颜自拍，后置800万，非常适合喜欢拍照的你！&#x27;</span>, <span class="string">&#x27;134900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/ced8afd1b8d64134aa211aceb85fb3c5.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;919669&#x27;</span>, <span class="string">&#x27;华为 Ascend P6 (P6-T00) 黑色 移动3G手机&#x27;</span>, <span class="string">&#x27;限时特价！好评过万条优秀产品！浑然天成纤薄机身，前置500w摄像头，2GB RAM,1.5GHz四核cpu！ &lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/ZovfiDKYagBQJ.html\&quot;&gt;更多推荐请点击！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;128900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/a4585c63d2de4c22b7fab8e57bfb4b63.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;925237&#x27;</span>, <span class="string">&#x27;三星 Galaxy S4 (I9502) 16G版 蓝色 联通3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;三星经典旗舰机！5英寸1080P高清屏+双四核分时CUP+2GB RAM+1300万像素主摄像头&#x27;</span>, <span class="string">&#x27;189900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/c2b4eb2e623a415091a0e1fafac80aad.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;927779&#x27;</span>, <span class="string">&#x27;海尔统帅（Leader）LE39MUF5 39英寸 MHL传屏 LED平板电视（黑色）&#x27;</span>, <span class="string">&#x27;好评率96%！MHL传屏，内附价值99元的MHL传屏线哦~独家免费带货安装调试一步到位！&#x27;</span>, <span class="string">&#x27;199900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/dc3bb2ceefed4eb48bef05226005e7a6.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:12&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:12&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;929734&#x27;</span>, <span class="string">&#x27;三星 I8558 白色 移动3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.7英寸屏，四核，500万像素！移动用户无需换号，直接享3G网络！&#x27;</span>, <span class="string">&#x27;75900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/13bb5a74d03642a3a043a8ec33baa6e6.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;931849&#x27;</span>, <span class="string">&#x27;飞利浦 (X1560) 黑色+香槟色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;畅销！智能机的好伴侣，可以充电的手机！最长可达100天！键盘金属工艺，移动电源功能！&#x27;</span>, <span class="string">&#x27;36900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/691c77d0ed13417da7cf59b8bd1e3bab.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;936920&#x27;</span>, <span class="string">&#x27;夏普（SHARP）LCD-52DS70A 52英寸 日本原装液晶面板 3D Android操作系统智能液晶电视&#x27;</span>, <span class="string">&#x27;安卓体感3D超强机！日本原装液晶屏 安卓智能 体感遥控器 智能语音 无线上网！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://item.jd.com/1134535.html\&quot;&gt;还有外观炫酷的50英寸50DS60供您选择！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;699900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/c3ada90aec234ac9bc2589fbd40c9918.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:00&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:00&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;941189&#x27;</span>, <span class="string">&#x27;TCL L32F3301B 32英寸 窄边蓝光USB播放LED电视(黑色）&#x27;</span>, <span class="string">&#x27;【0元献礼】好评过万，销量传奇！经典蓝光电视，独有自然光技术专利，过大年带最好的回家！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/6MqRytIYKfn.html\&quot;&gt;【0元白条试用，1001个拜年计划】&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;139800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/cda1219a38504f798b0413816d785d08.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;951305&#x27;</span>, <span class="string">&#x27;三星 Galaxy S4 (I9502) 16G版 粉色 联通3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;三星经典旗舰机！5英寸1080P高清屏+双四核分时CUP+2GB RAM+1300万像素主摄像头&#x27;</span>, <span class="string">&#x27;179900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/11146d519c4c4f1bbc3f2e8fd0d5beaf.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;960138&#x27;</span>, <span class="string">&#x27;三星 I8558 灰色 移动3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.7英寸屏，四核，500万像素！移动用户无需换号，直接享3G网络!&#x27;</span>, <span class="string">&#x27;75900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/8f3550c928d64484accf4c74d606a93e.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;967021&#x27;</span>, <span class="string">&#x27;TCL 老人手机 (i310) 暗夜黑 移动联通2G手机&#x27;</span>, <span class="string">&#x27;爸妈满意才最好，大字体，大按键，大声音，简单易用的老人手机！&#x27;</span>, <span class="string">&#x27;19900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/67eb54bcdbc949ecaa32cbd725a223b6.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968097&#x27;</span>, <span class="string">&#x27;长虹（CHANGHONG） LED32C2JDi 32英寸 安卓智能LED液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;智能安卓系统！内置WiFi!遥控器一键直达京东！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/Kt0aHzbU7uR1M.html\&quot;&gt;“点击进入长虹新年专场”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;149900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/7d2563f664a54aaf8e7fe0b7af52a118.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968184&#x27;</span>, <span class="string">&#x27;索尼(SONY) Xperia Z1 (L39h) 黑色 联通3G手机&#x27;</span>, <span class="string">&#x27;特价抢购！骁龙800四核CPU，2070万像素G镜头，特丽魅彩显像技术，IP55/IP58精密防尘、防水！&#x27;</span>, <span class="string">&#x27;193800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/368d56e845074ed1803cfcfa8751cc4f.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968185&#x27;</span>, <span class="string">&#x27;索尼(SONY) Xperia Z1 (L39h) 白色 联通3G手机&#x27;</span>, <span class="string">&#x27;特价抢购！骁龙800四核CPU，2070万像素G镜头，特丽魅彩显像技术，IP55/IP58精密防尘、防水！&#x27;</span>, <span class="string">&#x27;193800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/7668edd983f1486ab87eee9c471f82cc.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:54&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968188&#x27;</span>, <span class="string">&#x27;索尼(SONY) Xperia Z1 (L39h) 紫色 联通3G手机&#x27;</span>, <span class="string">&#x27;特价抢购！骁龙800四核CPU，2070万像素G镜头，特丽魅彩显像技术，IP55/IP58精密防尘、防水！&#x27;</span>, <span class="string">&#x27;192800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/6a03dd6a019c4f4ea897ab7050955b17.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968189&#x27;</span>, <span class="string">&#x27;索尼(SONY) Xperia Z Ultra (XL39h) 黑色 联通3G手机&#x27;</span>, <span class="string">&#x27;手机看视频首选跨界神器，巨屏+四核强芯，超薄防水机身！我的世界又大又轻巧！&#x27;</span>, <span class="string">&#x27;169800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/b525167a86c944fe9dbdacb07f0e86df.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;968191&#x27;</span>, <span class="string">&#x27;索尼(SONY) Xperia Z Ultra (XL39h) 紫色 联通3G手机&#x27;</span>, <span class="string">&#x27;清仓！手机看视频首选跨界神器，巨屏+四核强芯，超薄防水机身！我的世界又大又轻巧！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/VQgfU7HPk5jAD.html\&quot;&gt;更多选择！请点击》&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;177800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/e93eac74e90a49098266078c23136459.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:50&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:50&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;971047&#x27;</span>, <span class="string">&#x27;联想 S820e 红色 电信3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.7英寸1280*720高清大屏，四核强劲处理器，800万+160万摄像头，尽显时尚气质！&#x27;</span>, <span class="string">&#x27;49800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/746ac093280c4e9ea200a63e81df435a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;971050&#x27;</span>, <span class="string">&#x27;联想 S820e 白色 电信3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.7英寸1280*720高清大屏，四核强劲处理器，800万主摄像头，丝绒质感涂层机身！&#x27;</span>, <span class="string">&#x27;49800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/89a67b97915e4e93b14b201e360fe105.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;972627&#x27;</span>, <span class="string">&#x27;金立 商务翻盖 (A809) 绅士黑 联通移动2G手机 双卡双待单通&#x27;</span>, <span class="string">&#x27;时尚翻盖，精美工艺品质~&#x27;</span>, <span class="string">&#x27;59900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/73c7b6eee30a459583c5cf107c2f829b.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;973267&#x27;</span>, <span class="string">&#x27;优快（U&amp;K） U97 四防对讲手机&#x27;</span>, <span class="string">&#x27;返100元！四防手机对讲，企业通讯必备；电信天翼、深度定制、一键通全国！&#x27;</span>, <span class="string">&#x27;198000&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/82cdd90503aa4dabb2bb4e5984d6d8b4.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;973825&#x27;</span>, <span class="string">&#x27;飞利浦 (X5500) 奢华黑 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超长待机！手写键盘双输入，硬朗金属设计，专属私人电台，双卡双待，奢华品质！&#x27;</span>, <span class="string">&#x27;79900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/26e4ddc64000497dbc15be0da4aab5bc.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;973862&#x27;</span>, <span class="string">&#x27;三星 Galaxy Note3 (N9009) 16G版 炫酷黑 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;京东给您发年终奖~下单即送10400毫安移动电源！&#x27;</span>, <span class="string">&#x27;309900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/c4a2e255bc954125a5d83283320a9c85.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;974401&#x27;</span>, <span class="string">&#x27;苹果(Apple) iPhone 5s (A1533) 16GB 银色 电信3G手机&#x27;</span>, <span class="string">&#x27;A7芯片，首开64位智能手机先河，Touch ID指纹识别功能！货源在途，放心订购！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/IvM8aG1BdW5.html\&quot;&gt;电信苹果专场！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;409900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/35c54c88f6f147aa88e788042b70e7c4.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;975023&#x27;</span>, <span class="string">&#x27;三星 Galaxy Note 3 (N9002) 简约白 联通3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;5.7英寸高清屏 带S Pen功能 手写编辑快速简单 支持多窗口多任务&#x27;</span>, <span class="string">&#x27;279900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/41e9ad9c568a4dbc92b545e88788451f.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;975024&#x27;</span>, <span class="string">&#x27;三星 Galaxy Note 3 (N9002) 炫酷黑 联通3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;5.7英寸高清屏 带S Pen功能 手写编辑快速简单 支持多窗口多任务&#x27;</span>, <span class="string">&#x27;279900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/e6b313f1ded44b0a9ab217cc6faf382d.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:49&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;975101&#x27;</span>, <span class="string">&#x27;长虹（CHANGHONG） LED42C2JDi 42英寸 安卓智能LED液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;京东独家，操作简单，一键直达京东，海量影视！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/Kt0aHzbU7uR1M.html\&quot;&gt;“点击进入长虹新年专场”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;239900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/3471d33f448340c0aa5d5a11e7f0d068.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:35&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;975641&#x27;</span>, <span class="string">&#x27;苹果(Apple) iPhone 5s (A1533) 16GB 金色 电信3G手机&#x27;</span>, <span class="string">&#x27;特价抢购！A7芯片，64位智能手机，Touch ID指纹识别功能！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/IvM8aG1BdW5.html\&quot;&gt;电信苹果专场！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;409900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/images/6e844025-47df-4b0e-b7f3-8aea1dca24a2.jpg,http://image.taotao.com/images/82df85b6-f7ce-4ad0-88c5-45848c60c1f8.jpg,http://image.taotao.com/images/3b5ce7d0-49f7-4dcb-a934-0112f91c573d.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:42&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;976898&#x27;</span>, <span class="string">&#x27;苹果 iPhone 4S 8G 白色 联通3G手机&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;199900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/12241d5b7c044fccbc88ee6c191fd949.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>, <span class="string">&#x27;2015-03-08 21:33:18&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;979072&#x27;</span>, <span class="string">&#x27;康佳（KONKA） LED42J39AW 42英寸 超薄安卓智能液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;【洋洋得意抢神机】 超薄安卓智能,海量视频应用，任你拓展！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/IrXe3ywoUE.html\&quot;&gt;【机不可失！49英寸巨屏4K智能仅2999！】&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;259800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/527275cba3684863b6621ad33df97948.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:08&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:08&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;979281&#x27;</span>, <span class="string">&#x27;三星 W789 奢华金 电信3G手机 双卡双待双通&#x27;</span>, <span class="string">&#x27;下单送12000毫安移动电源！时尚翻盖设计，双3.3英寸触屏，四核处理器，双网双待，张弛自若，双赢人生！&#x27;</span>, <span class="string">&#x27;299900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/ebe230a9e4ff47caa32243cc5c80088a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;981123&#x27;</span>, <span class="string">&#x27;联想 A516 荧光粉 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;9.9毫米轻薄机身！为女生量身打造！&#x27;</span>, <span class="string">&#x27;39900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/1166c37afdf24439a1465da589d20a4b.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;981821&#x27;</span>, <span class="string">&#x27;苹果(Apple) iPhone 4s 8GB 白色 联通3G手机&#x27;</span>, <span class="string">&#x27;iPhone中的经典，值得拥有！支持联通3G、移动/联通2G 系统版本随机&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/1bPmvZ3nVf.html\&quot;&gt;先领券，后下单，苹果4s专享东券万张齐发&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;199900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/13a8213124d4489aa411bca04ec3e68f.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;981822&#x27;</span>, <span class="string">&#x27;苹果(Apple) iPhone 4s 8GB 黑色 联通3G手机&#x27;</span>, <span class="string">&#x27;iPhone中的经典，值得拥有！支持联通3G、移动/联通2G 系统版本随机&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/1bPmvZ3nVf.html\&quot;&gt;先领券，后下单，苹果4s专享东券万张齐发&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;199900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/cb465f68fb9844cbb62cce45837848ba.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;983248&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 107 (RM-961) 红色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超值特价！诺记品质，辉煌延续！支持手电筒功能，包装内含原装耳机！&#x27;</span>, <span class="string">&#x27;16800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/2ff73a5b4c534c1aaf392c81b4e823af.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;983252&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 107 (RM-961) 白色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超值特价！诺记品质，辉煌延续！支持手电筒功能，包装内含原装耳机！&#x27;</span>, <span class="string">&#x27;16800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/b462a185f262461e8037c9418b39193a.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:44&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;983253&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 107 (RM-961) 黑色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;超值特价！诺记品质，辉煌延续！支持手电筒功能，包装内含原装耳机！&#x27;</span>, <span class="string">&#x27;16800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/76c67dd46faa4ccd9db8540cae48e3b3.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;983521&#x27;</span>, <span class="string">&#x27;联想 VIBE X (S960)铂雅银 联通3G手机&#x27;</span>, <span class="string">&#x27;5吋FHD炫丽高清大屏，超薄机身，1300万超强拍照配置！&#x27;</span>, <span class="string">&#x27;69900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/b47d242135dc471a8c699cf26114e691.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:01&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;985058&#x27;</span>, <span class="string">&#x27;派信（PISIN） WO1 NanoSmart 智能手表手机（蓝色）&#x27;</span>, <span class="string">&#x27;京东自营，新款可插SIM卡智能手表，原装LG屏，雅马哈解码芯片、4G内存、支持和安卓、IOS手机配对！&#x27;</span>, <span class="string">&#x27;35000&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/bbde56f5ccaf489eb24e1760a4b22756.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:27&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:27&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;985059&#x27;</span>, <span class="string">&#x27;派信（PISIN） WO1 NanoSmart 智能手表手机（红色）&#x27;</span>, <span class="string">&#x27;京东自营，新款可插SIM卡智能手表，原装LG屏，雅马哈解码芯片、4G内存、支持和安卓、IOS手机配对！&#x27;</span>, <span class="string">&#x27;35000&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/22ae33eb4dd24f0bb0c8f467367647d6.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:27&#x27;</span>, <span class="string">&#x27;2015-03-08 21:31:27&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;988634&#x27;</span>, <span class="string">&#x27;长虹（CHANGHONG）LED39C2080i 39英寸智能安卓LED液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;无线WiFi,强劲机芯，海量应用!&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/Kt0aHzbU7uR1M.html\&quot;&gt;“点击进入长虹新年专场”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;199900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/3c3f9a9346294ab280f26b8b9a6e5cc2.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;988753&#x27;</span>, <span class="string">&#x27;联想 A516 白色 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;9.9毫米轻薄机身，双卡双待，为女生量身打造！&#x27;</span>, <span class="string">&#x27;39900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/d70ba3808ad541b9a0ddcea47cc62ea6.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:09&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;988833&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 108 (RM-944) 黑色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;小机器，大能耐！防尘键盘，超长待机！诺记品质，辉煌延续！诺基亚最便宜的拍照功能机！&#x27;</span>, <span class="string">&#x27;18900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/d41b3a3ab0dd496dac807c803e04171e.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:55&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;988834&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 108 (RM-944) 红色 移动联通2G手机 双卡双待&#x27;</span>, <span class="string">&#x27;小机器，大能耐！防尘键盘，超长待机！诺记品质，辉煌延续！诺基亚最便宜的拍照功能机！&#x27;</span>, <span class="string">&#x27;18900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/46240ac1fb794c3989c2fc60d734504d.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:19&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:19&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;989026&#x27;</span>, <span class="string">&#x27;酷派 7231 黑色 联通3G手机 双卡双待&#x27;</span>, <span class="string">&#x27;4.0英寸高清大屏，双核1.3GHz高速CPU，畅享21M极速上网！&#x27;</span>, <span class="string">&#x27;25900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/481be30882144a82a2db7a2a905d1496.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:11&#x27;</span>, <span class="string">&#x27;2015-03-08 21:29:11&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;990723&#x27;</span>, <span class="string">&#x27;TCL LE50D59 50英寸 超窄边内置WIFI安卓智能液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;【0元献礼】抢！抢！抢！50英寸大板安卓神机，库存倒计时，性价比首选，买到就赚！！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/6MqRytIYKfn.html\&quot;&gt;【0元白条试用，1001个拜年计划】&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;329900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/b81e05f917464c67879d3f893175c133.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:08&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:08&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;990724&#x27;</span>, <span class="string">&#x27;TCL LE32D59 32英寸 安卓4.0 超窄边智能LED液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;【0元献礼】爆！爆！爆！开放式安卓神器。云端影视，尽享不停。客厅新宠，“潮”我看齐！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/6MqRytIYKfn.html\&quot;&gt;【0元白条试用，1001个拜年计划】&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;159800&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/7c5d6ba2251f4b75817b708536dffc17.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;997643&#x27;</span>, <span class="string">&#x27;长虹（CHANGHONG）LED50C2080i 50英寸智能安卓LED液晶电视（黑色）&#x27;</span>, <span class="string">&#x27;智能安卓系统，可自由安装应用程序，让您的电视无所不能！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://sale.jd.com/act/Kt0aHzbU7uR1M.html\&quot;&gt;“点击进入长虹新年专场”&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;339900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/4055ccf141a143c99a6d51e9107f96c1.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:39&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;997966&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 106 (RM-962) 红色 移动联通2G手机&#x27;</span>, <span class="string">&#x27;小机器，大能耐！防尘键盘，超长待机！支持FM收音机，手电筒功能！&#x27;</span>, <span class="string">&#x27;14900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/28085e4542e6433f80e69338327423be.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:30&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;997967&#x27;</span>, <span class="string">&#x27;诺基亚(NOKIA) 106 (RM-962) 黑色 移动联通2G手机&#x27;</span>, <span class="string">&#x27;小机器，大能耐！防尘键盘，超长待机！支持FM收音机，手电筒功能！&#x27;</span>, <span class="string">&#x27;14900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/f22fd70d7d26492e88e3368e6d528779.jpg&#x27;</span>, <span class="string">&#x27;560&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>, <span class="string">&#x27;2015-03-08 21:28:16&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_ITEM(ID,TITLE,SELL_POINT,PRICE,NUM,BARCODE,IMAGE,CID,STATUS,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;998692&#x27;</span>, <span class="string">&#x27;夏普（SHARP）LCD-52DS51A 52英寸 日本原装液晶面板 内置WIFI智能全高清液晶电视&#x27;</span>, <span class="string">&#x27;要好屏，选夏普！日本原装面板，智能电视，高画质高音质！&lt;a  target=\&quot;blank\&quot;  href=\&quot;http://item.jd.com/1278664.html\&quot;&gt;还有升级版安卓智能新机52DS52供您选择！&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;549900&#x27;</span>, <span class="string">&#x27;99999&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;http://image.taotao.com/jd/63af01c37a18454ab2fef4670046272e.jpg&#x27;</span>, <span class="string">&#x27;76&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:45&#x27;</span>, <span class="string">&#x27;2015-03-08 21:27:45&#x27;</span>);


<span class="comment">-- ----------------------------</span>
<span class="comment">-- Records of tb_user</span>
<span class="comment">-- ----------------------------</span>
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span>, <span class="string">&#x27;13488888888&#x27;</span>, <span class="string">&#x27;aa@a&#x27;</span>, <span class="string">&#x27;2015-04-06 17:03:55&#x27;</span>, <span class="string">&#x27;2015-04-06 17:03:55&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;zhangsan1&#x27;</span>, <span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span>, <span class="string">&#x27;13333333333&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-04-07 10:32:08&#x27;</span>, <span class="string">&#x27;2015-04-07 10:32:08&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;zhangsan2&#x27;</span>, <span class="string">&#x27;195d91be1e3ba6f1c857d46f24c5a454&#x27;</span>, <span class="string">&#x27;13333333334&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-04-07 10:33:37&#x27;</span>, <span class="string">&#x27;2015-04-07 10:33:37&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;zhangsan3&#x27;</span>, <span class="string">&#x27;195d91be1e3ba6f1c857d46f24c5a454&#x27;</span>, <span class="string">&#x27;13333333335&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-04-07 10:35:57&#x27;</span>, <span class="string">&#x27;2015-04-07 10:35:57&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;zhangsan5&#x27;</span>, <span class="string">&#x27;195d91be1e3ba6f1c857d46f24c5a454&#x27;</span>, <span class="string">&#x27;13333333336&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-04-07 10:46:19&#x27;</span>, <span class="string">&#x27;2015-04-07 10:46:19&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;12344444444&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-06-19 10:02:11&#x27;</span>, <span class="string">&#x27;2015-06-19 10:02:11&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;lisi1&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;12344444442&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-06-19 10:24:27&#x27;</span>, <span class="string">&#x27;2015-06-19 10:24:27&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;jd_gogogo&#x27;</span>, <span class="string">&#x27;745404feaba9fb037e01b4a91c6ddbeb&#x27;</span>, <span class="string">&#x27;18800888888&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-06-19 10:25:46&#x27;</span>, <span class="string">&#x27;2015-06-19 10:25:46&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;tidy&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;13600112243&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-07-30 17:26:25&#x27;</span>, <span class="string">&#x27;2015-07-30 17:26:25&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;tidy1&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;13600112244&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-07-30 17:48:33&#x27;</span>, <span class="string">&#x27;2015-07-30 17:48:33&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;niuniu&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;15866777744&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;2015-08-01 11:48:42&#x27;</span>, <span class="string">&#x27;2015-08-01 11:48:42&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;niuniu2&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;14322334455&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-08-01 12:04:50&#x27;</span>, <span class="string">&#x27;2015-08-01 12:04:50&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;niuniu3&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;14322334456&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-08-01 12:08:26&#x27;</span>, <span class="string">&#x27;2015-08-01 12:08:26&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;34&#x27;</span>, <span class="string">&#x27;niuniu4&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;15877680983&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-08-01 12:13:41&#x27;</span>, <span class="string">&#x27;2015-08-01 12:13:41&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;35&#x27;</span>, <span class="string">&#x27;test01&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;15600876321&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-08-01 12:21:53&#x27;</span>, <span class="string">&#x27;2015-08-01 12:21:53&#x27;</span>);
<span class="keyword">INSERT INTO</span> TB_USER(ID,USERNAME,PASSWORD,PHONE,EMAIL,CREATED,UPDATED) <span class="keyword">VALUES</span> (<span class="string">&#x27;36&#x27;</span>, <span class="string">&#x27;test02&#x27;</span>, <span class="string">&#x27;202cb962ac59075b964b07152d234b70&#x27;</span>, <span class="string">&#x27;1370348890&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2015-08-01 12:28:39&#x27;</span>, <span class="string">&#x27;2015-08-01 12:28:39&#x27;</span>);
</code></pre>
<p>分片测试：</p>
<ul>
<li>
<p>由于配置的分片规则为“auto-sharding-long”，所以mycat会根据此规则自动分片。</p>
</li>
<li>
<p>每个datanode中保存一定数量的数据。根据id进行分片</p>
</li>
<li>
<p>经测试id范围为：</p>
</li>
</ul>
<pre><code class="highlight plaintext">Datanode1：1~5000000

Datanode2：5000000~10000000

Datanode3：10000001~15000000</code></pre>
<ul>
<li>当15000000以上的id插入时报错：<br />
此时需要添加节点了。</li>
</ul>
<pre><code class="highlight plaintext">[Err] 1064 - can&#x27;t find any valid datanode :TB_ITEM -&gt; ID -&gt; 15000001</code></pre>
<h3 id="mycat读写分离"><a class="markdownIt-Anchor" href="#mycat读写分离"></a> MyCat读写分离</h3>
<p>MyCat的读写分离是建立在MySQL主从复制基础之上实现的。</p>
<p>数据库读写分离对于大型系统或者访问量很高的互联网应用来说，是必不可少的一个重要功能。对于MySQL来说，标准的读写分离是主从模式，一个写节点Master后面跟着多个读节点，读节点的数量取决于系统的压力，通常是1-3个读节点的配置</p>
<blockquote>
<p>Mycat读写分离和自动切换机制，需要mysql的主从复制机制配合</p>
</blockquote>
<h4 id="mycat配置"><a class="markdownIt-Anchor" href="#mycat配置"></a> Mycat配置</h4>
<p>Mycat 1.4 支持MySQL主从复制状态绑定的读写分离机制，让读更加安全可靠，配置如下：</p>
<ol>
<li>
<p>设置 <code>balance=&quot;1&quot;</code>与<code>writeType=&quot;0&quot;</code></p>
</li>
<li>
<p>设置 <code>switchType=&quot;2&quot;</code> 与<code>slaveThreshold=&quot;100&quot;</code></p>
</li>
<li>
<p><strong>配置之前一定要保证已经配置了主从复制</strong></p>
</li>
</ol>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn1&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db1&quot;</span> /&gt;</span>
	<span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn2&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db2&quot;</span> /&gt;</span>
	<span class="tag">&lt;<span class="name">dataNode</span> <span class="attr">name</span>=<span class="string">&quot;dn3&quot;</span> <span class="attr">dataHost</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">database</span>=<span class="string">&quot;db3&quot;</span> /&gt;</span>
	<span class="tag">&lt;<span class="name">dataHost</span> <span class="attr">name</span>=<span class="string">&quot;localhost1&quot;</span> <span class="attr">maxCon</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">minCon</span>=<span class="string">&quot;10&quot;</span> <span class="attr">balance</span>=<span class="string">&quot;1&quot;</span></span>
<span class="tag">		<span class="attr">writeType</span>=<span class="string">&quot;0&quot;</span> <span class="attr">dbType</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">dbDriver</span>=<span class="string">&quot;native&quot;</span> <span class="attr">switchType</span>=<span class="string">&quot;2&quot;</span>  <span class="attr">slaveThreshold</span>=<span class="string">&quot;100&quot;</span>&gt;</span>
		<span class="tag">&lt;<span class="name">heartbeat</span>&gt;</span>show slave status<span class="tag">&lt;/<span class="name">heartbeat</span>&gt;</span>
		<span class="tag">&lt;<span class="name">writeHost</span> <span class="attr">host</span>=<span class="string">&quot;hostM&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.25.134:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span>
<span class="tag">			<span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span>
            
			<span class="tag">&lt;<span class="name">readHost</span> <span class="attr">host</span>=<span class="string">&quot;hostS&quot;</span> <span class="attr">url</span>=<span class="string">&quot;192.168.25.166:3306&quot;</span> <span class="attr">user</span>=<span class="string">&quot;root&quot;</span></span>
<span class="tag">			<span class="attr">password</span>=<span class="string">&quot;root&quot;</span> /&gt;</span>
		<span class="tag">&lt;/<span class="name">writeHost</span>&gt;</span>
	<span class="tag">&lt;/<span class="name">dataHost</span>&gt;</span></code></pre>
<p><strong>Balance参数设置：</strong></p>
<ol>
<li>
<p>balance=“0”, 所有读操作都发送到当前可用的writeHost上。</p>
</li>
<li>
<p>balance=“1”，所有读操作都随机的发送到readHost。</p>
</li>
<li>
<p>balance=“2”，所有读操作都随机的在writeHost、readhost上分发</p>
</li>
</ol>
<p><strong>WriteType参数设置：</strong></p>
<ol>
<li>
<p>writeType=“0”, 所有写操作都发送到可用的writeHost上。</p>
</li>
<li>
<p>writeType=“1”，所有写操作都随机的发送到readHost。</p>
</li>
<li>
<p>writeType=“2”，所有写操作都随机的在writeHost、readhost分上发。</p>
</li>
</ol>
<p>“readHost是从属于writeHost的，即意味着它从那个writeHost获取同步数据，因此，当它所属的writeHost宕机了，则它也不会再参与到读写分离中来，即“不工作了”，这是因为此时，它的数据已经“不可靠”了。基于这个考虑，目前mycat 1.3和1.4版本中，若想支持MySQL一主一从的标准配置，并且在主节点宕机的情况下，从节点还能读取数据，则需要在Mycat里配置为两个writeHost并设置banlance=1。”</p>
<p><strong>switchType 目前有三种选择：</strong></p>
<ul>
<li>
<p>-1：表示不自动切换</p>
</li>
<li>
<p>1 ：默认值，自动切换</p>
</li>
<li>
<p>2 ：基于MySQL主从同步的状态决定是否切换</p>
</li>
</ul>
<p>“Mycat心跳检查语句配置为 show slave status ，dataHost 上定义两个新属性：<br />
switchType=“2” 与slaveThreshold=“100”，此时意味着开启MySQL主从复制状态绑定的读写分离与切换机制。Mycat心跳机制通过检测 show slave status 中的<br />
“Seconds_Behind_Master”, “Slave_IO_Running”, “Slave_SQL_Running” 三个字段来确定当前主从同步的状态以及Seconds_Behind_Master主从复制时延。“</p>
<h2 id="实战技巧"><a class="markdownIt-Anchor" href="#实战技巧"></a> 实战技巧</h2>
<h3 id="备份数据库"><a class="markdownIt-Anchor" href="#备份数据库"></a> 备份数据库</h3>
<p><strong>使用客户端导出sql文件</strong></p>
<ul>
<li>右键点击数据库</li>
<li>选择导出SQL文件</li>
</ul>
<p><strong>使用sql自带命令行</strong></p>
<ul>
<li>假定mysql安装在D:/software/MySQL Server 5.1/</li>
<li>那么其bin目录下有一个mysqldump.exe文件</li>
<li>账号是root</li>
<li>密码是admin</li>
<li>备份的数据库名是 test</li>
<li>备份后的文件是 d:\test.sql</li>
</ul>
<pre><code class="highlight shell">&quot;D:/software/MySQL Server 5.1/bin/mysqldump.exe&quot; -uroot -padmin -hlocalhost -P3306 test -r d:\test.sql</code></pre>
<h3 id="还原数据库"><a class="markdownIt-Anchor" href="#还原数据库"></a> 还原数据库</h3>
<p><strong>使用客户端还原</strong></p>
<ul>
<li>右键点击数据库</li>
<li>输入SQL文件</li>
<li></li>
</ul>
<p><strong>使用MySQL自带命令</strong></p>
<ul>
<li>假定mysql安装在D:/software/MySQL Server 5.1/</li>
<li>那么其bin目录下有一个mysql.exe文件</li>
<li>账号是root</li>
<li>密码是admin</li>
<li>还原的数据库名是 test</li>
<li>还原的文件是 d:\test.sql</li>
</ul>
<pre><code class="highlight shell">&quot;D:/software/MySQL Server 5.1/bin/mysql.exe&quot; -u root -padmin test &lt; d:/test.sql</code></pre>
<h3 id="开启innodb"><a class="markdownIt-Anchor" href="#开启innodb"></a> 开启InnoDB</h3>
<p><strong>检查InnoDb是否开启</strong></p>
<pre><code class="highlight plaintext">SHOW variables like &#x27;have_%&#x27;;</code></pre>
<ul>
<li>在结果中的have_innodb，如果显示为YES，即表示启动了。 如果是NO或者DISABLED表示未启动。<br />
如果不存在也表示未启动。</li>
</ul>
<p><strong>停止mysql</strong></p>
<pre><code class="highlight plaintext">net stop mysql</code></pre>
<p><strong>删除三个文件</strong></p>
<ul>
<li>定位到D:\tools\MYSQL\mysql-5.1.57-win32\data 目录下，找到这3个文件
<ul>
<li>ib_logfile0</li>
<li>ib_logfile1</li>
<li>ibdata1</li>
</ul>
</li>
<li>备份后，删除掉</li>
</ul>
<blockquote>
<p>注： D:\tools\MYSQL\mysql-5.1.57-win32 是我的安装目录，请自行调整</p>
</blockquote>
<p><strong>修改配置文件</strong></p>
<ul>
<li>打开文件：D:\tools\MYSQL\mysql-5.1.57-win32\my.ini</li>
<li>添加</li>
</ul>
<pre><code class="highlight plaintext">default-storage-engine=InnoDB</code></pre>
<blockquote>
<p>如果存在 <code>default-storage-engine=MyISAM</code>，注掉即可</p>
</blockquote>
<p><strong>启动mysql</strong></p>
<pre><code class="highlight plaintext">net start mysql</code></pre>
<h3 id="修改root密码"><a class="markdownIt-Anchor" href="#修改root密码"></a> 修改root密码</h3>
<p><strong>使用当前密码进入mysql</strong></p>
<ul>
<li>执行如下命令，进入mysql命令环境</li>
</ul>
<pre><code class="highlight plaintext">&quot;D:\tools\MYSQL\mysql-5.1.57-win32\bin\mysql.exe&quot; -u root -padmin</code></pre>
<blockquote>
<p>注： 我的mysql.exe文件位于D:\tools\MYSQL\mysql-5.1.57-win32\bin，请根据自己的情况，做相应的修改<br />
注： 我的密码是 admin, 请做相应调整。</p>
</blockquote>
<p><strong>修改密码</strong></p>
<ul>
<li>执行如下命令，把root密码改为123456</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">set</span> password <span class="keyword">for</span> root<span class="variable">@localhost</span> <span class="operator">=</span> password(<span class="string">&#x27;123456&#x27;</span>);</code></pre>
<h3 id="查询区分大小写-binary"><a class="markdownIt-Anchor" href="#查询区分大小写-binary"></a> 查询区分大小写 binary</h3>
<p>Mysql默认查询是不分大小写的，可以在SQL语句中加入 binary来区分大小写；</p>
<ul>
<li>BINARY不是函数，是类型转换运算符，它用来强制它后面的字符串为一个二进制字符串，可以理解为在字符串比较的时候区分大小写</li>
</ul>
<pre><code class="highlight sql"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `test` <span class="keyword">where</span> <span class="type">binary</span> `name` <span class="operator">=</span> &quot;Test&quot;</code></pre>
<h3 id="导入导出sql"><a class="markdownIt-Anchor" href="#导入导出sql"></a> 导入导出sql</h3>
<pre><code class="highlight sh">mysqldump -uroot -pdSadm@34e% --databases adm_dbmodel --single_transaction --skip-lock-tables --set-gtid-purged=OFF &gt; mysql_backup.sql

mysql -P 13507 -u <span class="string">&#x27;adm_admin&#x27;</span> -p<span class="string">&#x27;dSadm@34e%&#x27;</span> -e <span class="string">&#x27;source /xxx/mysql_backup.sql&#x27;</span> adm_dbmodel</code></pre>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2026 Lism Blog | lisisism@qq.com</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>