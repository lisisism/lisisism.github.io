<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    Spring AOP 丨
    

    Lism Blog
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="/Lism Blog" type="application/atom+xml">
</head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">/Lism Blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">Spring AOP</div>
  <div class="post-meta">
    <div class="date">2023 六月 29日</div>
    <div class="tags">
      
      <div class="tag-item">Java</div>
      
      <div class="tag-item">Spring</div>
      
    </div>
  </div>
  

  <main class="post-content"><h1 id="spring-aop"><a class="markdownIt-Anchor" href="#spring-aop"></a> $Spring AOP</h1>
<h1 id="spring-aop-2"><a class="markdownIt-Anchor" href="#spring-aop-2"></a> Spring AOP</h1>
<ul>
<li><a href="">Spring AOP</a>
<ul>
<li><a href="">AOP</a>
<ul>
<li><a href="">意图</a></li>
<li><a href="">实现原理</a></li>
<li><a href="">作用/优势</a></li>
<li><a href="">Spring 框架的AOP</a>
<ul>
<li><a href="">AOP术语</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="">AOP实现类型</a>
<ul>
<li><a href="">类型</a>
<ul>
<li><a href="">Spring自身实现</a></li>
<li><a href="">AspectJ实现</a></li>
</ul>
</li>
<li><a href="">AOP实现之AspectJ</a></li>
<li><a href="">AOP实现之Spring AOP</a>
<ul>
<li><a href="">代理模式实现步骤</a></li>
<li><a href="">动态代理技术</a>
<ul>
<li><a href="">JDK动态代理</a></li>
<li><a href="">CGLib动态代理</a></li>
</ul>
</li>
<li><a href="">Spring AOP：简化代理模式实现步骤</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="">Spring AOP 使用</a>
<ul>
<li><a href="">编程式AOP ProxyFactory</a>
<ul>
<li><a href="">创建代理工厂，设置被代理对象，添加通知</a></li>
</ul>
</li>
<li><a href="">声明式AOP ProxyFactoryBean</a>
<ul>
<li><a href="">Advice</a>
<ul>
<li><a href="">定义接口</a></li>
<li><a href="">实现接口</a></li>
<li><a href="">定义Advice</a></li>
<li><a href="">使用IOC配置的方式实现代理</a></li>
<li><a href="">小结</a></li>
</ul>
</li>
<li><a href="">Advisor 顾问</a>
<ul>
<li><a href="">声明接口</a></li>
<li><a href="">接口实现</a></li>
<li><a href="">切面Advice</a></li>
<li><a href="">ClassFilter 类拦截器</a></li>
<li><a href="">MethodMatcher 方法拦截器</a></li>
<li><a href="">PointCut</a></li>
<li><a href="">PointCutAdvisor</a></li>
<li><a href="">spring配置文件</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="">AspectJ AOP（一般使用该方式）</a>
<ul>
<li><a href="">AspectJ的XML实现AOP</a>
<ul>
<li><a href="">实现步骤</a>
<ul>
<li><a href="">编写目标类</a></li>
<li><a href="">maven依赖</a></li>
<li><a href="">编写一个advice（通知）</a></li>
<li><a href="">配置通知</a></li>
<li><a href="">配置AOP切面</a></li>
</ul>
</li>
<li><a href="">切入点表达式</a></li>
<li><a href="">通知类型</a></li>
<li><a href="">XML实现Spring AOP 案例</a></li>
</ul>
</li>
<li><a href="">AspectJ的注解实现AOP</a>
<ul>
<li><a href="">实现步骤</a>
<ul>
<li><a href="">编写目标类</a></li>
<li><a href="">开启AOP自动代理</a></li>
<li><a href="">编写Aspect（切面）类</a></li>
<li><a href="">配置切面类</a></li>
</ul>
</li>
<li><a href="">其他注解使用方式</a></li>
<li><a href="">环绕通知注解配置（特殊）</a></li>
<li><a href="">定义通用切入点</a></li>
<li><a href="">零注解配置</a></li>
<li><a href="">原理</a></li>
<li><a href="">案例:注解配置AOP</a></li>
<li><a href="">AspectJ切点函数</a>
<ul>
<li><a href="">表达式类型</a></li>
<li><a href="">使用示例，案例</a></li>
<li><a href="">表达式组合</a></li>
</ul>
</li>
<li><a href="">自定义注解装配AOP</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2>
<p>在软件业，AOP意为面向切面编程，通过<strong>预编译方式</strong>或<strong>运行期动态代理</strong>实现程序功能的统一维护的一种技术，AOP是OOP的延续，是软件开发中的一个热点，也是spring框架中的一个重要内容，是函数式编程的一种衍生泛型，利用AOP可以对业务逻辑的各个部分进行隔离，从而是的业务逻辑各部分之间耦合度降低，提高程序的可重用性，同时提高了开发的效率</p>
<h3 id="意图"><a class="markdownIt-Anchor" href="#意图"></a> 意图</h3>
<ul>
<li>将日志记录，性能统计，安全控制，事务处理，异常处理等代码从业务逻辑代码中划分出来，通过对这些行为的分离，我们希望可以将它们独立到非指导业务逻辑的方法中，进而改变这些行为的时候不影响业务逻辑的代码</li>
</ul>
<h3 id="实现原理"><a class="markdownIt-Anchor" href="#实现原理"></a> 实现原理</h3>
<p>AOP可以说是对OOP的补充和完善。OOP引入封装、继承和多态性等概念来建立一种对象层次结构，用以模拟公共行为的一个集合。实现AOP的技术，主要分为两大类：一是采用动态代理技术，利用截取消息的方式，对该消息进行装饰，以取代原有对象行为的执行；二是采用静态织入的方式，引入特定的语法创建“方面”，从而使得编译器可以在编译期间织入有关“方面”的代码，属于静态代理</p>
<p>在Java平台上，对于AOP的织入，有3种方式：</p>
<ul>
<li>编译期：在编译时，由编译器把切面调用编译进字节码，这种方式需要定义新的关键字并扩展编译器，AspectJ就扩展了Java编译器，使用关键字aspect来实现织入；</li>
<li>类加载器：在目标类被装载到JVM时，通过一个特殊的类加载器，对目标类的字节码重新“增强”；</li>
<li>运行期：目标对象和切面都是普通Java类，通过JVM的动态代理功能或者第三方库实现运行期动态织入。</li>
</ul>
<p>最简单的方式是第三种，Spring的AOP实现就是基于JVM的动态代理。由于JVM的动态代理要求必须实现接口，如果一个普通类没有业务接口，就需要通过CGLIB或者Javassist这些第三方库实现。</p>
<h3 id="作用优势"><a class="markdownIt-Anchor" href="#作用优势"></a> 作用/优势</h3>
<p><strong>作用：</strong></p>
<p>AOP采取横向抽取机制，取代了传统纵向继承体系的重复性代码（性能监视，事务管理，安全检查，缓存）</p>
<p>在程序运行期间，不修改源码对已有方法进行增强</p>
<p>将业务逻辑和系统处理的代码（关闭连接，事务管理，操作日志记录）解耦</p>
<p><strong>优势：</strong></p>
<ul>
<li>减少重复代码</li>
<li>提高开发效率</li>
<li>维护方便</li>
</ul>
<h3 id="spring-框架的aop"><a class="markdownIt-Anchor" href="#spring-框架的aop"></a> Spring 框架的AOP</h3>
<ul>
<li>Spring 框架的一个关键组件是<strong>面向方面的编程</strong>(AOP)框架。面向方面的编程需要把程序逻辑分解成不同的部分称为所谓的关注点。跨一个应用程序的多个点的功能被称为<strong>横切关注点</strong>，这些横切关注点在概念上独立于应用程序的业务逻辑。有各种各样的常见的很好的方面的例子，如日志记录、审计、声明式事务、安全性和缓存等。</li>
<li>在 OOP 中，关键单元模块度是类，而在 AOP 中单元模块度是方面。依赖注入帮助你对应用程序对象相互解耦和 AOP 可以帮助你从它们所影响的对象中对横切关注点解耦。</li>
<li><strong>横切关注点：</strong> 跨越应用程序的多个模块的方法或功能。（软件系统，可以看做由一组关注点即业务或功能或方法组成，其中，直接的业务关注点是直切关注点，而为直切关注点服务的，就是横切关注点），即与我们业务逻辑无关的，但是我们需要关注的部分，就是横切关注点</li>
</ul>
<h4 id="aop术语"><a class="markdownIt-Anchor" href="#aop术语"></a> AOP术语</h4>
<table>
<thead>
<tr>
<th>顶</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>切面(Aspect)</td>
<td>是切入点和通知的结合</td>
</tr>
<tr>
<td>目标(Target)</td>
<td>被通知的对象，即业务类的对象</td>
</tr>
<tr>
<td>代理(Proxy)</td>
<td>一个类被AOP织入增强后，就产生一个结果代理类</td>
</tr>
<tr>
<td>切入点(PointCut)</td>
<td>切面通知执行的“地点”的定义；目标对象中真正被切面织入的方法，切入点一定是连接点，但连接点不一定是切入点，被标记为final的方法是不能作用连接点与切入点的</td>
</tr>
<tr>
<td>连接点(JointPoint)</td>
<td>与切入点匹配的执行点，即目标对象中可以被切面（次要业务）织入的方法，所有要监控的方法都称为连接点，就是<strong>接口中的方法</strong></td>
</tr>
<tr>
<td>通知(Advice)</td>
<td>通知是切面（次要业务）的一种，可以完成简单的织入功能。通知可以定义切面织入的时间点，切入点定义了切面织入的位置；<strong>针对一个接口中的所有方法，不够灵活</strong></td>
</tr>
<tr>
<td>顾问(Advisor)</td>
<td>顾问是切面（次要业务）的一种，能够将通知以更为复杂的的方式织入到目标对象中，是将通知包装为更复杂的切面的装配器</td>
</tr>
</tbody>
</table>
<h2 id="aop实现类型"><a class="markdownIt-Anchor" href="#aop实现类型"></a> AOP实现类型</h2>
<h3 id="类型"><a class="markdownIt-Anchor" href="#类型"></a> 类型</h3>
<h4 id="spring自身实现"><a class="markdownIt-Anchor" href="#spring自身实现"></a> Spring自身实现</h4>
<ol>
<li><strong>ProxyFactory</strong>：编程式使用AOP</li>
<li><strong>ProxyFactoryBean</strong>：声明式使用AOP，专门生成代理对象的工厂
<ul>
<li><strong>Advice通知</strong> 使用更简单</li>
<li><strong>Advisor顾问</strong> 操纵更灵活</li>
</ul>
</li>
</ol>
<blockquote>
<p>底层又分为<strong>JDK动态代理实现</strong> 和 <strong>CGLib动态代理实现</strong></p>
</blockquote>
<h4 id="aspectj实现"><a class="markdownIt-Anchor" href="#aspectj实现"></a> AspectJ实现</h4>
<ol>
<li><strong>AspectJProxyFactory</strong>：集成spring与Aspect实现AOP</li>
</ol>
<ul>
<li><strong>这三个类都继承自</strong>
<ul>
<li>ProxyConfig：提供配置属性</li>
<li>AdvisedSupport：封装了通知与通知器</li>
<li>ProxyCreatorSupport：代理对象创建的辅助类</li>
</ul>
</li>
</ul>
<h3 id="aop实现之aspectj"><a class="markdownIt-Anchor" href="#aop实现之aspectj"></a> AOP实现之AspectJ</h3>
<p>AspectJ是一个java实现的AOP框架，它能够对java代码进行AOP编译（一般在编译期进行），让java代码具有AspectJ的AOP功能（当然需要特殊的编译器）</p>
<p>可以这样说AspectJ是目前实现AOP框架中最成熟，功能最丰富的语言，更幸运的是，AspectJ与java程序完全兼容，几乎是无缝关联，因此对于有java编程基础的工程师，上手和使用都非常容易。</p>
<p>了解AspectJ应用到java代码的过程（这个过程称为织入），对于织入这个概念，可以简单理解为aspect(切面)应用到目标函数(类)的过程。</p>
<p>对于这个过程，<strong>一般分为动态织入和静态织入，动态织入的方式是在运行时动态将要增强的代码织入到目标类中</strong>，这样往往是通过动态代理技术完成的，如Java JDK的动态代理(Proxy，底层通过反射实现)或者CGLIB的动态代理(底层通过继承实现)，Spring AOP采用的就是基于运行时增强的代理技术</p>
<p><strong>ApectJ采用的就是静态织入的方式</strong>。ApectJ主要采用的是编译期织入，在这个期间使用AspectJ的acj编译器(类似javac)把aspect类编译成class字节码后，在java目标类编译时织入，即先编译aspect类再编译目标类。</p>
<p><strong>spring整合了ApectJ框架，但是底层没有使用acj编译器，而是使用动态代理技术</strong></p>
<h3 id="aop实现之spring-aop"><a class="markdownIt-Anchor" href="#aop实现之spring-aop"></a> AOP实现之Spring AOP</h3>
<p><strong>本质目的就是对代理模式的简化，为了方便开发人员简化代理模式的实现，统一管理</strong></p>
<p>spring AOP是通过<strong>动态代理技术实现</strong>的</p>
<ul>
<li>动态代理技术（反射）：<strong>基于JDK的动态代理</strong>和使用<strong>CGLib的动态代理</strong></li>
<li>动态代理方式选择：根据是否实现接口来选择哪种代理方式</li>
</ul>
<h4 id="代理模式实现步骤"><a class="markdownIt-Anchor" href="#代理模式实现步骤"></a> 代理模式实现步骤</h4>
<ol>
<li>声明接口：注册需要被监听行为的名称</li>
<li>接口实现类：扮演被监控的类，负责被监听方法实现细节</li>
<li>InvocationHanler接口实现类：
<ul>
<li>次要业务/增强业务</li>
<li>将次要业务与被监听方法绑定执行</li>
</ul>
</li>
<li>代理监控对象：
<ul>
<li>被监控类内存地址，被监控类实现的接口，InvocationHanler实现类的实例对象</li>
</ul>
</li>
</ol>
<h4 id="动态代理技术"><a class="markdownIt-Anchor" href="#动态代理技术"></a> 动态代理技术</h4>
<ol>
<li>基于JDK（实现接口）</li>
<li>使用CGLib（都可以使用）</li>
</ol>
<p>Spring两种动态代理技术都有使用，通过是否实现接口来判断用哪个动态代理技术</p>
<h5 id="jdk动态代理"><a class="markdownIt-Anchor" href="#jdk动态代理"></a> JDK动态代理</h5>
<p><strong>目标对象必须实现接口</strong></p>
<p>使用Proxy类来生成代理对象的代码如下：</p>
<pre><code class="highlight plaintext">    /**
     * 使用JDK的方式生成代理对象
     * @author Administrator
     */
    public class MyProxyUtils &#123;
        public static UserService getProxy(final UserService service) &#123;
//Porxy是JDK中的API类
//第一个参数：目标队形的类加载器
//第二个参数：目标对象的接口
//第三个参数：代理对象的执行处理器
            // 使用Proxy类生成代理对象
            UserService proxy = 
                 (UserService) Proxy.newProxyInstance(
                    service.getClass().getClassLoader(),
                    service.getClass().getInterfaces(), 
                    new InvocationHandler() &#123;
                        // 代理对象方法一执行，invoke方法就会执行一次
                        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
                            if(&quot;save&quot;.equals(method.getName()))&#123;
                                System.out.println(&quot;记录日志...&quot;);
                                // 开启事务
                            &#125;
                            // 提交事务
                            // 让service类的save或者update方法正常的执行下去
                            return method.invoke(service, args);
                        &#125;
                    &#125;);
            // 返回代理对象
            return proxy;
        &#125;
    &#125;</code></pre>
<h5 id="cglib动态代理"><a class="markdownIt-Anchor" href="#cglib动态代理"></a> CGLib动态代理</h5>
<p><strong>目标对象不需要实现接口</strong></p>
<p>底层是通过继承目标对象产生代理子对象（代理子对象中继承了目标对象的方法并可以对该方法进行增强）</p>
<pre><code class="highlight plaintext">public static UserService getProxy()&#123;
        // 创建CGLIB核心的类
        Enhancer enhancer = new Enhancer();
        // 设置父类
        enhancer.setSuperclass(UserServiceImpl.class);
        // 设置回调函数
        enhancer.setCallback(new MethodInterceptor() &#123;
            @Override
            public Object intercept(Object obj, Method method, Object[] args,
                    MethodProxy methodProxy) throws Throwable &#123;
                if(&quot;save&quot;.equals(method.getName()))&#123;
                    // 记录日志
                    System.out.println(&quot;记录日志了...&quot;);
                &#125;
                return methodProxy.invokeSuper(obj, args);
            &#125;
        &#125;);
        // 生成增强之后的代理对象
        UserService proxy = (UserService) enhancer.create();
        return proxy;
    &#125;</code></pre>
<h4 id="spring-aop简化代理模式实现步骤"><a class="markdownIt-Anchor" href="#spring-aop简化代理模式实现步骤"></a> Spring AOP：简化代理模式实现步骤</h4>
<ol>
<li>声明接口：注册需要被监听行为名称</li>
<li>接口实现类：扮演被监控的类，负责被监听方法的实现细节</li>
<li>次要业务/增强业务</li>
</ol>
<p><strong>所以说spring AOP吧代理模式的5个步骤省略为3个步骤，只需实现相关的接口和类，再加以配置，就可以实现代理模式</strong></p>
<p>Spring AOP中的新增名词也基本都是为了上述代理模式的实现而服务的，它的<strong>本质就是为了简化代理模式的实现</strong></p>
<h2 id="spring-aop-使用"><a class="markdownIt-Anchor" href="#spring-aop-使用"></a> Spring AOP 使用</h2>
<p>Spring AOP是指Spring自身对AOP的实现，与AspectJ无关系</p>
<h3 id="编程式aop-proxyfactory"><a class="markdownIt-Anchor" href="#编程式aop-proxyfactory"></a> 编程式AOP ProxyFactory</h3>
<h4 id="创建代理工厂设置被代理对象添加通知"><a class="markdownIt-Anchor" href="#创建代理工厂设置被代理对象添加通知"></a> 创建代理工厂，设置被代理对象，添加通知</h4>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop05;

import org.springframework.aop.framework.ProxyFactory;

public class Test &#123;

    @org.junit.Test
    public void test01()
    &#123;
        //实例化Spring代理工厂
        ProxyFactory factory=new ProxyFactory();
        //设置被代理的对象
        factory.setTarget(new Math());
        //添加通知，横切逻辑
        factory.addAdvice(new BeforeAdvice());
        factory.addAdvice(new AfterAdvice());
        factory.addAdvice(new SurroundAdvice());
        //从代理工厂中获得代理对象
        IMath math=(IMath) factory.getProxy();
        int n1=100,n2=5;
        math.add(n1, n2);
        math.sub(n1, n2);
        math.mut(n1, n2);
        math.div(n1, n2);
    &#125;
    @org.junit.Test
    public void test02()
    &#123;
        //message.message();
    &#125;
&#125;</code></pre>
<ul>
<li>运行结果</li>
</ul>
<h3 id="声明式aop-proxyfactorybean"><a class="markdownIt-Anchor" href="#声明式aop-proxyfactorybean"></a> 声明式AOP ProxyFactoryBean</h3>
<h4 id="advice"><a class="markdownIt-Anchor" href="#advice"></a> Advice</h4>
<p><strong>通知Advice的类型</strong></p>
<ul>
<li>springAOP中，通过Advice定义横切逻辑，Spring中支持5中类型的Advice</li>
</ul>
<table>
<thead>
<tr>
<th>通知</th>
<th>连接点</th>
<th>实现接口</th>
</tr>
</thead>
<tbody>
<tr>
<td>前置通知</td>
<td>方法前</td>
<td>org.springframework.aop.MethodBeforeAdvice</td>
</tr>
<tr>
<td>后置通知</td>
<td>方法后</td>
<td>org.springframework.aop.AfterReturningAdvice</td>
</tr>
<tr>
<td>环绕通知</td>
<td>方法前后</td>
<td>org.aopalliance.intercept.MethodInterceptor</td>
</tr>
<tr>
<td>抛出异常后通知</td>
<td>方法抛出异常</td>
<td>org.springframework.aop.ThrowsAdvice</td>
</tr>
<tr>
<td>引介通知</td>
<td>类中增加新的方法属性</td>
<td>org.springframework.aop.IntroductionInterceptor</td>
</tr>
</tbody>
</table>
<p><strong>前置通知</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop05;

import java.lang.reflect.Method;

import org.springframework.aop.MethodBeforeAdvice;

/**
 * 前置通知 ，就相当于InvocationHandler类
 */
public class BeforeAdvice implements MethodBeforeAdvice &#123;

    /**
     * method 方法信息
     * args 参数
     * target 被代理的目标对象
     * 该切面一定是在执行主要业务之前执行，所以方法中不需要对Method做什么操作
     */
    public void before(Method method, Object[] args, Object target) throws Throwable &#123;
        System.out.println(&quot;-----------------前置通知-----------------&quot;);
    &#125;
&#125;</code></pre>
<p><strong>后置通知</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop05;

import java.lang.reflect.Method;

import org.springframework.aop.AfterReturningAdvice;

/**
 * 后置通知
 *
 */
public class AfterAdvice implements AfterReturningAdvice &#123;
    /*
     * returnValue 返回值
     * method 被调用的方法
     * args 方法参数
     * target 被代理对象
     */
    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable &#123;
        System.out.println(&quot;-----------------后置通知-----------------&quot;);
    &#125;
&#125;</code></pre>
<p><strong>环绕通知</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop05;

import org.aopalliance.intercept.MethodInterceptor;
import org.aopalliance.intercept.MethodInvocation;

/**
 * 环绕通知
 * 方法拦截器
 *
 */
public class SurroundAdvice implements MethodInterceptor &#123;

    public Object invoke(MethodInvocation i) throws Throwable &#123;
        //前置横切逻辑
        System.out.println(&quot;方法&quot; + i.getMethod() + &quot; 被调用在对象&quot; + i.getThis() + &quot;上，参数 &quot; + i.getArguments());
        //方法调用
        Object ret = i.proceed();
        //后置横切逻辑
        System.out.println(&quot;返回值：&quot;+ ret);
        return ret;
    &#125;
&#125;</code></pre>
<h5 id="定义接口"><a class="markdownIt-Anchor" href="#定义接口"></a> 定义接口</h5>
<pre><code class="highlight plaintext">/**
 * 接口
 * 抽象主题
 */
public interface IMath &#123;
    //加
    int add(int n1, int n2);//JoinCut 连接点
    //减
    int sub(int n1, int n2);//JoinCut 连接点
    //乘
    int mut(int n1, int n2);//JoinCut 连接点
    //除
    int div(int n1, int n2);//JoinCut 连接点
&#125;</code></pre>
<h5 id="实现接口"><a class="markdownIt-Anchor" href="#实现接口"></a> 实现接口</h5>
<pre><code class="highlight plaintext">/**
 * 被代理的目标对象
 *真实主题
 */
public class Math implements IMath &#123;
    //加
    public int add(int n1,int n2)&#123;//切入点 PointCut  主要业务方法
        int result=n1+n2;
        System.out.println(n1+&quot;+&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    //减
    public int sub(int n1,int n2)&#123;//切入点 PointCut  主要业务方法
        int result=n1-n2;
        System.out.println(n1+&quot;-&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    //乘
    public int mut(int n1,int n2)&#123;//切入点 PointCut  主要业务方法
        int result=n1*n2;
        System.out.println(n1+&quot;X&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    //除
    public int div(int n1,int n2)&#123;//切入点 PointCut  主要业务方法
        int result=n1/n2;
        System.out.println(n1+&quot;/&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
&#125;</code></pre>
<h5 id="定义advice"><a class="markdownIt-Anchor" href="#定义advice"></a> 定义Advice</h5>
<p>使用基础代理模式InvocationHandler</p>
<pre><code class="highlight plaintext">/*
 *   public class Agent implements InvocationHandler&#123;
 *   
 *      private BaseService obj;//当前具体被监控对象
 *      public Agent(BasseSercie param)&#123;
 *          this.obj = param;
 *      &#125;
 *      public Object invoke(Object proxy,Method method,Object[] args)&#123;
 *             //织入顺序
 *      &#125;
 *      //次要业务
 *      public wash()&#123;
 *      &#125;
 *   &#125;
 * 
 * */</code></pre>
<p><strong>后置通知</strong></p>
<pre><code class="highlight plaintext">import java.lang.reflect.Method;
import org.springframework.aop.AfterReturningAdvice;
/**
 * 后置通知
 *
 */
public class AfterAdvice implements AfterReturningAdvice &#123;
    /*
     * returnValue 返回值
     * method 被调用的方法
     * args 方法参数
     * target 被代理对象
     * 切面，次要业务
     */
    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable &#123;
        System.out.println(&quot;共用时：time&quot;);
    &#125;
&#125;</code></pre>
<h5 id="使用ioc配置的方式实现代理"><a class="markdownIt-Anchor" href="#使用ioc配置的方式实现代理"></a> 使用IOC配置的方式实现代理</h5>
<ul>
<li>引入spring IOC的核心jar包</li>
<li>创建IOC的配置文件beans.xml</li>
</ul>
<pre><code class="highlight plaintext">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;!-- 被代理的目标对象 ，注册被监控实现类--&gt;
    &lt;bean id=&quot;target&quot; class=&quot;com.zhangguo.Spring041.aop06.Math&quot;&gt;&lt;/bean&gt;
    &lt;!--通知、横切逻辑，注册通知实现类--&gt;
    &lt;bean id=&quot;advice&quot; class=&quot;com.zhangguo.Spring041.aop06.AfterAdvice&quot;&gt;&lt;/bean&gt;
    &lt;!--代理对象,注册代理监控对象生产工厂 --&gt;
    &lt;!--interceptorNames 通知数组 --&gt;
    &lt;!--p:target-ref 被代理的对象--&gt;
    &lt;!--p:proxyTargetClass 被代理对象是否为一个没有实现接口的类，如果是则使用cglib,否则使用jdk动态代理  --&gt;
    &lt;bean id=&quot;proxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;
        p:interceptorNames=&quot;advice&quot;
        p:target-ref=&quot;target&quot;
        p:proxyTargetClass=&quot;true&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;
    &lt;!--
    p:interceptorNames=&quot;advice&quot;等价于&lt;property name=&quot;interceptorNames&quot; value=&quot;advice&quot;&gt;&lt;/property&gt;
    p:target-ref=&quot;target&quot;等价于&lt;property name=&quot;target&quot; ref=&quot;target&quot;&gt;&lt;/bean&gt;
    --&gt;</code></pre>
<ul>
<li>获取代理类并执行</li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop06;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Test &#123;

    @org.junit.Test
    public void test01()
    &#123;
        //容器
        ApplicationContext ctx=new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
        //从代理工厂中获得代理对象
        IMath math=(IMath)ctx.getBean(&quot;proxy&quot;);
        int n1=100,n2=5;
        math.add(n1, n2);
        math.sub(n1, n2);
        math.mut(n1, n2);
        math.div(n1, n2);
    &#125;
&#125;</code></pre>
<ul>
<li>输出</li>
</ul>
<h5 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h5>
<ul>
<li><strong>这里有个值得注意的问题</strong>：从容器中获得proxy对象时应该是org.springframework.aop.framework.ProxyFactoryBean类型的对象(如下代码所示)，但这里直接就转换成IMath类型了，这是因为：ProxyFactoryBean本质上是一个用来生产Proxy的FactoryBean。如果容器中的某个对象持有某个FactoryBean的引用它取得的不是FactoryBean本身而是 FactoryBean的getObject()方法所返回的对象。所以如果容器中某个对象依赖于ProxyFactoryBean那么它将会使用到 ProxyFactoryBean的getObject()方法所返回的代理对象这就是ProxyFactryBean得以在容器中使用的原因</li>
</ul>
<blockquote>
<p><strong>通知Advice的弊端是，它只可以对接口中的所有方法进行织入切面</strong></p>
<p>会强行的与接口中的所有方法进行绑定</p>
</blockquote>
<h4 id="advisor-顾问"><a class="markdownIt-Anchor" href="#advisor-顾问"></a> Advisor 顾问</h4>
<p>此种方式比advice更加灵活，只需多实现几个接口，其他配置方法相同，就可以实现更加灵活的实现</p>
<h5 id="声明接口"><a class="markdownIt-Anchor" href="#声明接口"></a> 声明接口</h5>
<pre><code class="highlight plaintext">public interface BaseService &#123;
       public void eat();//JoinCut 连接点
       public void wc();//JoinCut 连接点
&#125;</code></pre>
<h5 id="接口实现"><a class="markdownIt-Anchor" href="#接口实现"></a> 接口实现</h5>
<pre><code class="highlight plaintext">import com.kaikeba.service.BaseService;

public class Person implements BaseService &#123;

	public void eat() &#123;//切入点 PointCut  主要业务方法
		
           System.out.println(&quot;吃泡面&quot;);
	&#125;
	public void wc() &#123;//切入点 PointCut   主要业务方法
		
		 System.out.println(&quot;上厕所&quot;);
	&#125;
&#125;</code></pre>
<h5 id="切面advice"><a class="markdownIt-Anchor" href="#切面advice"></a> 切面Advice</h5>
<p>次要方法</p>
<pre><code class="highlight plaintext">import java.lang.reflect.Method;

import org.springframework.aop.Advisor;
import org.springframework.aop.MethodBeforeAdvice;
import org.springframework.aop.framework.ProxyFactoryBean;
/*
 * 
 *   public class Agent implements InvocationHandler&#123;
 *   
 *      private BaseService obj;//当前具体被监控对象
 *      
 *      public Agent(BasseSercie param)&#123;
 *          this.obj = param;
 *      &#125;
 *   
 *      public Object invoke(Object proxy,Method method,Object[] args)&#123;
 *             //织入顺序
 *      &#125;
 *      
 *      //次要业务
 *      public wash()&#123;
 *      
 *      &#125;
 *   &#125;
 * 
 * */
public class MyBeforeAdvice implements MethodBeforeAdvice &#123;

	//切面：次要业务
	public void before(Method arg0, Object[] arg1, Object arg2) throws Throwable &#123;
		System.out.println(&quot;-----洗手-----&quot;);
        
	&#125;
&#125;</code></pre>
<h5 id="classfilter-类拦截器"><a class="markdownIt-Anchor" href="#classfilter-类拦截器"></a> ClassFilter 类拦截器</h5>
<p>判断当前被拦截对象是不是当前顾问需要管理对象</p>
<pre><code class="highlight plaintext">import org.springframework.aop.ClassFilter;

import com.kaikeba.serviceImpl.Person;

public class MyClassFilter implements ClassFilter &#123;

	 /*
	  *  1.一个接口下会有多个实现类
	  *  2.判断当前实现类是不是我们织入方式关心的目标类
	  *  BaseService接口我们现在只想管理Person.
	  *  参数：就是当前被拦截类：可能Person，可能Gog
	  * */
	public boolean matches(Class&lt;?&gt; clazz) &#123;
	    if(clazz == Person.class)&#123;
	    	return true;//告诉顾问，当前类是需要我们提供织入服务
	    &#125;
	    //Gog
		return false;
	&#125;

&#125;</code></pre>
<h5 id="methodmatcher-方法拦截器"><a class="markdownIt-Anchor" href="#methodmatcher-方法拦截器"></a> MethodMatcher 方法拦截器</h5>
<p>当前被拦截的方法是不是我们所需要主要业务方法</p>
<pre><code class="highlight plaintext">import java.lang.reflect.Method;

import org.springframework.aop.MethodMatcher;

public class MyMethodMatcher implements MethodMatcher &#123;

	/*
	 *  被监控接口比如（BaseService），没有重载方法
	 *  每一个方法名称都是以唯一
	 *  此时可以采用 static检测方式，只根据方法名称判断
	 * 参数：method: 接口中某一个方法
	 *     targetClass: 接口中一个实现类
	 *     
	 *  业务：只想为Person类中eat方法提供织入   
	 */
	
	public boolean matches(Method method, Class&lt;?&gt; targetClass) &#123;
		
		String methodName = method.getName();
		if(&quot;eat&quot;.equals(methodName))&#123;
			return true;
		&#125;
		return false;
	&#125;

	public boolean isRuntime() &#123;
		// TODO Auto-generated method stub
		return false;
	&#125;

	public boolean matches(Method method, Class&lt;?&gt; targetClass, Object... args) &#123;
		// TODO Auto-generated method stub
		return false;
	&#125;

&#125;
</code></pre>
<h5 id="pointcut"><a class="markdownIt-Anchor" href="#pointcut"></a> PointCut</h5>
<p>目标对象和目标方法</p>
<pre><code class="highlight plaintext">import org.springframework.aop.ClassFilter;
import org.springframework.aop.MethodMatcher;
import org.springframework.aop.Pointcut;

public class MyPointCut implements Pointcut &#123;
	
	
	/*
	 * InvocationHandler接口
	 *    invoke()&#123;
	 *        if(obj.getClass ！= person.class)&#123;
	 *              return
	 *        &#125;
	 *        
	 *        if(!methodObj.getName.equals(&quot;eat&quot;))&#123;
	 *               return 
	 *        &#125;
	 *        //织入方式:次要业务方法和 Peson.eat()执行顺序
	 *        //前置通知
	 *          wash（）；
	 *          Person.eat()
	 *    &#125;
	 * 
	 * */
	//使用依赖注入
	private ClassFilter classFilter;
	private MethodMatcher metodMatcher;

	public void setClassFilter(ClassFilter classFilter) &#123;
		this.classFilter = classFilter;
	&#125;

	public void setMetodMatcher(MethodMatcher metodMatcher) &#123;
		this.metodMatcher = metodMatcher;
	&#125;

	public ClassFilter getClassFilter() &#123;
		// TODO Auto-generated method stub
		return this.classFilter;
	&#125;

	public MethodMatcher getMethodMatcher() &#123;
		// TODO Auto-generated method stub
		return this.metodMatcher;
	&#125;

&#125;</code></pre>
<h5 id="pointcutadvisor"><a class="markdownIt-Anchor" href="#pointcutadvisor"></a> PointCutAdvisor</h5>
<p>可以灵活的指定当前接口下的哪一个实现类中哪一个方法与次要业务进行绑定</p>
<pre><code class="highlight plaintext">import org.aopalliance.aop.Advice;
import org.springframework.aop.Pointcut;
import org.springframework.aop.PointcutAdvisor;

public class MyPointCutAdvisor implements PointcutAdvisor &#123;
	//采用依赖注入 set
    private Advice advice;//次要业务以及次要业务与主要业务执行顺序
    private Pointcut pointcut;//当前拦截对象和对象调用主要业务方法 person对象.eat()
    
    
    
	public void setAdvice(Advice advice) &#123;
		this.advice = advice;
	&#125;

	public void setPointcut(Pointcut pointcut) &#123;
		this.pointcut = pointcut;
	&#125;

	public Advice getAdvice() &#123;
		// TODO Auto-generated method stub
		return this.advice;
	&#125;

	public boolean isPerInstance() &#123;
		// TODO Auto-generated method stub
		return false;
	&#125;

	public Pointcut getPointcut() &#123;
		// TODO Auto-generated method stub
		return this.pointcut;
	&#125;

&#125;
</code></pre>
<h5 id="spring配置文件"><a class="markdownIt-Anchor" href="#spring配置文件"></a> spring配置文件</h5>
<pre><code class="highlight plaintext">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
    xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
    xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
   
       &lt;!-- 注册被监控实现类 --&gt;
       &lt;bean id=&quot;person&quot; class=&quot;com.kaikeba.serviceImpl.Person&quot;&gt;&lt;/bean&gt;
       &lt;bean id=&quot;dog&quot; class=&quot;com.kaikeba.serviceImpl.Gog&quot;&gt;&lt;/bean&gt;
       
       &lt;!-- 注册通知实现类 --&gt;
       &lt;bean id=&quot;before&quot; class=&quot;com.kaikeba.advice.MyBeforeAdvice&quot;&gt;&lt;/bean&gt;
       
       &lt;!-- 注册类型过滤器 --&gt;
       &lt;bean id=&quot;classFilter&quot; class=&quot;com.kaikeba.util.MyClassFilter&quot;&gt;&lt;/bean&gt;
       &lt;!-- 注册方法匹配器 --&gt;
       &lt;bean id=&quot;methodMatcher&quot; class=&quot;com.kaikeba.util.MyMethodMatcher&quot;&gt;&lt;/bean&gt;
       
       &lt;!-- 注册切入点 --&gt;
       &lt;bean id=&quot;pointCut&quot; class=&quot;com.kaikeba.util.MyPointCut&quot; &gt;
          &lt;property name=&quot;classFilter&quot; ref=&quot;classFilter&quot;&gt;&lt;/property&gt;
          &lt;property name=&quot;metodMatcher&quot; ref=&quot;methodMatcher&quot;&gt;&lt;/property&gt;
       &lt;/bean&gt;
       
       &lt;!-- 注册顾问 --&gt;
       &lt;bean id=&quot;myAdvisor&quot; class=&quot;com.kaikeba.util.MyPointCutAdvisor&quot;&gt;
           &lt;property name=&quot;advice&quot; ref=&quot;before&quot;&gt;&lt;/property&gt;
           &lt;property name=&quot;pointcut&quot; ref=&quot;pointCut&quot;&gt;&lt;/property&gt;
       &lt;/bean&gt;
       
       &lt;!-- 注册代理对象工厂 --&gt;
       &lt;!-- 
                             此时生成代理对象，只会负责person.eat方法监控
                             与Advice不同，不会对BaseService所有的方法进行监控                
        --&gt;
       &lt;bean id=&quot;personProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
              &lt;property name=&quot;target&quot; ref=&quot;person&quot;&gt;&lt;/property&gt;
              &lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvisor&quot;&gt;&lt;/property&gt;
       &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<h2 id="aspectj-aop一般使用该方式"><a class="markdownIt-Anchor" href="#aspectj-aop一般使用该方式"></a> AspectJ AOP（一般使用该方式）</h2>
<p><strong>AspectJ 是AOP单独的一个实现框架，和spring并无关系</strong></p>
<p><strong>下述步骤是AspectJ+Spring的结合使用（spring自身实现的aop是<code>ProxyFactoryBean</code>）</strong></p>
<p>AspectJ是一个java实现的AOP框架，它能够对java代码进行AOP编译（一般在编译期进行），让java代码具有AspectJ的AOP功能（当然需要特殊的编译器）</p>
<p>可以这样说AspectJ是目前实现AOP框架中最成熟，功能最丰富的语言，更幸运的是，AspectJ与java程序完全兼容，几乎是无缝关联，因此对于有java编程基础的工程师，上手和使用都非常容易。</p>
<p>了解AspectJ应用到java代码的过程（这个过程称为织入），对于织入这个概念，可以简单理解为aspect(切面)应用到目标函数(类)的过程。</p>
<p>对于这个过程，<strong>一般分为动态织入和静态织入，动态织入的方式是在运行时动态将要增强的代码织入到目标类中</strong>，这样往往是通过动态代理技术完成的，如Java JDK的动态代理(Proxy，底层通过反射实现)或者CGLIB的动态代理(底层通过继承实现)，Spring AOP采用的就是基于运行时增强的代理技术</p>
<p><strong>ApectJ采用的就是静态织入的方式</strong>。ApectJ主要采用的是编译期织入，在这个期间使用AspectJ的acj编译器(类似javac)把aspect类编译成class字节码后，在java目标类编译时织入，即先编译aspect类再编译目标类。</p>
<p><strong>spring整合了ApectJ框架，但是底层没有使用acj编译器，而是使用动态代理技术</strong></p>
<h3 id="aspectj的xml实现aop"><a class="markdownIt-Anchor" href="#aspectj的xml实现aop"></a> AspectJ的XML实现AOP</h3>
<h4 id="实现步骤"><a class="markdownIt-Anchor" href="#实现步骤"></a> 实现步骤</h4>
<h5 id="编写目标类"><a class="markdownIt-Anchor" href="#编写目标类"></a> 编写目标类</h5>
<p>编写接口和实现类（目标对象）</p>
<ul>
<li>UserService接口</li>
<li>UserServiceImpl实现类</li>
</ul>
<blockquote>
<p>配置目标类，将目标类交给spring IoC容器管理</p>
</blockquote>
<h5 id="maven依赖"><a class="markdownIt-Anchor" href="#maven依赖"></a> maven依赖</h5>
<pre><code class="highlight plaintext">&lt;!-- 基于AspectJ的aop依赖 --&gt;
&lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
      &lt;version&gt;5.0.7.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--&lt;dependency&gt;
      &lt;groupId&gt;aopalliance&lt;/groupId&gt;
      &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
      &lt;version&gt;1.0&lt;/version&gt;
&lt;/dependency&gt;--&gt;</code></pre>
<h5 id="编写一个advice通知"><a class="markdownIt-Anchor" href="#编写一个advice通知"></a> 编写一个advice（通知）</h5>
<ul>
<li>定义一个bean
<ul>
<li>该通知不再需要实现任何接口或继承抽象类，一个普通的bean即可，方法<strong>可以</strong>（也可不带）带一个JoinPoint连接点参数，用于获得连接点信息，如方法名，参数，代理对象等</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring041.aop08;

import org.aspectj.lang.JoinPoint;

/**
 * 通知
 */
public class Advices &#123;
    //前置通知
    public void before(JoinPoint jp)
    &#123;
        System.out.println(&quot;--------------------bofore--------------------&quot;);
        System.out.println(&quot;方法名：&quot;+jp.getSignature()+&quot;，参数：&quot;+jp.getArgs().length+&quot;，代理对象：&quot;+jp.getTarget());
    &#125;
    //后置通知
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;--------------------after--------------------&quot;);
    &#125;
&#125;</code></pre>
<ul>
<li>通知类型有很多种，有些参数不一样，特别是环绕通知
<ul>
<li><strong>下列方法名可以随意编写</strong></li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">//前置通知
public void beforeMethod(JoinPoint joinPoint)

//后置通知
public void afterMethod(JoinPoint joinPoint)

//返回值通知
public void afterReturning(JoinPoint joinPoint, Object result)

//抛出异常通知
//在方法出现异常时会执行的代码可以访问到异常对象，可以指定在出现特定异常时在执行通知代码
public void afterThrowing(JoinPoint joinPoint, Exception ex)

//环绕通知
//环绕通知需要携带ProceedingJoinPoint类型的参数
//环绕通知类似于动态代理的全过程：ProceedingJoinPoint类型的参数可以决定是否执行目标方法。
//而且环绕通知必须有返回值，返回值即为目标方法的返回值
public Object aroundMethod(ProceedingJoinPoint pjd)&#123;
    System.out.println(&quot;环绕通知前&quot;);
    //调用目标对象的方法
    Object proceed = pjd.proceed(); 
    System.out.println(&quot;环绕通知前&quot;);
    return proceed;
&#125;</code></pre>
<h5 id="配置通知"><a class="markdownIt-Anchor" href="#配置通知"></a> 配置通知</h5>
<ul>
<li>xml配置通知，就是一个普通的bean</li>
</ul>
<pre><code class="highlight plaintext">&lt;bean id=&quot;advices&quot; class=&quot;com.zhangguo.Spring041.aop08.Advices&quot;&gt;&lt;/bean&gt;
...
&lt;/bean&gt;</code></pre>
<h5 id="配置aop切面"><a class="markdownIt-Anchor" href="#配置aop切面"></a> 配置AOP切面</h5>
<ul>
<li>就是指明你的切面中的方法要在哪些类方法执行的前后执行
<ul>
<li>下面的案例指明了是将切面切入service类中的所有方法，即该类中的所有方法只要一执行就调用切面中定义的通知方法，至于要执行哪些通知方法，需要后续步骤继续配置</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">&lt;aop:config&gt;
   &lt;aop:aspect id=&quot;myAspect&quot; ref=&quot;aBean&quot;&gt;
      &lt;aop:pointcut id=&quot;businessService&quot;
         expression=&quot;execution(* com.xyz.myapp.service.*.*(..))&quot;/&gt;
      &lt;!-- 前置通知 --&gt;
      &lt;aop:before pointcut-ref=&quot;businessService&quot; 
         method=&quot;doRequiredTask&quot;/&gt;
      &lt;!-- 最终通知 --&gt;
      &lt;aop:after pointcut-ref=&quot;businessService&quot; 
         method=&quot;doRequiredTask&quot;/&gt;
      &lt;!-- 后置通知 --&gt;
      &lt;aop:after-returning pointcut-ref=&quot;businessService&quot;
         returning=&quot;retVal&quot;
         method=&quot;doRequiredTask&quot;/&gt;
      &lt;!-- 异常抛出通知--&gt;
      &lt;aop:after-throwing pointcut-ref=&quot;businessService&quot;
         throwing=&quot;ex&quot;
         method=&quot;doRequiredTask&quot;/&gt;
      &lt;!-- 环绕通知 --&gt;
      &lt;aop:around pointcut-ref=&quot;businessService&quot; 
         method=&quot;doRequiredTask&quot;/&gt;
   ...
   &lt;/aop:aspect&gt;
&lt;/aop:config&gt;
&lt;bean id=&quot;aBean&quot; class=&quot;...&quot;&gt;
...
&lt;/bean&gt;</code></pre>
<h4 id="切入点表达式"><a class="markdownIt-Anchor" href="#切入点表达式"></a> 切入点表达式</h4>
<p>切入点表达式的格式：</p>
<p><em>单个点用来分割包名，类名，方法名</em></p>
<p><strong>execution([修饰符] 返回值类型 包名.类名.方法名(参数))</strong></p>
<ul>
<li>execution：必须要</li>
<li>修饰符：可省略</li>
<li>返回值类型：必须要，但是可以使用*通配符</li>
<li><strong>包名 ：</strong>
<ul>
<li>多级包之间使用.分割</li>
<li>包名可以使用 * 代替，多级包名可以使用多个 * 代替</li>
<li>如果想省略中间的包名可以使用 …</li>
</ul>
</li>
<li><strong>类名：</strong>
<ul>
<li>可以使用 * 代替</li>
<li>也可以写成 * DaoImpl</li>
</ul>
</li>
<li><strong>方法名：</strong>
<ul>
<li>也可以使用 * 好代替</li>
<li>也可以写成add *</li>
</ul>
</li>
<li><strong>参数：</strong>
<ul>
<li>参数使用 * 代替</li>
<li>如果有多个参数，可以使用 …代替</li>
</ul>
</li>
</ul>
<h4 id="通知类型"><a class="markdownIt-Anchor" href="#通知类型"></a> 通知类型</h4>
<p>通知类型（五种）：<strong>前置通知、后置通知、最终通知、环绕通知、异常抛出通知</strong></p>
<p><strong>前置通知：</strong></p>
<ul>
<li>执行时机：目标对象方法之前执行通知</li>
<li>配置文件：&lt;aop:before method=“before” pointcut-ref=“myPointcut”/&gt;</li>
<li>应用场景：方法开始时可以进行校验</li>
</ul>
<p><strong>后置通知：</strong></p>
<ul>
<li>执行时机：目标对象方法之后执行通知，有异常则不执行了</li>
<li>配置文件：&lt;aop:after-returning method=“afterReturning”<br />
pointcut-ref=“myPointcut”/&gt;</li>
<li>应用场景：可以修改方法的返回值</li>
</ul>
<p><strong>最终通知：</strong></p>
<ul>
<li>执行时机：目标对象方法之后执行通知，有没有异常都会执行</li>
<li>配置文件：&lt;aop:after method=“after” pointcut-ref=“myPointcut”/&gt;</li>
<li>应用场景：例如像释放资源</li>
</ul>
<p><strong>异常抛出通知：</strong></p>
<ul>
<li>执行时机：在抛出异常后通知</li>
<li>配置文件：&lt;aop:after-throwing method=&quot; afterThrowing &quot; pointcut-<br />
ref=“myPointcut”/&gt;</li>
<li>应用场景：包装异常</li>
</ul>
<p><strong>环绕通知：（使用环绕通知可以替代其他四个通知）</strong></p>
<ul>
<li>执行时机：目标对象方法之前和之后都会执行，抛出异常后不会执行</li>
<li>配置文件：&lt;aop:around method=“around” pointcut-ref=“myPointcut”/&gt;</li>
<li>应用场景：事务、统计代码执行时机</li>
</ul>
<h4 id="xml实现spring-aop-案例"><a class="markdownIt-Anchor" href="#xml实现spring-aop-案例"></a> XML实现Spring AOP 案例</h4>
<p><strong>要被代理的Math类</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop01;

/**
 * 被代理的目标类
 */
public class Math&#123;
    //加
    public int add(int n1,int n2)&#123;
        int result=n1+n2;
        System.out.println(n1+&quot;+&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //减
    public int sub(int n1,int n2)&#123;
        int result=n1-n2;
        System.out.println(n1+&quot;-&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //乘
    public int mut(int n1,int n2)&#123;
        int result=n1*n2;
        System.out.println(n1+&quot;X&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //除
    public int div(int n1,int n2)&#123;
        int result=n1/n2;
        System.out.println(n1+&quot;/&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
&#125;</code></pre>
<p><strong>编辑通知类Advice</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop01;

import org.aspectj.lang.JoinPoint;

/**
 * 通知类，横切逻辑
 *
 */
public class Advices &#123;
    
    public void before(JoinPoint jp)&#123;
        System.out.println(&quot;----------前置通知----------&quot;);
        System.out.println(jp.getSignature().getName());
    &#125;
    
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;
&#125;</code></pre>
<p><strong>配置AOP XML文件</strong></p>
<ul>
<li>加粗部分的内容是在原IOC内容中新增的，主要是为AOP服务，如果引入失败则没有智能提示。xmlns:是xml namespace的简写。xmlns:xsi：其xsd文件是xml需要遵守的规范，通过URL可以看到，是w3的统一规范，后面通过xsi:schemaLocation来定位所有的解析文件，这里只能成偶数对出现。</li>
<li><code>&lt;bean &gt;&lt;/bean&gt;</code>表示通知bean，也就是横切逻辑bean</li>
<li><code>&lt;aop:config proxy-target-&gt;</code>用于AOP配置，proxy-target-class属性表示被代理的类是否为一个没有实现接口的类，Spring会依据实现了接口则使用JDK内置的动态代理，如果未实现接口则使用cblib；在Bean配置文件中，所有的Spring AOP配置都必须定义在<a href="">aop:config</a>元素内部。</li>
<li><code>&lt;aop:aspect&gt;</code>元素来为具体的切面实现引用后端Bean实例。因此，切面Bean必须有一个标识符，供<a href="">aop:aspect</a>元素引用。aop:aspect表示切面配置， ref表示通知对象的引用；</li>
<li><code>aop:pointcut</code>是配置切入点，就是横切逻辑将注入的精确位置，那些包，类，方法需要拦截注入横切逻辑</li>
</ul>
<pre><code class="highlight plaintext">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.3.xsd&quot;&gt;
     
    &lt;!--被代理的目标对象 --&gt;
    &lt;bean id=&quot;math&quot; class=&quot;com.zhangguo.Spring041.aop08.Math&quot;&gt;&lt;/bean&gt;
    &lt;!-- 通知 --&gt;
    &lt;bean id=&quot;advice&quot; class=&quot;com.zhangguo.Spring041.aop08.Advices&quot;&gt;&lt;/bean&gt;
    &lt;!-- AOP配置 --&gt;
    &lt;!-- proxy-target-class属性表示被代理的类是否为一个没有实现接口的类，Spring会依据实现了接口则使用JDK内置的动态代理，如果未实现接口则使用cblib --&gt;
    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;
        &lt;!-- 切面配置 --&gt;
        &lt;!--ref表示通知对象的引用 --&gt;
        &lt;aop:aspect ref=&quot;advice&quot;&gt;
            &lt;!-- 配置切入点(横切逻辑将注入的精确位置) --&gt;
            &lt;aop:pointcut expression=&quot;execution(* com.zhangguo.Spring041.aop08.Math.*(..))&quot; id=&quot;pointcut1&quot;/&gt;
            &lt;!--声明通知，method指定通知类型，pointcut指定切点，就是该通知应该注入那些方法中 --&gt;
            &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
            &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<ul>
<li>aop:before用于声明通知，method指定通知类型，pointcut指定切点，就是该通知应该注入那些方法中。在aop Schema中，每种通知类型都对应一个特定地XML元素。通知元素需要pointcut-ref属性来引用切入点，或者用pointcut属性直接嵌入切入点表达式。method属性指定切面类中通知方法的名称。有如下几种：</li>
</ul>
<pre><code class="highlight plaintext">&lt;!-- 前置通知 --&gt;
&lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
&lt;!-- 后置通知 --&gt;
&lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
&lt;!--环绕通知 --&gt;
&lt;aop:around method=&quot;around&quot; pointcut=&quot;execution(* com.zhangguo.Spring041.aop08.Math.s*(..))&quot;/&gt;
&lt;!--异常通知 --&gt;
&lt;aop:after-throwing method=&quot;afterThrowing&quot; pointcut=&quot;execution(* com.zhangguo.Spring041.aop08.Math.d*(..))&quot;  throwing=&quot;exp&quot;/&gt;
&lt;!-- 返回值通知 --&gt;
&lt;aop:after-returning method=&quot;afterReturning&quot; pointcut=&quot;execution(* com.zhangguo.Spring041.aop08.Math.m*(..))&quot; returning=&quot;result&quot;/&gt;</code></pre>
<p><strong>测试运行</strong></p>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop01;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Test &#123;

    public static void main(String[] args) &#123;
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;aop01.xml&quot;);
        Math math = ctx.getBean(&quot;math&quot;, Math.class);
        int n1 = 100, n2 = 5;
        math.add(n1, n2);
        math.sub(n1, n2);
        math.mut(n1, n2);
        math.div(n1, n2);
    &#125;

&#125;</code></pre>
<p><strong>结果</strong></p>
<hr />
<h3 id="aspectj的注解实现aop"><a class="markdownIt-Anchor" href="#aspectj的注解实现aop"></a> AspectJ的注解实现AOP</h3>
<h4 id="实现步骤-2"><a class="markdownIt-Anchor" href="#实现步骤-2"></a> 实现步骤</h4>
<h5 id="编写目标类-2"><a class="markdownIt-Anchor" href="#编写目标类-2"></a> 编写目标类</h5>
<p>编写接口和实现类（目标对象）</p>
<ul>
<li>UserService接口</li>
<li>UserServiceImpl实现类</li>
</ul>
<blockquote>
<p>配置目标类，将目标类交给spring IoC容器管理</p>
</blockquote>
<h5 id="开启aop自动代理"><a class="markdownIt-Anchor" href="#开启aop自动代理"></a> 开启AOP自动代理</h5>
<ul>
<li>在spring的xml文件中加入</li>
</ul>
<pre><code class="highlight plaintext">&lt;aop:aspectj-autoproxy/&gt;</code></pre>
<h5 id="编写aspect切面类"><a class="markdownIt-Anchor" href="#编写aspect切面类"></a> 编写Aspect（切面）类</h5>
<p>Advice通知+PointCut切入点=Aspect切面</p>
<ul>
<li>在使用基于Aspectj注解的Spring aop时，我们可以通过把@Pointcut注解定义Pointcut，指定其表达式，然后再需要使用Pointcut表达时的时候直接指定Pointcut</li>
</ul>
<pre><code class="highlight plaintext">//切面类，表示通知加切入点

//需要将切面类将给spring IoC容器管理
@Component
//@Aspect:标记改类是一个切面类
@Aspect
public class MyAspect &#123;
// 这里的这个方法名没有什么实际意义，相当于一个id，pointcut种的内容是这个id所匹配的要切入的那些柱子，要切入执行的内容就是下面的@before方法，@before注解的参数就是这个pointcut注解方法的名字
    @Pointcut(&quot;execution(* add(..))&quot;)
    private void beforeAdd() &#123;&#125;
    
    //@Before表示这是一个前置通知
    //value：切入点表达式
    @Before(&quot;execution(* *..*.*ServiceImpl.*(..))&quot;)
    public void before() &#123;
        System.out.println(&quot;-----------前置通知-----------&quot;);
    &#125;
    
&#125;</code></pre>
<h5 id="配置切面类"><a class="markdownIt-Anchor" href="#配置切面类"></a> 配置切面类</h5>
<p>即让其纳入spring管理</p>
<pre><code class="highlight plaintext">&lt;context:component-scan base-package=&quot;com.kkb.spring&quot;/&gt;</code></pre>
<h4 id="其他注解使用方式"><a class="markdownIt-Anchor" href="#其他注解使用方式"></a> 其他注解使用方式</h4>
<pre><code class="highlight plaintext">import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.AfterReturning;
import org.aspectj.lang.annotation.AfterThrowing;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;

/**
 * 通知类，横切逻辑
 */
@Component
@Aspect
public class Advices &#123;
    //切点
    @Pointcut(&quot;execution(* com.zhangguo.Spring052.aop04.Math.a*(..))&quot;)
    public void pointcut()&#123;
    &#125;
    
    //前置通知
    @Before(&quot;pointcut()&quot;)
    public void before(JoinPoint jp)&#123;
        System.out.println(jp.getSignature().getName());
        System.out.println(&quot;----------前置通知----------&quot;);
    &#125;
    
    //最终通知
    @After(&quot;pointcut()&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;
    
    //环绕通知
    @Around(&quot;execution(* com.zhangguo.Spring052.aop04.Math.s*(..))&quot;)
    public Object around(ProceedingJoinPoint pjp) throws Throwable&#123;
        System.out.println(pjp.getSignature().getName());
        System.out.println(&quot;----------环绕前置----------&quot;);
        Object result=pjp.proceed();
        System.out.println(&quot;----------环绕后置----------&quot;);
        return result;
    &#125;
    
    //返回结果通知
    @AfterReturning(pointcut=&quot;execution(* com.zhangguo.Spring052.aop04.Math.m*(..))&quot;,returning=&quot;result&quot;)
    public void afterReturning(JoinPoint jp,Object result)&#123;
        System.out.println(jp.getSignature().getName());
        System.out.println(&quot;结果是：&quot;+result);
        System.out.println(&quot;----------返回结果----------&quot;);
    &#125;
    
    //异常后通知
    @AfterThrowing(pointcut=&quot;execution(* com.zhangguo.Spring052.aop04.Math.d*(..))&quot;,throwing=&quot;exp&quot;)
    public void afterThrowing(JoinPoint jp,Exception exp)&#123;
        System.out.println(jp.getSignature().getName());
        System.out.println(&quot;异常消息：&quot;+exp.getMessage());
        System.out.println(&quot;----------异常通知----------&quot;);
    &#125;
&#125;</code></pre>
<h4 id="环绕通知注解配置特殊"><a class="markdownIt-Anchor" href="#环绕通知注解配置特殊"></a> 环绕通知注解配置（特殊）</h4>
<p><strong>@Around</strong></p>
<ul>
<li>作用：把当前方法看作环绕通知</li>
<li>属性
<ul>
<li>value：用于指定切入点表达式，还可以指定切入点表达式的引用</li>
</ul>
</li>
</ul>
<h4 id="定义通用切入点"><a class="markdownIt-Anchor" href="#定义通用切入点"></a> 定义通用切入点</h4>
<p>使用@PointCut注解在切面类中定义一个通用的切入点，其他通知可以引用该切入点</p>
<h4 id="零注解配置"><a class="markdownIt-Anchor" href="#零注解配置"></a> 零注解配置</h4>
<pre><code class="highlight plaintext">//声明改类是一个配置类
@Configuration
//将com.kkb包纳入注解扫描
@ComponentScan(basePackages=&quot;com.kkb&quot;)
//这个就相当于xml文件中的&lt;aop:aspectj-autoproxy/&gt;  AOP自动代理
@EnableAspectJAutoProxy
public class SpringConfiguration &#123;
//在配置中声明一个bean，相当于&lt;bean id=getUser /&gt; 
    @Bean 
    public User getUser()&#123; return new User(); &#125;

&#125;
</code></pre>
<h4 id="原理"><a class="markdownIt-Anchor" href="#原理"></a> 原理</h4>
<p>其实AOP的原理非常简单。我们以LoggingAspect.doAccessCheck()为例，要把它注入到UserService的每个public方法中，最简单的方法是编写一个子类，并持有原始实例的引用：</p>
<pre><code class="highlight plaintext">
@Aspect@Componentpublic class LoggingAspect &#123;
    // 在执行UserService的每个方法前执行:
    @Before(&quot;execution(public * com.itranswarp.learnjava.service.UserService.*(..))&quot;)
    public void doAccessCheck() &#123;
        System.err.println(&quot;[Before] do access check...&quot;);
    &#125;

    // 在执行MailService的每个方法前后执行:
    @Around(&quot;execution(public * com.itranswarp.learnjava.service.MailService.*(..))&quot;)
    public Object doLogging(ProceedingJoinPoint pjp) throws Throwable &#123;
        System.err.println(&quot;[Around] start &quot; + pjp.getSignature());
        Object retVal = pjp.proceed();
        System.err.println(&quot;[Around] done &quot; + pjp.getSignature());
        return retVal;
    &#125;
&#125;

//子类
public UserServiceAopProxy extends UserService &#123;
    private UserService target;
    private LoggingAspect aspect;

    public UserServiceAopProxy(UserService target, LoggingAspect aspect) &#123;
        this.target = target;
        this.aspect = aspect;
    &#125;

    public User login(String email, String password) &#123;
        // 先执行Aspect的代码:
        aspect.doAccessCheck();
        // 再执行UserService的逻辑:
        return target.login(email, password);
    &#125;

    public User register(String email, String password, String name) &#123;
        aspect.doAccessCheck();
        return target.register(email, password, name);
    &#125;

    ...
&#125;</code></pre>
<p>这些都是Spring容器启动时为我们自动创建的注入了Aspect的子类，它取代了原始的UserService（原始的UserService实例作为内部变量隐藏在UserServiceAopProxy中）。如果我们打印从Spring容器获取的UserService实例类型，它类似UserService$$EnhancerBySpringCGLIB$$1f44e01c，实际上是Spring使用CGLIB动态创建的子类，但对于调用方来说，感觉不到任何区别。</p>
<blockquote>
<p>Spring对接口类型使用JDK动态代理，对普通类使用CGLIB创建子类。如果一个Bean的class是final，Spring将无法为其创建子类。</p>
</blockquote>
<p>可见，虽然Spring容器内部实现AOP的逻辑比较复杂（需要使用AspectJ解析注解，并通过CGLIB实现代理类），但我们使用AOP非常简单，一共需要三步：</p>
<ul>
<li>定义执行方法，并在方法上通过AspectJ的注解告诉Spring应该在何处调用此方法；</li>
<li>标记@Component和@Aspect；</li>
<li>在@Configuration类上标注@EnableAspectJAutoProxy。</li>
</ul>
<h4 id="案例注解配置aop"><a class="markdownIt-Anchor" href="#案例注解配置aop"></a> 案例:注解配置AOP</h4>
<ul>
<li>在上一个示例中修改被代理的类Math,为了实现IOC扫描在Math类上注解了@Service并命名bean为math。相当于上一个示例中在xml配置文件中增加了一个bean，<!-- 被代理对象 --><bean ></bean>，Math类的代码如下：</li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop02;

import org.springframework.stereotype.Service;

/**
 * 被代理的目标类
 */
@Service(&quot;math&quot;)
public class Math&#123;
    //加
    public int add(int n1,int n2)&#123;
        int result=n1+n2;
        System.out.println(n1+&quot;+&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //减
    public int sub(int n1,int n2)&#123;
        int result=n1-n2;
        System.out.println(n1+&quot;-&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //乘
    public int mut(int n1,int n2)&#123;
        int result=n1*n2;
        System.out.println(n1+&quot;X&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
    
    //除
    public int div(int n1,int n2)&#123;
        int result=n1/n2;
        System.out.println(n1+&quot;/&quot;+n2+&quot;=&quot;+result);
        return result;
    &#125;
&#125;</code></pre>
<ul>
<li>修改通知类Advices，代码中有3个注解，@Component表示该类的实例会被Spring IOC容器管理；@Aspect表示声明一个切面；@Before表示before为前置通知，通过参数execution声明一个切点，Advices.java代码如下所示：</li>
</ul>
<blockquote>
<p>这个Java类就相当于<code>使用XML配置Spring MVC时候的&lt;aop:config&gt;</code> 的配置</p>
</blockquote>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop02;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.springframework.stereotype.Component;

/**
 * 通知类，横切逻辑
 *
 */
@Component
@Aspect
public class Advices &#123;
    @Before(&quot;execution(* com.zhangguo.Spring052.aop02.Math.*(..))&quot;)
    public void before(JoinPoint jp)&#123;
        System.out.println(&quot;----------前置通知----------&quot;);
        System.out.println(jp.getSignature().getName());
    &#125;
    
    @After(&quot;execution(* com.zhangguo.Spring052.aop02.Math.*(..))&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;
&#125;</code></pre>
<ul>
<li>上面Java类等同于下面的xml</li>
</ul>
<pre><code class="highlight plaintext">&lt;!-- 通知 --&gt;
    &lt;bean id=&quot;advices&quot; class=&quot;com.zhangguo.Spring052.aop01.Advices&quot;&gt;&lt;/bean&gt;
    
    &lt;!-- aop配置 --&gt;
    &lt;aop:config proxy-target-class=&quot;true&quot;&gt;
        &lt;!--切面 --&gt;
        &lt;aop:aspect ref=&quot;advices&quot;&gt;
            &lt;!-- 切点 --&gt;
            &lt;aop:pointcut expression=&quot;execution(* com.zhangguo.Spring052.aop01.Math.*(..))&quot; id=&quot;pointcut1&quot;/&gt;
            &lt;!--连接通知方法与切点 --&gt;
            &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
            &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;</code></pre>
<ul>
<li>Spring配置文件
<ul>
<li>新增配置文件aop02.xml，在配置IOC的基础上增加了aop:aspectj-autoproxy节点，Spring框架会自动为与AspectJ切面配置的Bean创建代理，proxy-target-属性表示被代理的目标对象是一个类，而非实现了接口的类，主要是为了选择不同的代理方式</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-4.3.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.3.xsd&quot;&gt;
        &lt;context:component-scan base-package=&quot;com.zhangguo.Spring052.aop02&quot;/&gt;
        &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;&gt;&lt;/aop:aspectj-autoproxy&gt;
&lt;/beans&gt;</code></pre>
<h4 id="aspectj切点函数"><a class="markdownIt-Anchor" href="#aspectj切点函数"></a> AspectJ切点函数</h4>
<h5 id="表达式类型"><a class="markdownIt-Anchor" href="#表达式类型"></a> 表达式类型</h5>
<ul>
<li>@AspectJ使用AspectJ专门的切点表达式描述切面，Spring所支持的AspectJ表达式可分为四类:
<ul>
<li>方法切点函数：通过描述目标类方法信息定义连接点。</li>
<li>方法参数切点函数：通过描述目标类方法入参信息定义连接点。</li>
<li>目标类切点函数：通过描述目标类类型信息定义连接点。</li>
<li>代理类切点函数：通过描述代理类信息定义连接点。</li>
</ul>
</li>
<li>标准的Aspectj Aop的pointcut的表达式类型很丰富，但是spring AOP只支持9种，另外加Spring Aop自己扩充的一种，一共是10种类型的表达式，分别如下
<ul>
<li>execution：满足匹配模式字符串的所有目标类方法的连接点</li>
<li>within：指定某些类型的全部方法执行，也可用来指定一个包。</li>
<li>this：Spring Aop是基于代理的，生成的bean也是一个代理对象，this就是这个代理对象，当这个对象可以转换为指定的类型时，对应的切入点就是它了，Spring Aop将生效。</li>
<li>target：当被代理的对象可以转换为指定的类型时，对应的切入点就是它了，Spring Aop将生效。</li>
<li>args：当执行的方法的参数是指定类型时生效。</li>
<li>@target：当代理的目标对象上拥有指定的注解时生效。</li>
<li>@args：当执行的方法参数类型上拥有指定的注解时生效。</li>
<li>@within：与@target类似，看官方文档和网上的说法都是@within只需要目标对象的类或者父类上有指定的注解，则@within会生效，而@target则是必须是目标对象的类上有指定的注解。而根据笔者的测试这两者都是只要目标类或父类上有指定的注解即可。</li>
<li>@annotation：当执行的方法上拥有指定的注解时生效。</li>
<li>bean：当调用的方法是指定的bean的方法时生效。</li>
</ul>
</li>
</ul>
<h5 id="使用示例案例"><a class="markdownIt-Anchor" href="#使用示例案例"></a> 使用示例，案例</h5>
<ul>
<li>新增一个类StrUtil</li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop03;

import org.springframework.stereotype.Component;

@Component(&quot;strUtil&quot;)
public class StrUtil &#123;
    public void show()&#123;
        System.out.println(&quot;Hello StrUtil!&quot;);
    &#125;
&#125;
</code></pre>
<ul>
<li>测试代码</li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop03;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Test &#123;

    public static void main(String[] args) &#123;
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;aop03.xml&quot;);
        IMath math = ctx.getBean(&quot;math&quot;, Math.class);
        int n1 = 100, n2 = 5;
        math.add(n1, n2);
        math.sub(n1, n2);
        math.mut(n1, n2);
        math.div(n1, n2);
        
        StrUtil strUtil=ctx.getBean(&quot;strUtil&quot;,StrUtil.class);
        strUtil.show();
    &#125;
&#125;</code></pre>
<ul>
<li><strong>execution</strong>
<ul>
<li>execution是使用的最多的一种Pointcut表达式，表示某个方法的执行</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">execution(modifiers-pattern? ret-type-pattern declaring-type-pattern? name-pattern(param-pattern) throws-pattern?)</code></pre>
<ol>
<li>modifiers-pattern表示方法的访问类型，public等；</li>
<li>ret-type-pattern表示方法的返回值类型，如String表示返回类型是String，“*”表示所有的返回类型；</li>
<li>declaring-type-pattern表示方法的声明类，如“com.elim…*”表示com.elim包及其子包下面的所有类型；</li>
<li>name-pattern表示方法的名称，如“add*”表示所有以add开头的方法名；</li>
<li>param-pattern表示方法参数的类型，name-pattern(param-pattern)其实是一起的表示的方法集对应的参数类型，如“add()”表示不带参数的add方法，“add(<em>)”表示带一个任意类型的参数的add方法，“add(</em>,String)”则表示带两个参数，且第二个参数是String类型的add方法；</li>
<li>throws-pattern表示异常类型；其中以问号结束的部分都是可以省略的。
<ol>
<li>“execution(* add())”匹配所有的不带参数的add()方法。</li>
<li>“execution(public * com…<em>.add</em>(…))”匹配所有com包及其子包下所有类的以add开头的所有public方法。</li>
<li>“execution(* *(…) throws Exception)”匹配所有抛出Exception的方法。</li>
</ol>
</li>
</ol>
<pre><code class="highlight plaintext">
@Component
@Aspect
public class Advices &#123;
    @Before(&quot;execution(* com.zhangguo.Spring052.aop03.Math.*(..))&quot;)
    public void before(JoinPoint jp)&#123;
        System.out.println(&quot;----------前置通知----------&quot;);
        System.out.println(jp.getSignature().getName());
    &#125;
    
    //execution切点函数
    //com.zhangguo.Spring052.aop03包下所有类的所有方法被切入
    @After(&quot;execution(* com.zhangguo.Spring052.aop03.*.*(..))&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;
&#125;</code></pre>
<ul>
<li><strong>within</strong>
<ul>
<li>within是用来指定类型，指定类型种的所有方法将被拦截
<ol>
<li>“within(com.spring.aop.service.UserServiceImpl)”匹配UserServiceImpl类对应对象的所有方法外部调用，而且这个对象只能是UserServiceImpl类型，不能是其子类型</li>
<li>“within(com.elim…*)”匹配com.elim包及其子包下面所有的类的所有方法的外部调用。</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">//within切点函数
    //com.zhangguo.Spring052.aop03包下所有类的所有方法被切入
    @After(&quot;within(com.zhangguo.Spring052.aop03.*)&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;</code></pre>
<p>%!(EXTRA markdown.ResourceType=, string=, string=)</p>
<ul>
<li><strong>this</strong>
<ul>
<li>Spring Aop是基于代理的，this就表示代理对象。this类型的Pointcut表达式的语法是this(type)，当生成的代理对象可以转换为type指定的类型时则表示匹配。基于JDK接口的代理和基于CGLIB的代理生成的代理对象是不一样的
<ol>
<li>“this(com.spring.aop.service.IUserService)”匹配生成的代理对象是IUserService类型的所有方法的外部调用</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">//this切点函数
    //实现了IMath接口的代理对象的任意连接点
    @After(&quot;this(com.zhangguo.Spring052.aop03.IMath)&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;</code></pre>
<p>%!(EXTRA markdown.ResourceType=, string=, string=)</p>
<ul>
<li><strong>target</strong>
<ul>
<li>Spring aop是基于代理的，target则表示被代理的布标对象，当被代理的目标对象可以被转换为指定的类型时则表示匹配
<ol>
<li>“target(com.spring.aop.service.IUserService)”则匹配所有被代理的目标对象能够转换为IUserService类型的所有方法的外部调用</li>
</ol>
</li>
</ul>
</li>
<li><strong>args</strong>
<ul>
<li>arge用来匹配方法参数
<ol>
<li>“args()”匹配任何不带参数的方法。</li>
<li>“args(java.lang.String)”匹配任何只带一个参数，而且这个参数的类型是String的方法。</li>
<li>“args(…)”带任意参数的方法。</li>
<li>“args(java.lang.String,…)”匹配带任意个参数，但是第一个参数的类型是String的方法</li>
<li>“args(…,java.lang.String)”匹配带任意个参数，但是最后一个参数的类型是String的方法</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre><code class="highlight plaintext">//args切点函数
    //要求方法有两个int类型的参考才会被织入横切逻辑
    @After(&quot;args(int,int)&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;</code></pre>
<p>%!(EXTRA markdown.ResourceType=, string=, string=)</p>
<ul>
<li><strong>@target</strong>
<ul>
<li>@target匹配当被代理的目标对象对应的类型及其父类型上拥有指定的注解时
<ol>
<li>“@target(com.spring.support.MyAnnotation)”匹配被代理的目标对象对应的类型上拥有MyAnnotation注解时</li>
</ol>
</li>
</ul>
</li>
<li><strong>@args</strong>
<ul>
<li>@args匹配被调用的方法上含有参数，且对应的参数类型上拥有指定的注解的情况
<ol>
<li>“@args(com.spring.support.MyAnnotation)”匹配方法参数类型上拥有MyAnnotation注解的方法调用。如我们有一个方法add(MyParam param)接收一个MyParam类型的参数，而MyParam这个类是拥有注解MyAnnotation的，则它可以被Pointcut表达式“@args(com.elim.spring.support.MyAnnotation)”匹配上</li>
</ol>
</li>
</ul>
</li>
<li><strong>@within</strong>
<ul>
<li>@within用于匹配被代理的目标对象对应的类型或其父类型拥有指定的注解的情况，但只有在调用拥有指定注解的类上的方法时才匹配
<ol>
<li>“@within(com.spring.support.MyAnnotation)”匹配被调用的方法声明的类上拥有MyAnnotation注解的情况。比如有一个ClassA上使用了注解MyAnnotation标注，并且定义了一个方法a()，那么在调用ClassA.a()方法时将匹配该Pointcut；如果有一个ClassB上没有MyAnnotation注解，但是它继承自ClassA，同时它上面定义了一个方法b()，那么在调用ClassB().b()方法时不会匹配该Pointcut，但是在调用ClassB().a()时将匹配该方法调用，因为a()是定义在父类型ClassA上的，且ClassA上使用了MyAnnotation注解。但是如果子类ClassB覆写了父类ClassA的a()方法，则调用ClassB.a()方法时也不匹配该Pointcut</li>
</ol>
</li>
</ul>
</li>
<li><strong>@annotation</strong>
<ul>
<li>@annotation用于匹配方法上拥有指定注解的情况
<ol>
<li>“@annotation(com.spring.support.MyAnnotation)”匹配所有的方法上拥有MyAnnotation注解的方法外部调用</li>
</ol>
</li>
</ul>
</li>
<li><code>先定义一个可以定义在方法上的注解</code></li>
</ul>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop03;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(&#123;ElementType.METHOD&#125;)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyAnno &#123;
&#125;</code></pre>
<pre><code class="highlight plaintext">//@annotation切点函数
    //要求方法必须被注解com.zhangguo.Spring052.aop03.MyAnno才会被织入横切逻辑
    @After(&quot;@annotation(com.zhangguo.Spring052.aop03.MyAnno)&quot;)
    public void after(JoinPoint jp)&#123;
        System.out.println(&quot;----------最终通知----------&quot;);
    &#125;</code></pre>
<pre><code class="highlight plaintext">package com.zhangguo.Spring052.aop03;

import org.springframework.stereotype.Component;

@Component(&quot;strUtil&quot;)
public class StrUtil &#123;
    @MyAnno
    public void show()&#123;
        System.out.println(&quot;Hello StrUtil!&quot;);
    &#125;
&#125;</code></pre>
<p>%!(EXTRA markdown.ResourceType=, string=, string=)</p>
<ul>
<li><strong>bean</strong>
<ul>
<li>bean用于匹配当调用的是指定的Spring的某个bean的方法时
<ol>
<li>“bean(abc)”匹配Spring Bean容器中id或name为abc的bean的方法调用</li>
<li>“bean(user*)”匹配所有id或name为以user开头的bean的方法调用</li>
</ol>
</li>
</ul>
</li>
</ul>
<h5 id="表达式组合"><a class="markdownIt-Anchor" href="#表达式组合"></a> 表达式组合</h5>
<ul>
<li>表达式组合就是表达式的逻辑运算，与，或，非。可以通过他们把表达式组合在一起
<ol>
<li>bean(userService) &amp;&amp; args()”匹配id或name为userService的bean的所有无参方法。</li>
<li>“bean(userService) || @annotation(MyAnnotation)”匹配id或name为userService的bean的方法调用，或者是方法上使用了MyAnnotation注解的方法调用。</li>
<li>“bean(userService) &amp;&amp; !args()”匹配id或name为userService的bean的所有有参方法调用。</li>
</ol>
</li>
</ul>
<h4 id="自定义注解装配aop"><a class="markdownIt-Anchor" href="#自定义注解装配aop"></a> 自定义注解装配AOP</h4>
<p>使用AspectJ的注解，并配合一个复杂的<code>execution(* xxx.Xyz.*(..))</code> 语法来定义应该如何装配AOP。</p>
<p>在实际项目中，这种写法其实很少使用。假设你写了一个SecurityAspect：</p>
<pre><code class="highlight plaintext">@Aspect
@Component
public class SecurityAspect &#123;
    @Before(&quot;execution(public * com.itranswarp.learnjava.service.*.*(..))&quot;)
    public void check() &#123;
        if (SecurityContext.getCurrentUser() == null) &#123;
            throw new RuntimeException(&quot;check failed&quot;);
        &#125;
    &#125;
&#125;</code></pre>
<p>基本能实现无差别全覆盖，即某个包下面的所有Bean的所有方法都会被这个check()方法拦截。</p>
<p>还有的童鞋喜欢用方法名前缀进行拦截：</p>
<pre><code class="highlight plaintext">@Around(&quot;execution(public * update*(..))&quot;)
public Object doLogging(ProceedingJoinPoint pjp) throws Throwable &#123;
    // 对update开头的方法切换数据源:
    String old = setCurrentDataSource(&quot;master&quot;);
    Object retVal = pjp.proceed();
    restoreCurrentDataSource(old);
    return retVal;
&#125;</code></pre>
<p>这种非精准打击误伤面更大，因为从方法前缀区分是否是数据库操作是非常不可取的。</p>
<p>我们在使用AOP时，要注意到虽然Spring容器可以把指定的方法通过AOP规则装配到指定的Bean的指定方法前后，但是，如果自动装配时，因为不恰当的范围，容易导致意想不到的结果，即很多不需要AOP代理的Bean也被自动代理了，并且，后续新增的Bean，如果不清楚现有的AOP装配规则，容易被强迫装配。</p>
<p>使用AOP时，被装配的Bean最好自己能清清楚楚地知道自己被安排了。例如，Spring提供的@Transactional就是一个非常好的例子。如果我们自己写的Bean希望在一个数据库事务中被调用，就标注上@Transactional。</p>
<p>通过@Transactional，某个方法是否启用了事务就一清二楚了。因此，装配AOP的时候，使用注解是最好的方式。</p>
<p>我们以一个实际例子演示如何使用注解实现AOP装配。为了监控应用程序的性能，我们定义一个性能监控的注解：</p>
<pre><code class="highlight plaintext">@Target(METHOD)
@Retention(RUNTIME)
public @interface MetricTime &#123;
    String value();
&#125;</code></pre>
<p>在需要被监控的关键方法上标注该注解：</p>
<pre><code class="highlight plaintext">@Component
public class UserService &#123;
    // 监控register()方法性能:
    @MetricTime(&quot;register&quot;)
    public User register(String email, String password, String name) &#123;
        ...
    &#125;
    ...
&#125;</code></pre>
<p>然后，我们定义MetricAspect：</p>
<pre><code class="highlight plaintext">@Aspect
@Component
public class MetricAspect &#123;
    @Around(&quot;@annotation(metricTime)&quot;)
    public Object metric(ProceedingJoinPoint joinPoint, MetricTime metricTime) throws Throwable &#123;
        String name = metricTime.value();
        long start = System.currentTimeMillis();
        try &#123;
            return joinPoint.proceed();
        &#125; finally &#123;
            long t = System.currentTimeMillis() - start;
            // 写入日志或发送至JMX:
            System.err.println(&quot;[Metrics] &quot; + name + &quot;: &quot; + t + &quot;ms&quot;);
        &#125;
    &#125;
&#125;</code></pre>
<p>注意metric()方法标注了@Around(“@annotation(metricTime)”)，它的意思是，符合条件的目标方法是带有@MetricTime注解的方法，因为metric()方法参数类型是MetricTime（注意参数名是metricTime不是MetricTime），我们通过它获取性能监控的名称。</p>
<p>有了@MetricTime注解，再配合MetricAspect，任何Bean，只要方法标注了@MetricTime注解，就可以自动实现性能监控。</p>
<p>%23%20Spring%20AOP%0A%5Btoc%5D%0A%23%23%20AOP%0A%E5%9C%A8%E8%BD%AF%E4%BB%B6%E4%B8%9A%EF%BC%8CAOP%E6%84%8F%E4%B8%BA%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%EF%BC%8C%E9%80%9A%E8%BF%87**%E9%A2%84%E7%BC%96%E8%AF%91%E6%96%B9%E5%BC%8F**%E6%88%96**%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86**%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E5%8A%9F%E8%83%BD%E7%9A%84%E7%BB%9F%E4%B8%80%E7%BB%B4%E6%8A%A4%E7%9A%84%E4%B8%80%E7%A7%8D%E6%8A%80%E6%9C%AF%EF%BC%8CAOP%E6%98%AFOOP%E7%9A%84%E5%BB%B6%E7%BB%AD%EF%BC%8C%E6%98%AF%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E7%83%AD%E7%82%B9%EF%BC%8C%E4%B9%9F%E6%98%AFspring%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E5%86%85%E5%AE%B9%EF%BC%8C%E6%98%AF%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%80%E7%A7%8D%E8%A1%8D%E7%94%9F%E6%B3%9B%E5%9E%8B%EF%BC%8C%E5%88%A9%E7%94%A8AOP%E5%8F%AF%E4%BB%A5%E5%AF%B9%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E5%90%84%E4%B8%AA%E9%83%A8%E5%88%86%E8%BF%9B%E8%A1%8C%E9%9A%94%E7%A6%BB%EF%BC%8C%E4%BB%8E%E8%80%8C%E6%98%AF%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%90%84%E9%83%A8%E5%88%86%E4%B9%8B%E9%97%B4%E8%80%A6%E5%90%88%E5%BA%A6%E9%99%8D%E4%BD%8E%EF%BC%8C%E6%8F%90%E9%AB%98%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8F%AF%E9%87%8D%E7%94%A8%E6%80%A7%EF%BC%8C%E5%90%8C%E6%97%B6%E6%8F%90%E9%AB%98%E4%BA%86%E5%BC%80%E5%8F%91%E7%9A%84%E6%95%88%E7%8E%87%0A!%5Bed68a81a67162e6bc2b9f3a81dd5019a.png%5D(en-resource%3A%2F%2Fdatabase%2F4280%3A1)%0A%0A!%5B1a646a6b790eb5d0d974729479c4e4da.png%5D(en-resource%3A%2F%2Fdatabase%2F4279%3A1)%0A%0A%0A%23%23%23%20%E6%84%8F%E5%9B%BE%0A*%20%E5%B0%86%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%EF%BC%8C%E6%80%A7%E8%83%BD%E7%BB%9F%E8%AE%A1%EF%BC%8C%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%EF%BC%8C%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%AD%89%E4%BB%A3%E7%A0%81%E4%BB%8E%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E4%BB%A3%E7%A0%81%E4%B8%AD%E5%88%92%E5%88%86%E5%87%BA%E6%9D%A5%EF%BC%8C%E9%80%9A%E8%BF%87%E5%AF%B9%E8%BF%99%E4%BA%9B%E8%A1%8C%E4%B8%BA%E7%9A%84%E5%88%86%E7%A6%BB%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B8%8C%E6%9C%9B%E5%8F%AF%E4%BB%A5%E5%B0%86%E5%AE%83%E4%BB%AC%E7%8B%AC%E7%AB%8B%E5%88%B0%E9%9D%9E%E6%8C%87%E5%AF%BC%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%AD%EF%BC%8C%E8%BF%9B%E8%80%8C%E6%94%B9%E5%8F%98%E8%BF%99%E4%BA%9B%E8%A1%8C%E4%B8%BA%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%8D%E5%BD%B1%E5%93%8D%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E4%BB%A3%E7%A0%81%0A%0A%23%23%23%20%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%0AAOP%E5%8F%AF%E4%BB%A5%E8%AF%B4%E6%98%AF%E5%AF%B9OOP%E7%9A%84%E8%A1%A5%E5%85%85%E5%92%8C%E5%AE%8C%E5%96%84%E3%80%82OOP%E5%BC%95%E5%85%A5%E5%B0%81%E8%A3%85%E3%80%81%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81%E6%80%A7%E7%AD%89%E6%A6%82%E5%BF%B5%E6%9D%A5%E5%BB%BA%E7%AB%8B%E4%B8%80%E7%A7%8D%E5%AF%B9%E8%B1%A1%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%EF%BC%8C%E7%94%A8%E4%BB%A5%E6%A8%A1%E6%8B%9F%E5%85%AC%E5%85%B1%E8%A1%8C%E4%B8%BA%E7%9A%84%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%E3%80%82%E5%AE%9E%E7%8E%B0AOP%E7%9A%84%E6%8A%80%E6%9C%AF%EF%BC%8C%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA%E4%B8%A4%E5%A4%A7%E7%B1%BB%EF%BC%9A%E4%B8%80%E6%98%AF%E9%87%87%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%EF%BC%8C%E5%88%A9%E7%94%A8%E6%88%AA%E5%8F%96%E6%B6%88%E6%81%AF%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%AF%B9%E8%AF%A5%E6%B6%88%E6%81%AF%E8%BF%9B%E8%A1%8C%E8%A3%85%E9%A5%B0%EF%BC%8C%E4%BB%A5%E5%8F%96%E4%BB%A3%E5%8E%9F%E6%9C%89%E5%AF%B9%E8%B1%A1%E8%A1%8C%E4%B8%BA%E7%9A%84%E6%89%A7%E8%A1%8C%EF%BC%9B%E4%BA%8C%E6%98%AF%E9%87%87%E7%94%A8%E9%9D%99%E6%80%81%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%BC%95%E5%85%A5%E7%89%B9%E5%AE%9A%E7%9A%84%E8%AF%AD%E6%B3%95%E5%88%9B%E5%BB%BA%E2%80%9C%E6%96%B9%E9%9D%A2%E2%80%9D%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BD%BF%E5%BE%97%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%BC%96%E8%AF%91%E6%9C%9F%E9%97%B4%E7%BB%87%E5%85%A5%E6%9C%89%E5%85%B3%E2%80%9C%E6%96%B9%E9%9D%A2%E2%80%9D%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%B1%9E%E4%BA%8E%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%0A%0A%0A%E5%9C%A8Java%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%AF%B9%E4%BA%8EAOP%E7%9A%84%E7%BB%87%E5%85%A5%EF%BC%8C%E6%9C%893%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A%0A*%20%E7%BC%96%E8%AF%91%E6%9C%9F%EF%BC%9A%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E7%94%B1%E7%BC%96%E8%AF%91%E5%99%A8%E6%8A%8A%E5%88%87%E9%9D%A2%E8%B0%83%E7%94%A8%E7%BC%96%E8%AF%91%E8%BF%9B%E5%AD%97%E8%8A%82%E7%A0%81%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E9%9C%80%E8%A6%81%E5%AE%9A%E4%B9%89%E6%96%B0%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97%E5%B9%B6%E6%89%A9%E5%B1%95%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8CAspectJ%E5%B0%B1%E6%89%A9%E5%B1%95%E4%BA%86Java%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97aspect%E6%9D%A5%E5%AE%9E%E7%8E%B0%E7%BB%87%E5%85%A5%EF%BC%9B%0A*%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%9A%E5%9C%A8%E7%9B%AE%E6%A0%87%E7%B1%BB%E8%A2%AB%E8%A3%85%E8%BD%BD%E5%88%B0JVM%E6%97%B6%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%8C%E5%AF%B9%E7%9B%AE%E6%A0%87%E7%B1%BB%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E9%87%8D%E6%96%B0%E2%80%9C%E5%A2%9E%E5%BC%BA%E2%80%9D%EF%BC%9B%0A*%20%E8%BF%90%E8%A1%8C%E6%9C%9F%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%88%87%E9%9D%A2%E9%83%BD%E6%98%AF%E6%99%AE%E9%80%9AJava%E7%B1%BB%EF%BC%8C%E9%80%9A%E8%BF%87JVM%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%8A%9F%E8%83%BD%E6%88%96%E8%80%85%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%AE%9E%E7%8E%B0%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%8A%A8%E6%80%81%E7%BB%87%E5%85%A5%E3%80%82%0A%0A%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%8CSpring%E7%9A%84AOP%E5%AE%9E%E7%8E%B0%E5%B0%B1%E6%98%AF%E5%9F%BA%E4%BA%8EJVM%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E3%80%82%E7%94%B1%E4%BA%8EJVM%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%A6%81%E6%B1%82%E5%BF%85%E9%A1%BB%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%B1%BB%E6%B2%A1%E6%9C%89%E4%B8%9A%E5%8A%A1%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B0%B1%E9%9C%80%E8%A6%81%E9%80%9A%E8%BF%87CGLIB%E6%88%96%E8%80%85Javassist%E8%BF%99%E4%BA%9B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%AE%9E%E7%8E%B0%E3%80%82%0A%23%23%23%20%E4%BD%9C%E7%94%A8%2F%E4%BC%98%E5%8A%BF%0A**%E4%BD%9C%E7%94%A8%EF%BC%9A**%0A%0AAOP%E9%87%87%E5%8F%96%E6%A8%AA%E5%90%91%E6%8A%BD%E5%8F%96%E6%9C%BA%E5%88%B6%EF%BC%8C%E5%8F%96%E4%BB%A3%E4%BA%86%E4%BC%A0%E7%BB%9F%E7%BA%B5%E5%90%91%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB%E7%9A%84%E9%87%8D%E5%A4%8D%E6%80%A7%E4%BB%A3%E7%A0%81%EF%BC%88%E6%80%A7%E8%83%BD%E7%9B%91%E8%A7%86%EF%BC%8C%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%8C%E5%AE%89%E5%85%A8%E6%A3%80%E6%9F%A5%EF%BC%8C%E7%BC%93%E5%AD%98%EF%BC%89%0A%0A%E5%9C%A8%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%9C%9F%E9%97%B4%EF%BC%8C%E4%B8%8D%E4%BF%AE%E6%94%B9%E6%BA%90%E7%A0%81%E5%AF%B9%E5%B7%B2%E6%9C%89%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%0A%0A%E5%B0%86%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%A4%84%E7%90%86%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%88%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%EF%BC%8C%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%8C%E6%93%8D%E4%BD%9C%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%EF%BC%89%E8%A7%A3%E8%80%A6%0A%0A**%E4%BC%98%E5%8A%BF%EF%BC%9A**%0A*%20%E5%87%8F%E5%B0%91%E9%87%8D%E5%A4%8D%E4%BB%A3%E7%A0%81%0A*%20%E6%8F%90%E9%AB%98%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%0A*%20%E7%BB%B4%E6%8A%A4%E6%96%B9%E4%BE%BF%0A%0A%23%23%23%20Spring%20%E6%A1%86%E6%9E%B6%E7%9A%84AOP%0A%0A*%20Spring%20%E6%A1%86%E6%9E%B6%E7%9A%84%E4%B8%80%E4%B8%AA%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E6%98%AF**%E9%9D%A2%E5%90%91%E6%96%B9%E9%9D%A2%E7%9A%84%E7%BC%96%E7%A8%8B**(AOP)%E6%A1%86%E6%9E%B6%E3%80%82%E9%9D%A2%E5%90%91%E6%96%B9%E9%9D%A2%E7%9A%84%E7%BC%96%E7%A8%8B%E9%9C%80%E8%A6%81%E6%8A%8A%E7%A8%8B%E5%BA%8F%E9%80%BB%E8%BE%91%E5%88%86%E8%A7%A3%E6%88%90%E4%B8%8D%E5%90%8C%E7%9A%84%E9%83%A8%E5%88%86%E7%A7%B0%E4%B8%BA%E6%89%80%E8%B0%93%E7%9A%84%E5%85%B3%E6%B3%A8%E7%82%B9%E3%80%82%E8%B7%A8%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%A4%9A%E4%B8%AA%E7%82%B9%E7%9A%84%E5%8A%9F%E8%83%BD%E8%A2%AB%E7%A7%B0%E4%B8%BA**%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9**%EF%BC%8C%E8%BF%99%E4%BA%9B%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%E5%9C%A8%E6%A6%82%E5%BF%B5%E4%B8%8A%E7%8B%AC%E7%AB%8B%E4%BA%8E%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E3%80%82%E6%9C%89%E5%90%84%E7%A7%8D%E5%90%84%E6%A0%B7%E7%9A%84%E5%B8%B8%E8%A7%81%E7%9A%84%E5%BE%88%E5%A5%BD%E7%9A%84%E6%96%B9%E9%9D%A2%E7%9A%84%E4%BE%8B%E5%AD%90%EF%BC%8C%E5%A6%82%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E3%80%81%E5%AE%A1%E8%AE%A1%E3%80%81%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E3%80%81%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E7%BC%93%E5%AD%98%E7%AD%89%E3%80%82%0A*%20%E5%9C%A8%20OOP%20%E4%B8%AD%EF%BC%8C%E5%85%B3%E9%94%AE%E5%8D%95%E5%85%83%E6%A8%A1%E5%9D%97%E5%BA%A6%E6%98%AF%E7%B1%BB%EF%BC%8C%E8%80%8C%E5%9C%A8%20AOP%20%E4%B8%AD%E5%8D%95%E5%85%83%E6%A8%A1%E5%9D%97%E5%BA%A6%E6%98%AF%E6%96%B9%E9%9D%A2%E3%80%82%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E5%B8%AE%E5%8A%A9%E4%BD%A0%E5%AF%B9%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%AF%B9%E8%B1%A1%E7%9B%B8%E4%BA%92%E8%A7%A3%E8%80%A6%E5%92%8C%20AOP%20%E5%8F%AF%E4%BB%A5%E5%B8%AE%E5%8A%A9%E4%BD%A0%E4%BB%8E%E5%AE%83%E4%BB%AC%E6%89%80%E5%BD%B1%E5%93%8D%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%AD%E5%AF%B9%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%E8%A7%A3%E8%80%A6%E3%80%82%0A*%20**%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%EF%BC%9A**%20%E8%B7%A8%E8%B6%8A%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%A4%9A%E4%B8%AA%E6%A8%A1%E5%9D%97%E7%9A%84%E6%96%B9%E6%B3%95%E6%88%96%E5%8A%9F%E8%83%BD%E3%80%82%EF%BC%88%E8%BD%AF%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%81%9A%E7%94%B1%E4%B8%80%E7%BB%84%E5%85%B3%E6%B3%A8%E7%82%B9%E5%8D%B3%E4%B8%9A%E5%8A%A1%E6%88%96%E5%8A%9F%E8%83%BD%E6%88%96%E6%96%B9%E6%B3%95%E7%BB%84%E6%88%90%EF%BC%8C%E5%85%B6%E4%B8%AD%EF%BC%8C%E7%9B%B4%E6%8E%A5%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%85%B3%E6%B3%A8%E7%82%B9%E6%98%AF%E7%9B%B4%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%EF%BC%8C%E8%80%8C%E4%B8%BA%E7%9B%B4%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%E6%9C%8D%E5%8A%A1%E7%9A%84%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%EF%BC%89%EF%BC%8C%E5%8D%B3%E4%B8%8E%E6%88%91%E4%BB%AC%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%97%A0%E5%85%B3%E7%9A%84%EF%BC%8C%E4%BD%86%E6%98%AF%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%85%B3%E6%B3%A8%E7%9A%84%E9%83%A8%E5%88%86%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%A8%AA%E5%88%87%E5%85%B3%E6%B3%A8%E7%82%B9%0A%23%23%23%23%20AOP%E6%9C%AF%E8%AF%AD%0A%0A%7C%20%E9%A1%B6%20%7C%20%E6%8F%8F%E8%BF%B0%20%7C%0A%7C%20—%20%7C%20—%20%7C%0A%7C%20%E5%88%87%E9%9D%A2(Aspect)%20%7C%20%E6%98%AF%E5%88%87%E5%85%A5%E7%82%B9%E5%92%8C%E9%80%9A%E7%9F%A5%E7%9A%84%E7%BB%93%E5%90%88%20%7C%0A%7C%20%E7%9B%AE%E6%A0%87(Target)%20%7C%20%E8%A2%AB%E9%80%9A%E7%9F%A5%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8D%B3%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%20%7C%0A%7C%20%E4%BB%A3%E7%90%86(Proxy)%20%7C%20%E4%B8%80%E4%B8%AA%E7%B1%BB%E8%A2%ABAOP%E7%BB%87%E5%85%A5%E5%A2%9E%E5%BC%BA%E5%90%8E%EF%BC%8C%E5%B0%B1%E4%BA%A7%E7%94%9F%E4%B8%80%E4%B8%AA%E7%BB%93%E6%9E%9C%E4%BB%A3%E7%90%86%E7%B1%BB%20%7C%0A%7C%20%E5%88%87%E5%85%A5%E7%82%B9(PointCut)%20%7C%20%E5%88%87%E9%9D%A2%E9%80%9A%E7%9F%A5%E6%89%A7%E8%A1%8C%E7%9A%84%E2%80%9C%E5%9C%B0%E7%82%B9%E2%80%9D%E7%9A%84%E5%AE%9A%E4%B9%89%EF%BC%9B%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9C%9F%E6%AD%A3%E8%A2%AB%E5%88%87%E9%9D%A2%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%88%87%E5%85%A5%E7%82%B9%E4%B8%80%E5%AE%9A%E6%98%AF%E8%BF%9E%E6%8E%A5%E7%82%B9%EF%BC%8C%E4%BD%86%E8%BF%9E%E6%8E%A5%E7%82%B9%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%98%AF%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAfinal%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E4%B8%8D%E8%83%BD%E4%BD%9C%E7%94%A8%E8%BF%9E%E6%8E%A5%E7%82%B9%E4%B8%8E%E5%88%87%E5%85%A5%E7%82%B9%E7%9A%84%20%7C%0A%7C%20%E8%BF%9E%E6%8E%A5%E7%82%B9(JointPoint)%20%7C%20%E4%B8%8E%E5%88%87%E5%85%A5%E7%82%B9%E5%8C%B9%E9%85%8D%E7%9A%84%E6%89%A7%E8%A1%8C%E7%82%B9%EF%BC%8C%E5%8D%B3%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%B8%AD%E5%8F%AF%E4%BB%A5%E8%A2%AB%E5%88%87%E9%9D%A2%EF%BC%88%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%EF%BC%89%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%89%80%E6%9C%89%E8%A6%81%E7%9B%91%E6%8E%A7%E7%9A%84%E6%96%B9%E6%B3%95%E9%83%BD%E7%A7%B0%E4%B8%BA%E8%BF%9E%E6%8E%A5%E7%82%B9%EF%BC%8C%E5%B0%B1%E6%98%AF**%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95**%20%7C%0A%7C%20%E9%80%9A%E7%9F%A5(Advice)%20%7C%20%E9%80%9A%E7%9F%A5%E6%98%AF%E5%88%87%E9%9D%A2%EF%BC%88%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%EF%BC%89%E7%9A%84%E4%B8%80%E7%A7%8D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%AE%8C%E6%88%90%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%87%E5%85%A5%E5%8A%9F%E8%83%BD%E3%80%82%E9%80%9A%E7%9F%A5%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%B9%89%E5%88%87%E9%9D%A2%E7%BB%87%E5%85%A5%E7%9A%84%E6%97%B6%E9%97%B4%E7%82%B9%EF%BC%8C%E5%88%87%E5%85%A5%E7%82%B9%E5%AE%9A%E4%B9%89%E4%BA%86%E5%88%87%E9%9D%A2%E7%BB%87%E5%85%A5%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%9B**%E9%92%88%E5%AF%B9%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B8%8D%E5%A4%9F%E7%81%B5%E6%B4%BB**%20%7C%0A%7C%20%E9%A1%BE%E9%97%AE(Advisor)%20%7C%20%E9%A1%BE%E9%97%AE%E6%98%AF%E5%88%87%E9%9D%A2%EF%BC%88%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%EF%BC%89%E7%9A%84%E4%B8%80%E7%A7%8D%EF%BC%8C%E8%83%BD%E5%A4%9F%E5%B0%86%E9%80%9A%E7%9F%A5%E4%BB%A5%E6%9B%B4%E4%B8%BA%E5%A4%8D%E6%9D%82%E7%9A%84%E7%9A%84%E6%96%B9%E5%BC%8F%E7%BB%87%E5%85%A5%E5%88%B0%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%B8%AD%EF%BC%8C%E6%98%AF%E5%B0%86%E9%80%9A%E7%9F%A5%E5%8C%85%E8%A3%85%E4%B8%BA%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E5%88%87%E9%9D%A2%E7%9A%84%E8%A3%85%E9%85%8D%E5%99%A8%20%7C%0A%0A!%5Bf1de713ace79cf9d6fa0f0a2a940d506.png%5D(en-resource%3A%2F%2Fdatabase%2F1015%3A1)%0A%0A!%5B6cbc28f4ef49c048a16e392bab58bfa0.png%5D(en-resource%3A%2F%2Fdatabase%2F1008%3A1)%0A%0A%23%23%20AOP%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%9E%8B%0A%0A%23%23%23%20%E7%B1%BB%E5%9E%8B%0A%23%23%23%23%20Spring%E8%87%AA%E8%BA%AB%E5%AE%9E%E7%8E%B0%0A1.%20<strong>ProxyFactory</strong>%EF%BC%9A%3Cu%3E%E7%BC%96%E7%A8%8B%E5%BC%8F%3C%2Fu%3E%E4%BD%BF%E7%94%A8AOP%0A2.%20<strong>ProxyFactoryBean</strong>%EF%BC%9A%3Cu%3E%E5%A3%B0%E6%98%8E%E5%BC%8F%3C%2Fu%3E%E4%BD%BF%E7%94%A8AOP%EF%BC%8C%E4%B8%93%E9%97%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B7%A5%E5%8E%82%0A%20%20%20%20*%20<strong>Advice%E9%80%9A%E7%9F%A5</strong>%20%E4%BD%BF%E7%94%A8%E6%9B%B4%E7%AE%80%E5%8D%95%0A%20%20%20%20*%20<strong>Advisor%E9%A1%BE%E9%97%AE</strong>%20%E6%93%8D%E7%BA%B5%E6%9B%B4%E7%81%B5%E6%B4%BB%0A%0A%3E%20%E5%BA%95%E5%B1%82%E5%8F%88%E5%88%86%E4%B8%BA<strong>JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0</strong>%20%E5%92%8C%20<strong>CGLib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0</strong>%0A%0A%23%23%23%23%20AspectJ%E5%AE%9E%E7%8E%B0%0A1.%20<strong>AspectJProxyFactory</strong>%EF%BC%9A%E9%9B%86%E6%88%90spring%E4%B8%8EAspect%E5%AE%9E%E7%8E%B0AOP%0A%0A%0A!%5B8b2720317ad74dc6d20fe320a0508d84.png%5D(en-resource%3A%2F%2Fdatabase%2F1010%3A1)%0A%0A*%20**%E8%BF%99%E4%B8%89%E4%B8%AA%E7%B1%BB%E9%83%BD%E7%BB%A7%E6%89%BF%E8%87%AA**%0A%20%20%20%20*%20ProxyConfig%EF%BC%9A%E6%8F%90%E4%BE%9B%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%0A%20%20%20%20*%20AdvisedSupport%EF%BC%9A%E5%B0%81%E8%A3%85%E4%BA%86%E9%80%9A%E7%9F%A5%E4%B8%8E%E9%80%9A%E7%9F%A5%E5%99%A8%0A%20%20%20%20*%20ProxyCreatorSupport%EF%BC%9A%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E8%BE%85%E5%8A%A9%E7%B1%BB%0A%0A%0A%23%23%23%20AOP%E5%AE%9E%E7%8E%B0%E4%B9%8BAspectJ%0A%0AAspectJ%E6%98%AF%E4%B8%80%E4%B8%AAjava%E5%AE%9E%E7%8E%B0%E7%9A%84AOP%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%AE%83%E8%83%BD%E5%A4%9F%E5%AF%B9java%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8CAOP%E7%BC%96%E8%AF%91%EF%BC%88%E4%B8%80%E8%88%AC%E5%9C%A8%E7%BC%96%E8%AF%91%E6%9C%9F%E8%BF%9B%E8%A1%8C%EF%BC%89%EF%BC%8C%E8%AE%A9java%E4%BB%A3%E7%A0%81%E5%85%B7%E6%9C%89AspectJ%E7%9A%84AOP%E5%8A%9F%E8%83%BD%EF%BC%88%E5%BD%93%E7%84%B6%E9%9C%80%E8%A6%81%E7%89%B9%E6%AE%8A%E7%9A%84%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%89%0A%0A%E5%8F%AF%E4%BB%A5%E8%BF%99%E6%A0%B7%E8%AF%B4AspectJ%E6%98%AF%E7%9B%AE%E5%89%8D%E5%AE%9E%E7%8E%B0AOP%E6%A1%86%E6%9E%B6%E4%B8%AD%E6%9C%80%E6%88%90%E7%86%9F%EF%BC%8C%E5%8A%9F%E8%83%BD%E6%9C%80%E4%B8%B0%E5%AF%8C%E7%9A%84%E8%AF%AD%E8%A8%80%EF%BC%8C%E6%9B%B4%E5%B9%B8%E8%BF%90%E7%9A%84%E6%98%AF%EF%BC%8CAspectJ%E4%B8%8Ejava%E7%A8%8B%E5%BA%8F%E5%AE%8C%E5%85%A8%E5%85%BC%E5%AE%B9%EF%BC%8C%E5%87%A0%E4%B9%8E%E6%98%AF%E6%97%A0%E7%BC%9D%E5%85%B3%E8%81%94%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AF%B9%E4%BA%8E%E6%9C%89java%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%8C%E4%B8%8A%E6%89%8B%E5%92%8C%E4%BD%BF%E7%94%A8%E9%83%BD%E9%9D%9E%E5%B8%B8%E5%AE%B9%E6%98%93%E3%80%82%0A%0A%E4%BA%86%E8%A7%A3AspectJ%E5%BA%94%E7%94%A8%E5%88%B0java%E4%BB%A3%E7%A0%81%E7%9A%84%E8%BF%87%E7%A8%8B%EF%BC%88%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E7%A7%B0%E4%B8%BA%E7%BB%87%E5%85%A5%EF%BC%89%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%BB%87%E5%85%A5%E8%BF%99%E4%B8%AA%E6%A6%82%E5%BF%B5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%E4%B8%BAaspect(%E5%88%87%E9%9D%A2)%E5%BA%94%E7%94%A8%E5%88%B0%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0(%E7%B1%BB)%E7%9A%84%E8%BF%87%E7%A8%8B%E3%80%82%0A%0A%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%EF%BC%8C**%E4%B8%80%E8%88%AC%E5%88%86%E4%B8%BA%E5%8A%A8%E6%80%81%E7%BB%87%E5%85%A5%E5%92%8C%E9%9D%99%E6%80%81%E7%BB%87%E5%85%A5%EF%BC%8C%E5%8A%A8%E6%80%81%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E5%B0%86%E8%A6%81%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E7%BB%87%E5%85%A5%E5%88%B0%E7%9B%AE%E6%A0%87%E7%B1%BB%E4%B8%AD**%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%BE%80%E5%BE%80%E6%98%AF%E9%80%9A%E8%BF%87%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%E5%AE%8C%E6%88%90%E7%9A%84%EF%BC%8C%E5%A6%82%3Cu%3EJava%20JDK%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(Proxy%EF%BC%8C%E5%BA%95%E5%B1%82%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0)%3C%2Fu%3E%E6%88%96%E8%80%85%3Cu%3ECGLIB%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(%E5%BA%95%E5%B1%82%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0)%3C%2Fu%3E%EF%BC%8CSpring%20AOP%E9%87%87%E7%94%A8%E7%9A%84%E5%B0%B1%E6%98%AF%E5%9F%BA%E4%BA%8E%E8%BF%90%E8%A1%8C%E6%97%B6%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%0A%0A<strong>ApectJ%E9%87%87%E7%94%A8%E7%9A%84%E5%B0%B1%E6%98%AF%E9%9D%99%E6%80%81%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F</strong>%E3%80%82ApectJ%E4%B8%BB%E8%A6%81%E9%87%87%E7%94%A8%E7%9A%84%E6%98%AF%E7%BC%96%E8%AF%91%E6%9C%9F%E7%BB%87%E5%85%A5%EF%BC%8C%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%9C%9F%E9%97%B4%E4%BD%BF%E7%94%A8AspectJ%E7%9A%84acj%E7%BC%96%E8%AF%91%E5%99%A8(%E7%B1%BB%E4%BC%BCjavac)%E6%8A%8Aaspect%E7%B1%BB%E7%BC%96%E8%AF%91%E6%88%90class%E5%AD%97%E8%8A%82%E7%A0%81%E5%90%8E%EF%BC%8C%E5%9C%A8java%E7%9B%AE%E6%A0%87%E7%B1%BB%E7%BC%96%E8%AF%91%E6%97%B6%E7%BB%87%E5%85%A5%EF%BC%8C%E5%8D%B3%E5%85%88%E7%BC%96%E8%AF%91aspect%E7%B1%BB%E5%86%8D%E7%BC%96%E8%AF%91%E7%9B%AE%E6%A0%87%E7%B1%BB%E3%80%82%0A%0A<strong>spring%E6%95%B4%E5%90%88%E4%BA%86ApectJ%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E5%BA%95%E5%B1%82%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8acj%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8C%E8%80%8C%E6%98%AF%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF</strong>%0A%0A!%5B684cc877c0b4266dc290fdf4ad997f10.png%5D(en-resource%3A%2F%2Fdatabase%2F1017%3A2)%0A%0A%23%23%23%20AOP%E5%AE%9E%E7%8E%B0%E4%B9%8BSpring%20AOP%0A**%E6%9C%AC%E8%B4%A8%E7%9B%AE%E7%9A%84%E5%B0%B1%E6%98%AF%E5%AF%B9%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%AE%80%E5%8C%96%EF%BC%8C%E4%B8%BA%E4%BA%86%E6%96%B9%E4%BE%BF%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E7%AE%80%E5%8C%96%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86**%0A%0Aspring%20AOP%E6%98%AF%E9%80%9A%E8%BF%87**%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0**%E7%9A%84%0A%0A*%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%EF%BC%88%E5%8F%8D%E5%B0%84%EF%BC%89%EF%BC%9A**%E5%9F%BA%E4%BA%8EJDK%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86**%E5%92%8C%E4%BD%BF%E7%94%A8<strong>CGLib%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86</strong>%0A*%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F%E9%80%89%E6%8B%A9%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%98%AF%E5%90%A6%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E6%9D%A5%E9%80%89%E6%8B%A9%E5%93%AA%E7%A7%8D%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F%0A%0A!%5B190c537f5e1b7054e148f07281d52a7e.png%5D(en-resource%3A%2F%2Fdatabase%2F1016%3A1)%0A%0A%23%23%23%23%20%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%0A1.%20%E5%A3%B0%E6%98%8E%E6%8E%A5%E5%8F%A3%EF%BC%9A%E6%B3%A8%E5%86%8C%E9%9C%80%E8%A6%81%E8%A2%AB%E7%9B%91%E5%90%AC%E8%A1%8C%E4%B8%BA%E7%9A%84%E5%90%8D%E7%A7%B0%0A2.%20%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%9A%E6%89%AE%E6%BC%94%E8%A2%AB%E7%9B%91%E6%8E%A7%E7%9A%84%E7%B1%BB%EF%BC%8C%E8%B4%9F%E8%B4%A3%E8%A2%AB%E7%9B%91%E5%90%AC%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82%0A3.%20InvocationHanler%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%9A%0A%20%20%20%20*%20%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%2F%E5%A2%9E%E5%BC%BA%E4%B8%9A%E5%8A%A1%0A%20%20%20%20*%20%E5%B0%86%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%E4%B8%8E%E8%A2%AB%E7%9B%91%E5%90%AC%E6%96%B9%E6%B3%95%E7%BB%91%E5%AE%9A%E6%89%A7%E8%A1%8C%0A4.%20%E4%BB%A3%E7%90%86%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%EF%BC%9A%0A%20%20%20%20*%20%E8%A2%AB%E7%9B%91%E6%8E%A7%E7%B1%BB%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%A2%AB%E7%9B%91%E6%8E%A7%E7%B1%BB%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8CInvocationHanler%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1%0A%0A%23%23%23%23%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%0A1.%20%E5%9F%BA%E4%BA%8EJDK%EF%BC%88%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%EF%BC%89%0A2.%20%E4%BD%BF%E7%94%A8CGLib%EF%BC%88%E9%83%BD%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%EF%BC%89%0A%0ASpring%E4%B8%A4%E7%A7%8D%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%E9%83%BD%E6%9C%89%E4%BD%BF%E7%94%A8%EF%BC%8C%E9%80%9A%E8%BF%87%E6%98%AF%E5%90%A6%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E6%9D%A5%E5%88%A4%E6%96%AD%E7%94%A8%E5%93%AA%E4%B8%AA%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%0A%0A%23%23%23%23%23%20JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%0A**%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%BF%85%E9%A1%BB%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3**%0A%0A%E4%BD%BF%E7%94%A8Proxy%E7%B1%BB%E6%9D%A5%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%60%60%60java%0A%C2%A0%C2%A0%C2%A0%20%2F**%0A%C2%A0%C2%A0%C2%A0%C2%A0%20*%20%E4%BD%BF%E7%94%A8JDK%E7%9A%84%E6%96%B9%E5%BC%8F%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%20*%20%40author%20Administrator%0A%C2%A0%C2%A0%C2%A0%C2%A0%20*%2F%0A%C2%A0%C2%A0%C2%A0%20public%20class%20MyProxyUtils%20%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20public%20static%20UserService%20getProxy(final%20UserService%20service)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FPorxy%E6%98%AFJDK%E4%B8%AD%E7%9A%84API%E7%B1%BB%0A%20%20%20%20%20%20%20%20%2F%2F%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E7%9B%AE%E6%A0%87%E9%98%9F%E5%BD%A2%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%0A%20%20%20%20%20%20%20%20%2F%2F%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8E%A5%E5%8F%A3%0A%20%20%20%20%20%20%20%20%2F%2F%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A7%E8%A1%8C%E5%A4%84%E7%90%86%E5%99%A8%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E4%BD%BF%E7%94%A8Proxy%E7%B1%BB%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20UserService%20proxy%20%3D%20%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20(UserService)%20Proxy.newProxyInstance(%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20service.getClass().getClassLoader()%2C%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20service.getClass().getInterfaces()%2C%20%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20new%20InvocationHandler()%20%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E4%B8%80%E6%89%A7%E8%A1%8C%EF%BC%8Cinvoke%E6%96%B9%E6%B3%95%E5%B0%B1%E4%BC%9A%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20public%20Object%20invoke(Object%20proxy%2C%20Method%20method%2C%20Object%5B%5D%20args)%20throws%20Throwable%20%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20if(%22save%22.equals(method.getName()))%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20System.out.println(%22%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97…%22)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E8%AE%A9service%E7%B1%BB%E7%9A%84save%E6%88%96%E8%80%85update%E6%96%B9%E6%B3%95%E6%AD%A3%E5%B8%B8%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%8B%E5%8E%BB%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20return%20method.invoke(service%2C%20args)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E8%BF%94%E5%9B%9E%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20return%20proxy%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D%0A%C2%A0%C2%A0%C2%A0%20%7D%0A%60%60%60%0A%0A%23%23%23%23%23%20CGLib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%0A**%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3**%0A%E5%BA%95%E5%B1%82%E6%98%AF%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%BA%A7%E7%94%9F%E4%BB%A3%E7%90%86%E5%AD%90%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%BB%A3%E7%90%86%E5%AD%90%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%BB%A7%E6%89%BF%E4%BA%86%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%E5%B9%B6%E5%8F%AF%E4%BB%A5%E5%AF%B9%E8%AF%A5%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%EF%BC%89%0A%0A%60%60%60java%0Apublic%20static%20UserService%20getProxy()%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E5%88%9B%E5%BB%BACGLIB%E6%A0%B8%E5%BF%83%E7%9A%84%E7%B1%BB%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20Enhancer%20enhancer%20%3D%20new%20Enhancer()%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E8%AE%BE%E7%BD%AE%E7%88%B6%E7%B1%BB%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20enhancer.setSuperclass(UserServiceImpl.class)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E8%AE%BE%E7%BD%AE%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20enhancer.setCallback(new%20MethodInterceptor()%20%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%40Override%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20public%20Object%20intercept(Object%20obj%2C%20Method%20method%2C%20Object%5B%5D%20args%2C%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20MethodProxy%20methodProxy)%20throws%20Throwable%20%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20if(%22save%22.equals(method.getName()))%7B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20System.out.println(%22%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%E4%BA%86…%22)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20return%20methodProxy.invokeSuper(obj%2C%20args)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%7D)%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%2F%2F%20%E7%94%9F%E6%88%90%E5%A2%9E%E5%BC%BA%E4%B9%8B%E5%90%8E%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20UserService%20proxy%20%3D%20(UserService)%20enhancer.create()%3B%0A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20return%20proxy%3B%0A%C2%A0%C2%A0%C2%A0%20%7D%0A%60%60%60%0A%23%23%23%23%20Spring%20AOP%EF%BC%9A%E7%AE%80%E5%8C%96%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%0A1.%20%E5%A3%B0%E6%98%8E%E6%8E%A5%E5%8F%A3%EF%BC%9A%E6%B3%A8%E5%86%8C%E9%9C%80%E8%A6%81%E8%A2%AB%E7%9B%91%E5%90%AC%E8%A1%8C%E4%B8%BA%E5%90%8D%E7%A7%B0%0A2.%20%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%9A%E6%89%AE%E6%BC%94%E8%A2%AB%E7%9B%91%E6%8E%A7%E7%9A%84%E7%B1%BB%EF%BC%8C%E8%B4%9F%E8%B4%A3%E8%A2%AB%E7%9B%91%E5%90%AC%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82%0A3.%20%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%2F%E5%A2%9E%E5%BC%BA%E4%B8%9A%E5%8A%A1%0A%0A**%E6%89%80%E4%BB%A5%E8%AF%B4spring%20AOP%E5%90%A7%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%845%E4%B8%AA%E6%AD%A5%E9%AA%A4%E7%9C%81%E7%95%A5%E4%B8%BA3%E4%B8%AA%E6%AD%A5%E9%AA%A4%EF%BC%8C%E5%8F%AA%E9%9C%80%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%85%B3%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB%EF%BC%8C%E5%86%8D%E5%8A%A0%E4%BB%A5%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F**%0A%0ASpring%20AOP%E4%B8%AD%E7%9A%84%E6%96%B0%E5%A2%9E%E5%90%8D%E8%AF%8D%E4%B9%9F%E5%9F%BA%E6%9C%AC%E9%83%BD%E6%98%AF%E4%B8%BA%E4%BA%86%E4%B8%8A%E8%BF%B0%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%80%8C%E6%9C%8D%E5%8A%A1%E7%9A%84%EF%BC%8C%E5%AE%83%E7%9A%84**%E6%9C%AC%E8%B4%A8%E5%B0%B1%E6%98%AF%E4%B8%BA%E4%BA%86%E7%AE%80%E5%8C%96%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0**%0A%0A%0A%23%23%20Spring%20AOP%20%E4%BD%BF%E7%94%A8%0A%0ASpring%20AOP%E6%98%AF%E6%8C%87Spring%E8%87%AA%E8%BA%AB%E5%AF%B9AOP%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B8%8EAspectJ%E6%97%A0%E5%85%B3%E7%B3%BB%0A%0A%0A%23%23%23%20%E7%BC%96%E7%A8%8B%E5%BC%8FAOP%20ProxyFactory%0A%0A%23%23%23%23%20%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%B7%A5%E5%8E%82%EF%BC%8C%E8%AE%BE%E7%BD%AE%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%B7%BB%E5%8A%A0%E9%80%9A%E7%9F%A5%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop05%3B%0A%0Aimport%20org.springframework.aop.framework.ProxyFactory%3B%0A%0Apublic%20class%20Test%20%7B%0A%0A%20%20%20%20%40org.junit.Test%0A%20%20%20%20public%20void%20test01()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%AE%9E%E4%BE%8B%E5%8C%96Spring%E4%BB%A3%E7%90%86%E5%B7%A5%E5%8E%82%0A%20%20%20%20%20%20%20%20ProxyFactory%20factory%3Dnew%20ProxyFactory()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20factory.setTarget(new%20Math())%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E6%B7%BB%E5%8A%A0%E9%80%9A%E7%9F%A5%EF%BC%8C%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20%20%20%20%20%20%20%20factory.addAdvice(new%20BeforeAdvice())%3B%0A%20%20%20%20%20%20%20%20factory.addAdvice(new%20AfterAdvice())%3B%0A%20%20%20%20%20%20%20%20factory.addAdvice(new%20SurroundAdvice())%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E4%BB%8E%E4%BB%A3%E7%90%86%E5%B7%A5%E5%8E%82%E4%B8%AD%E8%8E%B7%E5%BE%97%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20IMath%20math%3D(IMath)%20factory.getProxy()%3B%0A%20%20%20%20%20%20%20%20int%20n1%3D100%2Cn2%3D5%3B%0A%20%20%20%20%20%20%20%20math.add(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.sub(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.mut(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.div(n1%2C%20n2)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%40org.junit.Test%0A%20%20%20%20public%20void%20test02()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2Fmessage.message()%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A*%20%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C%0A!%5B14990dfb14f83774e14078db4f5fb0bc.png%5D(en-resource%3A%2F%2Fdatabase%2F1006%3A1)%0A%0A%23%23%23%20%E5%A3%B0%E6%98%8E%E5%BC%8FAOP%20ProxyFactoryBean%0A%23%23%23%23%20Advice%0A%0A%0A**%E9%80%9A%E7%9F%A5Advice%E7%9A%84%E7%B1%BB%E5%9E%8B**%0A*%20springAOP%E4%B8%AD%EF%BC%8C%E9%80%9A%E8%BF%87Advice%E5%AE%9A%E4%B9%89%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%EF%BC%8CSpring%E4%B8%AD%E6%94%AF%E6%8C%815%E4%B8%AD%E7%B1%BB%E5%9E%8B%E7%9A%84Advice%0A%0A%7C%20%E9%80%9A%E7%9F%A5%20%7C%20%E8%BF%9E%E6%8E%A5%E7%82%B9%20%7C%20%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%20%7C%0A%7C%20—%20%7C%20—%20%7C%20—%20%7C%0A%7C%20%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%20%7C%20%E6%96%B9%E6%B3%95%E5%89%8D%20%7C%20org.springframework.aop.MethodBeforeAdvice%20%7C%0A%7C%20%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%20%7C%20%E6%96%B9%E6%B3%95%E5%90%8E%20%7C%20org.springframework.aop.AfterReturningAdvice%20%7C%0A%7C%20%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%20%7C%20%E6%96%B9%E6%B3%95%E5%89%8D%E5%90%8E%20%7C%20org.aopalliance.intercept.MethodInterceptor%20%7C%0A%7C%20%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E5%90%8E%E9%80%9A%E7%9F%A5%20%7C%20%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%20%7C%20org.springframework.aop.ThrowsAdvice%20%7C%0A%7C%20%E5%BC%95%E4%BB%8B%E9%80%9A%E7%9F%A5%20%7C%20%E7%B1%BB%E4%B8%AD%E5%A2%9E%E5%8A%A0%E6%96%B0%E7%9A%84%E6%96%B9%E6%B3%95%E5%B1%9E%E6%80%A7%20%7C%20org.springframework.aop.IntroductionInterceptor%20%7C%0A%0A**%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop05%3B%0A%0Aimport%20java.lang.reflect.Method%3B%0A%0Aimport%20org.springframework.aop.MethodBeforeAdvice%3B%0A%0A%2F**%0A%20*%20%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%20%EF%BC%8C%E5%B0%B1%E7%9B%B8%E5%BD%93%E4%BA%8EInvocationHandler%E7%B1%BB%0A%20*%2F%0Apublic%20class%20BeforeAdvice%20implements%20MethodBeforeAdvice%20%7B%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20method%20%E6%96%B9%E6%B3%95%E4%BF%A1%E6%81%AF%0A%20%20%20%20%20*%20args%20%E5%8F%82%E6%95%B0%0A%20%20%20%20%20*%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20*%20%E8%AF%A5%E5%88%87%E9%9D%A2%E4%B8%80%E5%AE%9A%E6%98%AF%E5%9C%A8%E6%89%A7%E8%A1%8C%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E4%B9%8B%E5%89%8D%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%89%80%E4%BB%A5%E6%96%B9%E6%B3%95%E4%B8%AD%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AF%B9Method%E5%81%9A%E4%BB%80%E4%B9%88%E6%93%8D%E4%BD%9C%0A%20%20%20%20%20*%2F%0A%20%20%20%20public%20void%20before(Method%20method%2C%20Object%5B%5D%20args%2C%20Object%20target)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22-----------------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5-----------------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A**%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop05%3B%0A%0Aimport%20java.lang.reflect.Method%3B%0A%0Aimport%20org.springframework.aop.AfterReturningAdvice%3B%0A%0A%2F**%0A%20*%20%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20*%0A%20*%2F%0Apublic%20class%20AfterAdvice%20implements%20AfterReturningAdvice%20%7B%0A%20%20%20%20%2F*%0A%20%20%20%20%20*%20returnValue%20%E8%BF%94%E5%9B%9E%E5%80%BC%0A%20%20%20%20%20*%20method%20%E8%A2%AB%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%0A%20%20%20%20%20*%20args%20%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%0A%20%20%20%20%20*%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20*%2F%0A%20%20%20%20public%20void%20afterReturning(Object%20returnValue%2C%20Method%20method%2C%20Object%5B%5D%20args%2C%20Object%20target)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22-----------------%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5-----------------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A**%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop05%3B%0A%0Aimport%20org.aopalliance.intercept.MethodInterceptor%3B%0Aimport%20org.aopalliance.intercept.MethodInvocation%3B%0A%0A%2F**%0A%20*%20%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%0A%20*%20%E6%96%B9%E6%B3%95%E6%8B%A6%E6%88%AA%E5%99%A8%0A%20*%0A%20*%2F%0Apublic%20class%20SurroundAdvice%20implements%20MethodInterceptor%20%7B%0A%0A%20%20%20%20public%20Object%20invoke(MethodInvocation%20i)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%89%8D%E7%BD%AE%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%96%B9%E6%B3%95%22%20%2B%20i.getMethod()%20%2B%20%22%20%E8%A2%AB%E8%B0%83%E7%94%A8%E5%9C%A8%E5%AF%B9%E8%B1%A1%22%20%2B%20i.getThis()%20%2B%20%22%E4%B8%8A%EF%BC%8C%E5%8F%82%E6%95%B0%20%22%20%2B%20i.getArguments())%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%0A%20%20%20%20%20%20%20%20Object%20ret%20%3D%20i.proceed()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%90%8E%E7%BD%AE%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20%20%20%20%20%20%20%20System.out.println(%22%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%9A%22%2B%20ret)%3B%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%23%20%E5%AE%9A%E4%B9%89%E6%8E%A5%E5%8F%A3%0A%60%60%60java%0A%2F**%0A%20*%20%E6%8E%A5%E5%8F%A3%0A%20*%20%E6%8A%BD%E8%B1%A1%E4%B8%BB%E9%A2%98%0A%20*%2F%0Apublic%20interface%20IMath%20%7B%0A%20%20%20%20%2F%2F%E5%8A%A0%0A%20%20%20%20int%20add(int%20n1%2C%20int%20n2)%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20%2F%2F%E5%87%8F%0A%20%20%20%20int%20sub(int%20n1%2C%20int%20n2)%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20%2F%2F%E4%B9%98%0A%20%20%20%20int%20mut(int%20n1%2C%20int%20n2)%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20%2F%2F%E9%99%A4%0A%20%20%20%20int%20div(int%20n1%2C%20int%20n2)%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%0A%60%60%60java%0A%2F**%0A%20*%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%0A%20*%E7%9C%9F%E5%AE%9E%E4%B8%BB%E9%A2%98%0A%20*%2F%0Apublic%20class%20Math%20implements%20IMath%20%7B%0A%20%20%20%20%2F%2F%E5%8A%A0%0A%20%20%20%20public%20int%20add(int%20n1%2Cint%20n2)%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Bn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2B%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E5%87%8F%0A%20%20%20%20public%20int%20sub(int%20n1%2Cint%20n2)%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%20%20%20%20%20%20%20%20int%20result%3Dn1-n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22-%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E4%B9%98%0A%20%20%20%20public%20int%20mut(int%20n1%2Cint%20n2)%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%20%20%20%20%20%20%20%20int%20result%3Dn1<em>n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22X%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E9%99%A4%0A%20%20%20%20public%20int%20div(int%20n1%2Cint%20n2)%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Fn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2F%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E5%AE%9A%E4%B9%89Advice%0A%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8FInvocationHandler%0A%60%60%60java%0A%2F</em>%0A%20*%20%20%20public%20class%20Agent%20implements%20InvocationHandler%7B%0A%20*%20%20%20%0A%20*%20%20%20%20%20%20private%20BaseService%20obj%3B%2F%2F%E5%BD%93%E5%89%8D%E5%85%B7%E4%BD%93%E8%A2%AB%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%0A%20*%20%20%20%20%20%20public%20Agent(BasseSercie%20param)%7B%0A%20*%20%20%20%20%20%20%20%20%20%20this.obj%20%3D%20param%3B%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%20%20%20public%20Object%20invoke(Object%20proxy%2CMethod%20method%2CObject%5B%5D%20args)%7B%0A%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E7%BB%87%E5%85%A5%E9%A1%BA%E5%BA%8F%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%20%20%20%2F%2F%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%0A%20*%20%20%20%20%20%20public%20wash()%7B%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%7D%0A%20*%20%0A%20*%20*%2F%0A%60%60%60%0A**%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5**%0A%60%60%60java%0Aimport%20java.lang.reflect.Method%3B%0Aimport%20org.springframework.aop.AfterReturningAdvice%3B%0A%2F**%0A%20*%20%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20*%0A%20*%2F%0Apublic%20class%20AfterAdvice%20implements%20AfterReturningAdvice%20%7B%0A%20%20%20%20%2F*%0A%20%20%20%20%20*%20returnValue%20%E8%BF%94%E5%9B%9E%E5%80%BC%0A%20%20%20%20%20*%20method%20%E8%A2%AB%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%0A%20%20%20%20%20*%20args%20%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%0A%20%20%20%20%20*%20target%20%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20*%20%E5%88%87%E9%9D%A2%EF%BC%8C%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%0A%20%20%20%20%20*%2F%0A%20%20%20%20public%20void%20afterReturning(Object%20returnValue%2C%20Method%20method%2C%20Object%5B%5D%20args%2C%20Object%20target)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E5%85%B1%E7%94%A8%E6%97%B6%EF%BC%9Atime%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E4%BD%BF%E7%94%A8IOC%E9%85%8D%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%90%86%0A*%20%E5%BC%95%E5%85%A5spring%20IOC%E7%9A%84%E6%A0%B8%E5%BF%83jar%E5%8C%85%0A*%20%E5%88%9B%E5%BB%BAIOC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6beans.xml%0A%60%60%60XML%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.w3.org">2Fwww.w3.org</a>%2F2001%2FXMLSchema-instance%22%20xmlns%3Ap%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fp%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%2Fspring-beans.xsd%22%3E%0A%20%20%20%20%3C!–%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%20%EF%BC%8C%E6%B3%A8%E5%86%8C%E8%A2%AB%E7%9B%91%E6%8E%A7%E5%AE%9E%E7%8E%B0%E7%B1%BB–%3E%0A%20%20%20%20%3Cbean%20id%3D%22target%22%20class%3D%22com.zhangguo.Spring041.aop06.Math%22%3E%3C%2Fbean%3E%0A%20%20%20%20%3C!–%E9%80%9A%E7%9F%A5%E3%80%81%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%EF%BC%8C%E6%B3%A8%E5%86%8C%E9%80%9A%E7%9F%A5%E5%AE%9E%E7%8E%B0%E7%B1%BB–%3E%0A%20%20%20%20%3Cbean%20id%3D%22advice%22%20class%3D%22com.zhangguo.Spring041.aop06.AfterAdvice%22%3E%3C%2Fbean%3E%0A%20%20%20%20%3C!–%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%2C%E6%B3%A8%E5%86%8C%E4%BB%A3%E7%90%86%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%E7%94%9F%E4%BA%A7%E5%B7%A5%E5%8E%82%20–%3E%0A%20%20%20%20%3C!–interceptorNames%20%E9%80%9A%E7%9F%A5%E6%95%B0%E7%BB%84%20–%3E%0A%20%20%20%20%3C!–p%3Atarget-ref%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%AF%B9%E8%B1%A1–%3E%0A%20%20%20%20%3C!–p%3AproxyTargetClass%20%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E5%88%99%E4%BD%BF%E7%94%A8cglib%2C%E5%90%A6%E5%88%99%E4%BD%BF%E7%94%A8jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%20%20–%3E%0A%20%20%20%20%3Cbean%20id%3D%22proxy%22%20class%3D%22org.springframework.aop.framework.ProxyFactoryBean%22%0A%20%20%20%20%20%20%20%20p%3AinterceptorNames%3D%22advice%22%0A%20%20%20%20%20%20%20%20p%3Atarget-ref%3D%22target%22%0A%20%20%20%20%20%20%20%20p%3AproxyTargetClass%3D%22true%22%3E%3C%2Fbean%3E%0A%3C%2Fbeans%3E%0A%20%20%20%20%3C!–%0A%20%20%20%20p%3AinterceptorNames%3D%22advice%22%E7%AD%89%E4%BB%B7%E4%BA%8E%3Cproperty%20name%3D%22interceptorNames%22%20value%3D%22advice%22%3E%3C%2Fproperty%3E%0A%20%20%20%20p%3Atarget-ref%3D%22target%22%E7%AD%89%E4%BB%B7%E4%BA%8E%3Cproperty%20name%3D%22target%22%20ref%3D%22target%22%3E%3C%2Fbean%3E%0A%20%20%20%20–%3E%0A%60%60%60%0A*%20%E8%8E%B7%E5%8F%96%E4%BB%A3%E7%90%86%E7%B1%BB%E5%B9%B6%E6%89%A7%E8%A1%8C%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop06%3B%0A%0Aimport%20org.springframework.context.ApplicationContext%3B%0Aimport%20org.springframework.context.support.ClassPathXmlApplicationContext%3B%0A%0Apublic%20class%20Test%20%7B%0A%0A%20%20%20%20%40org.junit.Test%0A%20%20%20%20public%20void%20test01()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%AE%B9%E5%99%A8%0A%20%20%20%20%20%20%20%20ApplicationContext%20ctx%3Dnew%20ClassPathXmlApplicationContext(%22beans.xml%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E4%BB%8E%E4%BB%A3%E7%90%86%E5%B7%A5%E5%8E%82%E4%B8%AD%E8%8E%B7%E5%BE%97%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20IMath%20math%3D(IMath)ctx.getBean(%22proxy%22)%3B%0A%20%20%20%20%20%20%20%20int%20n1%3D100%2Cn2%3D5%3B%0A%20%20%20%20%20%20%20%20math.add(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.sub(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.mut(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.div(n1%2C%20n2)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A*%20%E8%BE%93%E5%87%BA%0A!%5B85c1048f46d8ee0d65a9b050af2b582e.png%5D(en-resource%3A%2F%2Fdatabase%2F1009%3A1)%0A%23%23%23%23%23%20%E5%B0%8F%E7%BB%93%0A*%20**%E8%BF%99%E9%87%8C%E6%9C%89%E4%B8%AA%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98**%EF%BC%9A%E4%BB%8E%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%8E%B7%E5%BE%97proxy%E5%AF%B9%E8%B1%A1%E6%97%B6%E5%BA%94%E8%AF%A5%E6%98%AForg.springframework.aop.framework.ProxyFactoryBean%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E8%B1%A1(%E5%A6%82%E4%B8%8B%E4%BB%A3%E7%A0%81%E6%89%80%E7%A4%BA)%EF%BC%8C%E4%BD%86%E8%BF%99%E9%87%8C%E7%9B%B4%E6%8E%A5%E5%B0%B1%E8%BD%AC%E6%8D%A2%E6%88%90IMath%E7%B1%BB%E5%9E%8B%E4%BA%86%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%EF%BC%9AProxyFactoryBean%E6%9C%AC%E8%B4%A8%E4%B8%8A%E6%98%AF%E4%B8%80%E4%B8%AA%E7%94%A8%E6%9D%A5%E7%94%9F%E4%BA%A7Proxy%E7%9A%84FactoryBean%E3%80%82%E5%A6%82%E6%9E%9C%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%8C%81%E6%9C%89%E6%9F%90%E4%B8%AAFactoryBean%E7%9A%84%E5%BC%95%E7%94%A8%EE%80%84%E5%AE%83%E5%8F%96%E5%BE%97%E7%9A%84%E4%B8%8D%E6%98%AFFactoryBean%E6%9C%AC%E8%BA%AB%E8%80%8C%E6%98%AF%20FactoryBean%E7%9A%84getObject()%E6%96%B9%E6%B3%95%E6%89%80%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E6%89%80%E4%BB%A5%E5%A6%82%E6%9E%9C%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1%E4%BE%9D%E8%B5%96%E4%BA%8EProxyFactoryBean%E9%82%A3%E4%B9%88%E5%AE%83%E5%B0%86%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%88%B0%20ProxyFactoryBean%E7%9A%84getObject()%E6%96%B9%E6%B3%95%E6%89%80%E8%BF%94%E5%9B%9E%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E8%BF%99%E5%B0%B1%E6%98%AFProxyFactryBean%E5%BE%97%E4%BB%A5%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8E%9F%E5%9B%A0%0A%0A%3E%20**%E9%80%9A%E7%9F%A5Advice%E7%9A%84%E5%BC%8A%E7%AB%AF%E6%98%AF%EF%BC%8C%E5%AE%83%E5%8F%AA%E5%8F%AF%E4%BB%A5%E5%AF%B9%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%BB%87%E5%85%A5%E5%88%87%E9%9D%A2**%0A%3E%20%E4%BC%9A%E5%BC%BA%E8%A1%8C%E7%9A%84%E4%B8%8E%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A%0A%0A%23%23%23%23%20Advisor%20%E9%A1%BE%E9%97%AE%0A%E6%AD%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%AF%94advice%E6%9B%B4%E5%8A%A0%E7%81%B5%E6%B4%BB%EF%BC%8C%E5%8F%AA%E9%9C%80%E5%A4%9A%E5%AE%9E%E7%8E%B0%E5%87%A0%E4%B8%AA%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95%E7%9B%B8%E5%90%8C%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%9B%B4%E5%8A%A0%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%0A%23%23%23%23%23%20%E5%A3%B0%E6%98%8E%E6%8E%A5%E5%8F%A3%0A%60%60%60java%0Apublic%20interface%20BaseService%20%7B%0A%20%20%20%20%20%20%20public%20void%20eat()%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20%20%20%20public%20void%20wc()%3B%2F%2FJoinCut%20%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%0A%60%60%60java%0Aimport%20com.kaikeba.service.BaseService%3B%0A%0Apublic%20class%20Person%20implements%20BaseService%20%7B%0A%0A%09public%20void%20eat()%20%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%09%09%0A%20%20%20%20%20%20%20%20%20%20%20System.out.println(%22%E5%90%83%E6%B3%A1%E9%9D%A2%22)%3B%0A%09%7D%0A%09public%20void%20wc()%20%7B%2F%2F%E5%88%87%E5%85%A5%E7%82%B9%20PointCut%20%20%20%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%09%09%0A%09%09%20System.out.println(%22%E4%B8%8A%E5%8E%95%E6%89%80%22)%3B%0A%09%7D%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E5%88%87%E9%9D%A2Advice%0A%E6%AC%A1%E8%A6%81%E6%96%B9%E6%B3%95%0A%60%60%60java%0Aimport%20java.lang.reflect.Method%3B%0A%0Aimport%20org.springframework.aop.Advisor%3B%0Aimport%20org.springframework.aop.MethodBeforeAdvice%3B%0Aimport%20org.springframework.aop.framework.ProxyFactoryBean%3B%0A%2F*%0A%20*%20%0A%20*%20%20%20public%20class%20Agent%20implements%20InvocationHandler%7B%0A%20*%20%20%20%0A%20*%20%20%20%20%20%20private%20BaseService%20obj%3B%2F%2F%E5%BD%93%E5%89%8D%E5%85%B7%E4%BD%93%E8%A2%AB%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%0A%20*%20%20%20%20%20%20%0A%20*%20%20%20%20%20%20public%20Agent(BasseSercie%20param)%7B%0A%20*%20%20%20%20%20%20%20%20%20%20this.obj%20%3D%20param%3B%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%0A%20*%20%20%20%20%20%20public%20Object%20invoke(Object%20proxy%2CMethod%20method%2CObject%5B%5D%20args)%7B%0A%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E7%BB%87%E5%85%A5%E9%A1%BA%E5%BA%8F%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%20%20%20%0A%20*%20%20%20%20%20%20%2F%2F%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%0A%20*%20%20%20%20%20%20public%20wash()%7B%0A%20*%20%20%20%20%20%20%0A%20*%20%20%20%20%20%20%7D%0A%20*%20%20%20%7D%0A%20*%20%0A%20*%20*%2F%0Apublic%20class%20MyBeforeAdvice%20implements%20MethodBeforeAdvice%20%7B%0A%0A%09%2F%2F%E5%88%87%E9%9D%A2%EF%BC%9A%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%0A%09public%20void%20before(Method%20arg0%2C%20Object%5B%5D%20arg1%2C%20Object%20arg2)%20throws%20Throwable%20%7B%0A%09%09System.out.println(%22-----%E6%B4%97%E6%89%8B-----%22)%3B%0A%20%20%20%20%20%20%20%20%0A%09%7D%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20ClassFilter%20%E7%B1%BB%E6%8B%A6%E6%88%AA%E5%99%A8%0A%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%E8%A2%AB%E6%8B%A6%E6%88%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%8D%E6%98%AF%E5%BD%93%E5%89%8D%E9%A1%BE%E9%97%AE%E9%9C%80%E8%A6%81%E7%AE%A1%E7%90%86%E5%AF%B9%E8%B1%A1%0A%60%60%60java%0Aimport%20org.springframework.aop.ClassFilter%3B%0A%0Aimport%20com.kaikeba.serviceImpl.Person%3B%0A%0Apublic%20class%20MyClassFilter%20implements%20ClassFilter%20%7B%0A%0A%09%20%2F*%0A%09%20%20*%20%201.%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%E4%B8%8B%E4%BC%9A%E6%9C%89%E5%A4%9A%E4%B8%AA%E5%AE%9E%E7%8E%B0%E7%B1%BB%0A%09%20%20*%20%202.%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%98%AF%E4%B8%8D%E6%98%AF%E6%88%91%E4%BB%AC%E7%BB%87%E5%85%A5%E6%96%B9%E5%BC%8F%E5%85%B3%E5%BF%83%E7%9A%84%E7%9B%AE%E6%A0%87%E7%B1%BB%0A%09%20%20*%20%20BaseService%E6%8E%A5%E5%8F%A3%E6%88%91%E4%BB%AC%E7%8E%B0%E5%9C%A8%E5%8F%AA%E6%83%B3%E7%AE%A1%E7%90%86Person.%0A%09%20%20*%20%20%E5%8F%82%E6%95%B0%EF%BC%9A%E5%B0%B1%E6%98%AF%E5%BD%93%E5%89%8D%E8%A2%AB%E6%8B%A6%E6%88%AA%E7%B1%BB%EF%BC%9A%E5%8F%AF%E8%83%BDPerson%EF%BC%8C%E5%8F%AF%E8%83%BDGog%0A%09%20%20*%20*%2F%0A%09public%20boolean%20matches(Class%3C%3F%3E%20clazz)%20%7B%0A%09%20%20%20%20if(clazz%20%3D%3D%20Person.class)%7B%0A%09%20%20%20%20%09return%20true%3B%2F%2F%E5%91%8A%E8%AF%89%E9%A1%BE%E9%97%AE%EF%BC%8C%E5%BD%93%E5%89%8D%E7%B1%BB%E6%98%AF%E9%9C%80%E8%A6%81%E6%88%91%E4%BB%AC%E6%8F%90%E4%BE%9B%E7%BB%87%E5%85%A5%E6%9C%8D%E5%8A%A1%0A%09%20%20%20%20%7D%0A%09%20%20%20%20%2F%2FGog%0A%09%09return%20false%3B%0A%09%7D%0A%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20MethodMatcher%20%E6%96%B9%E6%B3%95%E6%8B%A6%E6%88%AA%E5%99%A8%0A%E5%BD%93%E5%89%8D%E8%A2%AB%E6%8B%A6%E6%88%AA%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E4%B8%8D%E6%98%AF%E6%88%91%E4%BB%AC%E6%89%80%E9%9C%80%E8%A6%81%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%0A%60%60%60java%0Aimport%20java.lang.reflect.Method%3B%0A%0Aimport%20org.springframework.aop.MethodMatcher%3B%0A%0Apublic%20class%20MyMethodMatcher%20implements%20MethodMatcher%20%7B%0A%0A%09%2F*%0A%09%20*%20%20%E8%A2%AB%E7%9B%91%E6%8E%A7%E6%8E%A5%E5%8F%A3%E6%AF%94%E5%A6%82%EF%BC%88BaseService%EF%BC%89%EF%BC%8C%E6%B2%A1%E6%9C%89%E9%87%8D%E8%BD%BD%E6%96%B9%E6%B3%95%0A%09%20*%20%20%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0%E9%83%BD%E6%98%AF%E4%BB%A5%E5%94%AF%E4%B8%80%0A%09%20*%20%20%E6%AD%A4%E6%97%B6%E5%8F%AF%E4%BB%A5%E9%87%87%E7%94%A8%20static%E6%A3%80%E6%B5%8B%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8F%AA%E6%A0%B9%E6%8D%AE%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0%E5%88%A4%E6%96%AD%0A%09%20*%20%E5%8F%82%E6%95%B0%EF%BC%9Amethod%3A%20%E6%8E%A5%E5%8F%A3%E4%B8%AD%E6%9F%90%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%0A%09%20*%20%20%20%20%20targetClass%3A%20%E6%8E%A5%E5%8F%A3%E4%B8%AD%E4%B8%80%E4%B8%AA%E5%AE%9E%E7%8E%B0%E7%B1%BB%0A%09%20*%20%20%20%20%20%0A%09%20*%20%20%E4%B8%9A%E5%8A%A1%EF%BC%9A%E5%8F%AA%E6%83%B3%E4%B8%BAPerson%E7%B1%BB%E4%B8%ADeat%E6%96%B9%E6%B3%95%E6%8F%90%E4%BE%9B%E7%BB%87%E5%85%A5%20%20%20%0A%09%20*%2F%0A%09%0A%09public%20boolean%20matches(Method%20method%2C%20Class%3C%3F%3E%20targetClass)%20%7B%0A%09%09%0A%09%09String%20methodName%20%3D%20method.getName()%3B%0A%09%09if(%22eat%22.equals(methodName))%7B%0A%09%09%09return%20true%3B%0A%09%09%7D%0A%09%09return%20false%3B%0A%09%7D%0A%0A%09public%20boolean%20isRuntime()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20false%3B%0A%09%7D%0A%0A%09public%20boolean%20matches(Method%20method%2C%20Class%3C%3F%3E%20targetClass%2C%20Object…%20args)%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20false%3B%0A%09%7D%0A%0A%7D%0A%0A%60%60%60%0A%23%23%23%23%23%20PointCut%0A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%0A%60%60%60java%0Aimport%20org.springframework.aop.ClassFilter%3B%0Aimport%20org.springframework.aop.MethodMatcher%3B%0Aimport%20org.springframework.aop.Pointcut%3B%0A%0Apublic%20class%20MyPointCut%20implements%20Pointcut%20%7B%0A%09%0A%09%0A%09%2F*%0A%09%20*%20InvocationHandler%E6%8E%A5%E5%8F%A3%0A%09%20*%20%20%20%20invoke()%7B%0A%09%20*%20%20%20%20%20%20%20%20if(obj.getClass%20%EF%BC%81%3D%20person.class)%7B%0A%09%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%09%20*%20%20%20%20%20%20%20%20%7D%0A%09%20*%20%20%20%20%20%20%20%20%0A%09%20*%20%20%20%20%20%20%20%20if(!methodObj.getName.equals(%22eat%22))%7B%0A%09%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%0A%09%20*%20%20%20%20%20%20%20%20%7D%0A%09%20*%20%20%20%20%20%20%20%20%2F%2F%E7%BB%87%E5%85%A5%E6%96%B9%E5%BC%8F%3A%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%E5%92%8C%20Peson.eat()%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%0A%09%20*%20%20%20%20%20%20%20%20%2F%2F%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%09%20*%20%20%20%20%20%20%20%20%20%20wash%EF%BC%88%EF%BC%89%EF%BC%9B%0A%09%20*%20%20%20%20%20%20%20%20%20%20Person.eat()%0A%09%20*%20%20%20%20%7D%0A%09%20*%20%0A%09%20*%20*%2F%0A%09%2F%2F%E4%BD%BF%E7%94%A8%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%0A%09private%20ClassFilter%20classFilter%3B%0A%09private%20MethodMatcher%20metodMatcher%3B%0A%0A%09public%20void%20setClassFilter(ClassFilter%20classFilter)%20%7B%0A%09%09this.classFilter%20%3D%20classFilter%3B%0A%09%7D%0A%0A%09public%20void%20setMetodMatcher(MethodMatcher%20metodMatcher)%20%7B%0A%09%09this.metodMatcher%20%3D%20metodMatcher%3B%0A%09%7D%0A%0A%09public%20ClassFilter%20getClassFilter()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20this.classFilter%3B%0A%09%7D%0A%0A%09public%20MethodMatcher%20getMethodMatcher()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20this.metodMatcher%3B%0A%09%7D%0A%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20PointCutAdvisor%0A%E5%8F%AF%E4%BB%A5%E7%81%B5%E6%B4%BB%E7%9A%84%E6%8C%87%E5%AE%9A%E5%BD%93%E5%89%8D%E6%8E%A5%E5%8F%A3%E4%B8%8B%E7%9A%84%E5%93%AA%E4%B8%80%E4%B8%AA%E5%AE%9E%E7%8E%B0%E7%B1%BB%E4%B8%AD%E5%93%AA%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E4%B8%8E%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A%0A%60%60%60java%0Aimport%20org.aopalliance.aop.Advice%3B%0Aimport%20org.springframework.aop.Pointcut%3B%0Aimport%20org.springframework.aop.PointcutAdvisor%3B%0A%0Apublic%20class%20MyPointCutAdvisor%20implements%20PointcutAdvisor%20%7B%0A%09%2F%2F%E9%87%87%E7%94%A8%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%20set%0A%20%20%20%20private%20Advice%20advice%3B%2F%2F%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%AC%A1%E8%A6%81%E4%B8%9A%E5%8A%A1%E4%B8%8E%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%0A%20%20%20%20private%20Pointcut%20pointcut%3B%2F%2F%E5%BD%93%E5%89%8D%E6%8B%A6%E6%88%AA%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%20person%E5%AF%B9%E8%B1%A1.eat()%0A%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%0A%09public%20void%20setAdvice(Advice%20advice)%20%7B%0A%09%09this.advice%20%3D%20advice%3B%0A%09%7D%0A%0A%09public%20void%20setPointcut(Pointcut%20pointcut)%20%7B%0A%09%09this.pointcut%20%3D%20pointcut%3B%0A%09%7D%0A%0A%09public%20Advice%20getAdvice()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20this.advice%3B%0A%09%7D%0A%0A%09public%20boolean%20isPerInstance()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20false%3B%0A%09%7D%0A%0A%09public%20Pointcut%20getPointcut()%20%7B%0A%09%09%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%09%09return%20this.pointcut%3B%0A%09%7D%0A%0A%7D%0A%0A%60%60%60%0A%23%23%23%23%23%20spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.w3.org">2Fwww.w3.org</a>%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20xmlns%3Ap%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fp%22%0A%20%20%20%20xmlns%3Ac%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fc%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%20%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%2Fspring-beans.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fcontext%20%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fcontext%2Fspring-context.xsd%22%3E%0A%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E8%A2%AB%E7%9B%91%E6%8E%A7%E5%AE%9E%E7%8E%B0%E7%B1%BB%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22person%22%20class%3D%22com.kaikeba.serviceImpl.Person%22%3E%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22dog%22%20class%3D%22com.kaikeba.serviceImpl.Gog%22%3E%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E9%80%9A%E7%9F%A5%E5%AE%9E%E7%8E%B0%E7%B1%BB%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22before%22%20class%3D%22com.kaikeba.advice.MyBeforeAdvice%22%3E%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E7%B1%BB%E5%9E%8B%E8%BF%87%E6%BB%A4%E5%99%A8%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22classFilter%22%20class%3D%22com.kaikeba.util.MyClassFilter%22%3E%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E6%96%B9%E6%B3%95%E5%8C%B9%E9%85%8D%E5%99%A8%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22methodMatcher%22%20class%3D%22com.kaikeba.util.MyMethodMatcher%22%3E%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E5%88%87%E5%85%A5%E7%82%B9%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22pointCut%22%20class%3D%22com.kaikeba.util.MyPointCut%22%20%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22classFilter%22%20ref%3D%22classFilter%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22metodMatcher%22%20ref%3D%22methodMatcher%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E9%A1%BE%E9%97%AE%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22myAdvisor%22%20class%3D%22com.kaikeba.util.MyPointCutAdvisor%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22advice%22%20ref%3D%22before%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22pointcut%22%20ref%3D%22pointCut%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%3C%2Fbean%3E%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%3C!–%20%E6%B3%A8%E5%86%8C%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%B7%A5%E5%8E%82%20–%3E%0A%20%20%20%20%20%20%20%3C!–%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E6%AD%A4%E6%97%B6%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%AA%E4%BC%9A%E8%B4%9F%E8%B4%A3person.eat%E6%96%B9%E6%B3%95%E7%9B%91%E6%8E%A7%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E4%B8%8EAdvice%E4%B8%8D%E5%90%8C%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%AF%B9BaseService%E6%89%80%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20–%3E%0A%20%20%20%20%20%20%20%3Cbean%20id%3D%22personProxy%22%20class%3D%22org.springframework.aop.framework.ProxyFactoryBean%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22target%22%20ref%3D%22person%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cproperty%20name%3D%22interceptorNames%22%20value%3D%22myAdvisor%22%3E%3C%2Fproperty%3E%0A%20%20%20%20%20%20%20%3C%2Fbean%3E%0A%3C%2Fbeans%3E%0A%60%60%60%0A%0A%0A%23%23%20AspectJ%20AOP%EF%BC%88%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8%E8%AF%A5%E6%96%B9%E5%BC%8F%EF%BC%89%0A%0A<strong>AspectJ%20%E6%98%AFAOP%E5%8D%95%E7%8B%AC%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AE%9E%E7%8E%B0%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%92%8Cspring%E5%B9%B6%E6%97%A0%E5%85%B3%E7%B3%BB</strong>%0A%0A**%E4%B8%8B%E8%BF%B0%E6%AD%A5%E9%AA%A4%E6%98%AFAspectJ%2BSpring%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%EF%BC%88spring%E8%87%AA%E8%BA%AB%E5%AE%9E%E7%8E%B0%E7%9A%84aop%E6%98%AF%60ProxyFactoryBean%60%EF%BC%89**%0A%0AAspectJ%E6%98%AF%E4%B8%80%E4%B8%AAjava%E5%AE%9E%E7%8E%B0%E7%9A%84AOP%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%AE%83%E8%83%BD%E5%A4%9F%E5%AF%B9java%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8CAOP%E7%BC%96%E8%AF%91%EF%BC%88%E4%B8%80%E8%88%AC%E5%9C%A8%E7%BC%96%E8%AF%91%E6%9C%9F%E8%BF%9B%E8%A1%8C%EF%BC%89%EF%BC%8C%E8%AE%A9java%E4%BB%A3%E7%A0%81%E5%85%B7%E6%9C%89AspectJ%E7%9A%84AOP%E5%8A%9F%E8%83%BD%EF%BC%88%E5%BD%93%E7%84%B6%E9%9C%80%E8%A6%81%E7%89%B9%E6%AE%8A%E7%9A%84%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%89%0A%0A%E5%8F%AF%E4%BB%A5%E8%BF%99%E6%A0%B7%E8%AF%B4AspectJ%E6%98%AF%E7%9B%AE%E5%89%8D%E5%AE%9E%E7%8E%B0AOP%E6%A1%86%E6%9E%B6%E4%B8%AD%E6%9C%80%E6%88%90%E7%86%9F%EF%BC%8C%E5%8A%9F%E8%83%BD%E6%9C%80%E4%B8%B0%E5%AF%8C%E7%9A%84%E8%AF%AD%E8%A8%80%EF%BC%8C%E6%9B%B4%E5%B9%B8%E8%BF%90%E7%9A%84%E6%98%AF%EF%BC%8CAspectJ%E4%B8%8Ejava%E7%A8%8B%E5%BA%8F%E5%AE%8C%E5%85%A8%E5%85%BC%E5%AE%B9%EF%BC%8C%E5%87%A0%E4%B9%8E%E6%98%AF%E6%97%A0%E7%BC%9D%E5%85%B3%E8%81%94%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AF%B9%E4%BA%8E%E6%9C%89java%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%8C%E4%B8%8A%E6%89%8B%E5%92%8C%E4%BD%BF%E7%94%A8%E9%83%BD%E9%9D%9E%E5%B8%B8%E5%AE%B9%E6%98%93%E3%80%82%0A%0A%E4%BA%86%E8%A7%A3AspectJ%E5%BA%94%E7%94%A8%E5%88%B0java%E4%BB%A3%E7%A0%81%E7%9A%84%E8%BF%87%E7%A8%8B%EF%BC%88%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E7%A7%B0%E4%B8%BA%E7%BB%87%E5%85%A5%EF%BC%89%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%BB%87%E5%85%A5%E8%BF%99%E4%B8%AA%E6%A6%82%E5%BF%B5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%E4%B8%BAaspect(%E5%88%87%E9%9D%A2)%E5%BA%94%E7%94%A8%E5%88%B0%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0(%E7%B1%BB)%E7%9A%84%E8%BF%87%E7%A8%8B%E3%80%82%0A%0A%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%EF%BC%8C**%E4%B8%80%E8%88%AC%E5%88%86%E4%B8%BA%E5%8A%A8%E6%80%81%E7%BB%87%E5%85%A5%E5%92%8C%E9%9D%99%E6%80%81%E7%BB%87%E5%85%A5%EF%BC%8C%E5%8A%A8%E6%80%81%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E5%B0%86%E8%A6%81%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E7%BB%87%E5%85%A5%E5%88%B0%E7%9B%AE%E6%A0%87%E7%B1%BB%E4%B8%AD**%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%BE%80%E5%BE%80%E6%98%AF%E9%80%9A%E8%BF%87%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%E5%AE%8C%E6%88%90%E7%9A%84%EF%BC%8C%E5%A6%82%3Cu%3EJava%20JDK%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(Proxy%EF%BC%8C%E5%BA%95%E5%B1%82%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0)%3C%2Fu%3E%E6%88%96%E8%80%85%3Cu%3ECGLIB%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(%E5%BA%95%E5%B1%82%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0)%3C%2Fu%3E%EF%BC%8CSpring%20AOP%E9%87%87%E7%94%A8%E7%9A%84%E5%B0%B1%E6%98%AF%E5%9F%BA%E4%BA%8E%E8%BF%90%E8%A1%8C%E6%97%B6%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF%0A%0A<strong>ApectJ%E9%87%87%E7%94%A8%E7%9A%84%E5%B0%B1%E6%98%AF%E9%9D%99%E6%80%81%E7%BB%87%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F</strong>%E3%80%82ApectJ%E4%B8%BB%E8%A6%81%E9%87%87%E7%94%A8%E7%9A%84%E6%98%AF%E7%BC%96%E8%AF%91%E6%9C%9F%E7%BB%87%E5%85%A5%EF%BC%8C%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%9C%9F%E9%97%B4%E4%BD%BF%E7%94%A8AspectJ%E7%9A%84acj%E7%BC%96%E8%AF%91%E5%99%A8(%E7%B1%BB%E4%BC%BCjavac)%E6%8A%8Aaspect%E7%B1%BB%E7%BC%96%E8%AF%91%E6%88%90class%E5%AD%97%E8%8A%82%E7%A0%81%E5%90%8E%EF%BC%8C%E5%9C%A8java%E7%9B%AE%E6%A0%87%E7%B1%BB%E7%BC%96%E8%AF%91%E6%97%B6%E7%BB%87%E5%85%A5%EF%BC%8C%E5%8D%B3%E5%85%88%E7%BC%96%E8%AF%91aspect%E7%B1%BB%E5%86%8D%E7%BC%96%E8%AF%91%E7%9B%AE%E6%A0%87%E7%B1%BB%E3%80%82%0A%0A<strong>spring%E6%95%B4%E5%90%88%E4%BA%86ApectJ%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E5%BA%95%E5%B1%82%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8acj%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8C%E8%80%8C%E6%98%AF%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF</strong>%0A%0A!%5B684cc877c0b4266dc290fdf4ad997f10.png%5D(en-resource%3A%2F%2Fdatabase%2F1017%3A2)%0A%0A%23%23%23%20AspectJ%E7%9A%84XML%E5%AE%9E%E7%8E%B0AOP%0A%23%23%23%23%20%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%0A%23%23%23%23%23%20%E7%BC%96%E5%86%99%E7%9B%AE%E6%A0%87%E7%B1%BB%0A%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%88%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%EF%BC%89%0A*%20UserService%E6%8E%A5%E5%8F%A3%0A*%20UserServiceImpl%E5%AE%9E%E7%8E%B0%E7%B1%BB%0A%0A%3E%20%E9%85%8D%E7%BD%AE%E7%9B%AE%E6%A0%87%E7%B1%BB%EF%BC%8C%E5%B0%86%E7%9B%AE%E6%A0%87%E7%B1%BB%E4%BA%A4%E7%BB%99spring%20IoC%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%0A%0A%23%23%23%23%23%20maven%E4%BE%9D%E8%B5%96%0A%60%60%60xml%0A%3C!–%20%E5%9F%BA%E4%BA%8EAspectJ%E7%9A%84aop%E4%BE%9D%E8%B5%96%20–%3E%0A%3Cdependency%3E%0A%20%20%20%20%20%20%3CgroupId%3Eorg.springframework%3C%2FgroupId%3E%0A%20%20%20%20%20%20%3CartifactId%3Espring-aspects%3C%2FartifactId%3E%0A%20%20%20%20%20%20%3Cversion%3E5.0.7.RELEASE%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%3C!–%3Cdependency%3E%0A%20%20%20%20%20%20%3CgroupId%3Eaopalliance%3C%2FgroupId%3E%0A%20%20%20%20%20%20%3CartifactId%3Eaopalliance%3C%2FartifactId%3E%0A%20%20%20%20%20%20%3Cversion%3E1.0%3C%2Fversion%3E%0A%3C%2Fdependency%3E–%3E%0A%60%60%60%0A%23%23%23%23%23%20%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAadvice%EF%BC%88%E9%80%9A%E7%9F%A5%EF%BC%89%0A*%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAbean%0A%20%20%20%20*%20%E8%AF%A5%E9%80%9A%E7%9F%A5%E4%B8%8D%E5%86%8D%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%BB%BB%E4%BD%95%E6%8E%A5%E5%8F%A3%E6%88%96%E7%BB%A7%E6%89%BF%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84bean%E5%8D%B3%E5%8F%AF%EF%BC%8C%E6%96%B9%E6%B3%95**%E5%8F%AF%E4%BB%A5**%EF%BC%88%E4%B9%9F%E5%8F%AF%E4%B8%8D%E5%B8%A6%EF%BC%89%E5%B8%A6%E4%B8%80%E4%B8%AAJoinPoint%E8%BF%9E%E6%8E%A5%E7%82%B9%E5%8F%82%E6%95%B0%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%8E%B7%E5%BE%97%E8%BF%9E%E6%8E%A5%E7%82%B9%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%A6%82%E6%96%B9%E6%B3%95%E5%90%8D%EF%BC%8C%E5%8F%82%E6%95%B0%EF%BC%8C%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%AD%89%0A%60%60%60java%0Apackage%20com.zhangguo.Spring041.aop08%3B%0A%0Aimport%20org.aspectj.lang.JoinPoint%3B%0A%0A%2F**%0A%20*%20%E9%80%9A%E7%9F%A5%0A%20*%2F%0Apublic%20class%20Advices%20%7B%0A%20%20%20%20%2F%2F%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20%20%20%20public%20void%20before(JoinPoint%20jp)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22--------------------bofore--------------------%22)%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%96%B9%E6%B3%95%E5%90%8D%EF%BC%9A%22%2Bjp.getSignature()%2B%22%EF%BC%8C%E5%8F%82%E6%95%B0%EF%BC%9A%22%2Bjp.getArgs().length%2B%22%EF%BC%8C%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%9A%22%2Bjp.getTarget())%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22--------------------after--------------------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A*%20%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%BE%88%E5%A4%9A%E7%A7%8D%EF%BC%8C%E6%9C%89%E4%BA%9B%E5%8F%82%E6%95%B0%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%8C%E7%89%B9%E5%88%AB%E6%98%AF%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%0A%20%20%20%20*%20**%E4%B8%8B%E5%88%97%E6%96%B9%E6%B3%95%E5%90%8D%E5%8F%AF%E4%BB%A5%E9%9A%8F%E6%84%8F%E7%BC%96%E5%86%99**%0A%60%60%60java%0A%2F%2F%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0Apublic%20void%20beforeMethod(JoinPoint%20joinPoint)%0A%0A%2F%2F%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%0Apublic%20void%20afterMethod(JoinPoint%20joinPoint)%0A%0A%2F%2F%E8%BF%94%E5%9B%9E%E5%80%BC%E9%80%9A%E7%9F%A5%0Apublic%20void%20afterReturning(JoinPoint%20joinPoint%2C%20Object%20result)%0A%0A%2F%2F%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5%0A%2F%2F%E5%9C%A8%E6%96%B9%E6%B3%95%E5%87%BA%E7%8E%B0%E5%BC%82%E5%B8%B8%E6%97%B6%E4%BC%9A%E6%89%A7%E8%A1%8C%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E5%88%B0%E5%BC%82%E5%B8%B8%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%9C%A8%E5%87%BA%E7%8E%B0%E7%89%B9%E5%AE%9A%E5%BC%82%E5%B8%B8%E6%97%B6%E5%9C%A8%E6%89%A7%E8%A1%8C%E9%80%9A%E7%9F%A5%E4%BB%A3%E7%A0%81%0Apublic%20void%20afterThrowing(JoinPoint%20joinPoint%2C%20Exception%20ex)%0A%0A%2F%2F%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%0A%2F%2F%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E9%9C%80%E8%A6%81%E6%90%BA%E5%B8%A6ProceedingJoinPoint%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%0A%2F%2F%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E7%B1%BB%E4%BC%BC%E4%BA%8E%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%9AProceedingJoinPoint%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%86%B3%E5%AE%9A%E6%98%AF%E5%90%A6%E6%89%A7%E8%A1%8C%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%E3%80%82%0A%2F%2F%E8%80%8C%E4%B8%94%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E5%BF%85%E9%A1%BB%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8D%B3%E4%B8%BA%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%0Apublic%20Object%20aroundMethod(ProceedingJoinPoint%20pjd)%7B%0A%20%20%20%20System.out.println(%22%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E5%89%8D%22)%3B%0A%20%20%20%20%2F%2F%E8%B0%83%E7%94%A8%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%0A%20%20%20%20Object%20proceed%20%3D%20pjd.proceed()%3B%20%0A%20%20%20%20System.out.println(%22%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E5%89%8D%22)%3B%0A%20%20%20%20return%20proceed%3B%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0A*%20xml%E9%85%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%EF%BC%8C%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84bean%0A%60%60%60xml%0A%3Cbean%20id%3D%22advices%22%20class%3D%22com.zhangguo.Spring041.aop08.Advices%22%3E%3C%2Fbean%3E%0A…%0A%3C%2Fbean%3E%0A%60%60%60%0A%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AEAOP%E5%88%87%E9%9D%A2%0A*%20%E5%B0%B1%E6%98%AF%E6%8C%87%E6%98%8E%E4%BD%A0%E7%9A%84%E5%88%87%E9%9D%A2%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E8%A6%81%E5%9C%A8%E5%93%AA%E4%BA%9B%E7%B1%BB%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E7%9A%84%E5%89%8D%E5%90%8E%E6%89%A7%E8%A1%8C%0A%20%20%20%20*%20%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%A1%88%E4%BE%8B%E6%8C%87%E6%98%8E%E4%BA%86%E6%98%AF%E5%B0%86%E5%88%87%E9%9D%A2%E5%88%87%E5%85%A5service%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8D%B3%E8%AF%A5%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E5%8F%AA%E8%A6%81%E4%B8%80%E6%89%A7%E8%A1%8C%E5%B0%B1%E8%B0%83%E7%94%A8%E5%88%87%E9%9D%A2%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95%EF%BC%8C%E8%87%B3%E4%BA%8E%E8%A6%81%E6%89%A7%E8%A1%8C%E5%93%AA%E4%BA%9B%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95%EF%BC%8C%E9%9C%80%E8%A6%81%E5%90%8E%E7%BB%AD%E6%AD%A5%E9%AA%A4%E7%BB%A7%E7%BB%AD%E9%85%8D%E7%BD%AE%0A%0A%60%60%60xml%0A%3Caop%3Aconfig%3E%0A%20%20%20%3Caop%3Aaspect%20id%3D%22myAspect%22%20ref%3D%22aBean%22%3E%0A%20%20%20%20%20%20%3Caop%3Apointcut%20id%3D%22businessService%22%0A%20%20%20%20%20%20%20%20%20expression%3D%22execution(<em>%20com.xyz.myapp.service.</em>.<em>(…))%22%2F%3E%0A%20%20%20%20%20%20%3C!–%20%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%20%20%3Caop%3Abefore%20pointcut-ref%3D%22businessService%22%20%0A%20%20%20%20%20%20%20%20%20method%3D%22doRequiredTask%22%2F%3E%0A%20%20%20%20%20%20%3C!–%20%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%20%20%3Caop%3Aafter%20pointcut-ref%3D%22businessService%22%20%0A%20%20%20%20%20%20%20%20%20method%3D%22doRequiredTask%22%2F%3E%0A%20%20%20%20%20%20%3C!–%20%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%20%20%3Caop%3Aafter-returning%20pointcut-ref%3D%22businessService%22%0A%20%20%20%20%20%20%20%20%20returning%3D%22retVal%22%0A%20%20%20%20%20%20%20%20%20method%3D%22doRequiredTask%22%2F%3E%0A%20%20%20%20%20%20%3C!–%20%E5%BC%82%E5%B8%B8%E6%8A%9B%E5%87%BA%E9%80%9A%E7%9F%A5–%3E%0A%20%20%20%20%20%20%3Caop%3Aafter-throwing%20pointcut-ref%3D%22businessService%22%0A%20%20%20%20%20%20%20%20%20throwing%3D%22ex%22%0A%20%20%20%20%20%20%20%20%20method%3D%22doRequiredTask%22%2F%3E%0A%20%20%20%20%20%20%3C!–%20%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%20%20%3Caop%3Aaround%20pointcut-ref%3D%22businessService%22%20%0A%20%20%20%20%20%20%20%20%20method%3D%22doRequiredTask%22%2F%3E%0A%20%20%20…%0A%20%20%20%3C%2Faop%3Aaspect%3E%0A%3C%2Faop%3Aconfig%3E%0A%3Cbean%20id%3D%22aBean%22%20class%3D%22…%22%3E%0A…%0A%3C%2Fbean%3E%0A%60%60%60%0A!%5B6906bc90093be45361359b6d422da53f.png%5D(en-resource%3A%2F%2Fdatabase%2F1018%3A1)%0A%0A!%5B7e0223d5cd1e4ba3eeeca3754c226ccb.png%5D(en-resource%3A%2F%2Fdatabase%2F1020%3A1)%0A%0A%23%23%23%23%20%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%3Cu%3E%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%A0%BC%E5%BC%8F%3C%2Fu%3E%EF%BC%9A%0A%0A%3Cu%3E</em>%E5%8D%95%E4%B8%AA%E7%82%B9%E7%94%A8%E6%9D%A5%E5%88%86%E5%89%B2%E5%8C%85%E5%90%8D%EF%BC%8C%E7%B1%BB%E5%90%8D%EF%BC%8C%E6%96%B9%E6%B3%95%E5%90%8D*%3C%2Fu%3E%0A%0A<strong>execution(%5B%E4%BF%AE%E9%A5%B0%E7%AC%A6%5D%20%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%20%E5%8C%85%E5%90%8D.%E7%B1%BB%E5%90%8D.%E6%96%B9%E6%B3%95%E5%90%8D(%E5%8F%82%E6%95%B0))</strong>%0A*%20execution%EF%BC%9A%E5%BF%85%E9%A1%BB%E8%A6%81%0A*%20%E4%BF%AE%E9%A5%B0%E7%AC%A6%EF%BC%9A%E5%8F%AF%E7%9C%81%E7%95%A5%0A*%20%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%EF%BC%9A%E5%BF%85%E9%A1%BB%E8%A6%81%EF%BC%8C%E4%BD%86%E6%98%AF%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8*%E9%80%9A%E9%85%8D%E7%AC%A6%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%0A%0A*%20**%E5%8C%85%E5%90%8D%C2%A0%EF%BC%9A**%0A%20%20%20%20*%20%E5%A4%9A%E7%BA%A7%E5%8C%85%E4%B9%8B%E9%97%B4%E4%BD%BF%E7%94%A8.%E5%88%86%E5%89%B2%0A%20%20%20%20*%20%E5%8C%85%E5%90%8D%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20*%20%E4%BB%A3%E6%9B%BF%EF%BC%8C%E5%A4%9A%E7%BA%A7%E5%8C%85%E5%90%8D%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%20*%20%E4%BB%A3%E6%9B%BF%0A%20%20%20%20*%20%E5%A6%82%E6%9E%9C%E6%83%B3%E7%9C%81%E7%95%A5%E4%B8%AD%E9%97%B4%E7%9A%84%E5%8C%85%E5%90%8D%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20…%0A*%20**%E7%B1%BB%E5%90%8D%EF%BC%9A**%0A%20%20%20%20*%20%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20*%20%E4%BB%A3%E6%9B%BF%0A%20%20%20%20*%20%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%86%99%E6%88%90%20*%20DaoImpl%0A*%20**%E6%96%B9%E6%B3%95%E5%90%8D%EF%BC%9A**%0A%20%20%20%20*%20%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20*%20%E5%A5%BD%E4%BB%A3%E6%9B%BF%0A%20%20%20%20*%20%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%86%99%E6%88%90add%20*%20%0A*%20**%E5%8F%82%E6%95%B0%EF%BC%9A**%0A%20%20%20%20*%20%E5%8F%82%E6%95%B0%E4%BD%BF%E7%94%A8%20*%20%E4%BB%A3%E6%9B%BF%0A%20%20%20%20*%20%E5%A6%82%E6%9E%9C%E6%9C%89%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20…%E4%BB%A3%E6%9B%BF%0A%0A!%5B6072916c32e601d94c0f51e6b83d0065.png%5D(en-resource%3A%2F%2Fdatabase%2F1019%3A1)%0A%0A%23%23%23%23%20%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%0A%0A%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%BA%94%E7%A7%8D%EF%BC%89%EF%BC%9A**%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%E3%80%81%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%E3%80%81%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5%E3%80%81%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E3%80%81%E5%BC%82%E5%B8%B8%E6%8A%9B%E5%87%BA%E9%80%9A%E7%9F%A5**%0A%0A**%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%EF%BC%9A**%0A*%20%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E4%B9%8B%E5%89%8D%E6%89%A7%E8%A1%8C%E9%80%9A%E7%9F%A5%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%3Caop%3Abefore%20method%3D%22before%22%20pointcut-ref%3D%22myPointcut%22%2F%3E%0A*%20%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%96%B9%E6%B3%95%E5%BC%80%E5%A7%8B%E6%97%B6%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E6%A0%A1%E9%AA%8C%0A%0A**%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%EF%BC%9A**%0A*%20%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E4%B9%8B%E5%90%8E%E6%89%A7%E8%A1%8C%E9%80%9A%E7%9F%A5%EF%BC%8C%E6%9C%89%E5%BC%82%E5%B8%B8%E5%88%99%E4%B8%8D%E6%89%A7%E8%A1%8C%E4%BA%86%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%3Caop%3Aafter-returning%20method%3D%22afterReturning%22%20%0Apointcut-ref%3D%22myPointcut%22%2F%3E%0A*%20%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%0A%0A**%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5%EF%BC%9A**%0A*%20%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E4%B9%8B%E5%90%8E%E6%89%A7%E8%A1%8C%E9%80%9A%E7%9F%A5%EF%BC%8C%E6%9C%89%E6%B2%A1%E6%9C%89%E5%BC%82%E5%B8%B8%E9%83%BD%E4%BC%9A%E6%89%A7%E8%A1%8C%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%3Caop%3Aafter%20method%3D%22after%22%20pointcut-ref%3D%22myPointcut%22%2F%3E%0A*%20%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E4%BE%8B%E5%A6%82%E5%83%8F%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%0A%0A**%E5%BC%82%E5%B8%B8%E6%8A%9B%E5%87%BA%E9%80%9A%E7%9F%A5%EF%BC%9A**%0A*%20%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%EF%BC%9A%E5%9C%A8%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E5%90%8E%E9%80%9A%E7%9F%A5%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%3Caop%3Aafter-throwing%20method%3D%22%20afterThrowing%20%22%20pointcut-%20%0Aref%3D%22myPointcut%22%2F%3E%0A*%20%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E5%8C%85%E8%A3%85%E5%BC%82%E5%B8%B8%0A%0A**%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%EF%BC%9A%EF%BC%88%E4%BD%BF%E7%94%A8%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E5%8F%AF%E4%BB%A5%E6%9B%BF%E4%BB%A3%E5%85%B6%E4%BB%96%E5%9B%9B%E4%B8%AA%E9%80%9A%E7%9F%A5%EF%BC%89**%0A*%20%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%EF%BC%9A%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E4%B9%8B%E5%89%8D%E5%92%8C%E4%B9%8B%E5%90%8E%E9%83%BD%E4%BC%9A%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E5%90%8E%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%3Caop%3Aaround%20method%3D%22around%22%20pointcut-ref%3D%22myPointcut%22%2F%3E%0A*%20%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E4%BA%8B%E5%8A%A1%E3%80%81%E7%BB%9F%E8%AE%A1%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%0A%0A!%5Bcc1c8d03855a2cac4b9a39857a6dba3b.png%5D(en-resource%3A%2F%2Fdatabase%2F1021%3A1)%40w%3D400%0A%0A%0A%23%23%23%23%20XML%E5%AE%9E%E7%8E%B0Spring%20AOP%20%E6%A1%88%E4%BE%8B%0A**%E8%A6%81%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84Math%E7%B1%BB**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop01%3B%0A%0A%2F**%0A%20*%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E7%B1%BB%0A%20*%2F%0Apublic%20class%20Math%7B%0A%20%20%20%20%2F%2F%E5%8A%A0%0A%20%20%20%20public%20int%20add(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Bn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2B%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E5%87%8F%0A%20%20%20%20public%20int%20sub(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1-n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22-%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E4%B9%98%0A%20%20%20%20public%20int%20mut(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1<em>n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22X%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E9%99%A4%0A%20%20%20%20public%20int%20div(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Fn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2F%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%20**%E7%BC%96%E8%BE%91%E9%80%9A%E7%9F%A5%E7%B1%BBAdvice**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop01%3B%0A%0Aimport%20org.aspectj.lang.JoinPoint%3B%0A%0A%2F**%0A%20</em>%20%E9%80%9A%E7%9F%A5%E7%B1%BB%EF%BC%8C%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20*%0A%20*%2F%0Apublic%20class%20Advices%20%7B%0A%20%20%20%20%0A%20%20%20%20public%20void%20before(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A**%E9%85%8D%E7%BD%AEAOP%20XML%E6%96%87%E4%BB%B6**%0A*%20%E5%8A%A0%E7%B2%97%E9%83%A8%E5%88%86%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E5%9C%A8%E5%8E%9FIOC%E5%86%85%E5%AE%B9%E4%B8%AD%E6%96%B0%E5%A2%9E%E7%9A%84%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E4%B8%BAAOP%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%BC%95%E5%85%A5%E5%A4%B1%E8%B4%A5%E5%88%99%E6%B2%A1%E6%9C%89%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E3%80%82xmlns%3A%E6%98%AFxml%20namespace%E7%9A%84%E7%AE%80%E5%86%99%E3%80%82xmlns%3Axsi%EF%BC%9A%E5%85%B6xsd%E6%96%87%E4%BB%B6%E6%98%AFxml%E9%9C%80%E8%A6%81%E9%81%B5%E5%AE%88%E7%9A%84%E8%A7%84%E8%8C%83%EF%BC%8C%E9%80%9A%E8%BF%87URL%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E6%98%AFw3%E7%9A%84%E7%BB%9F%E4%B8%80%E8%A7%84%E8%8C%83%EF%BC%8C%E5%90%8E%E9%9D%A2%E9%80%9A%E8%BF%87xsi%3AschemaLocation%E6%9D%A5%E5%AE%9A%E4%BD%8D%E6%89%80%E6%9C%89%E7%9A%84%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6%EF%BC%8C%E8%BF%99%E9%87%8C%E5%8F%AA%E8%83%BD%E6%88%90%E5%81%B6%E6%95%B0%E5%AF%B9%E5%87%BA%E7%8E%B0%E3%80%82%0A*%20%60%3Cbean%20id%3D%22advice%22%20class%3D%22com.zhangguo.Spring041.aop08.Advices%22%3E%3C%2Fbean%3E%60%E8%A1%A8%E7%A4%BA%E9%80%9A%E7%9F%A5bean%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91bean%0A*%20%60%20%3Caop%3Aconfig%20proxy-target-class%3D%22true%22%3E%60%E7%94%A8%E4%BA%8EAOP%E9%85%8D%E7%BD%AE%EF%BC%8Cproxy-target-class%E5%B1%9E%E6%80%A7%E8%A1%A8%E7%A4%BA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%B1%BB%E6%98%AF%E5%90%A6%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%EF%BC%8CSpring%E4%BC%9A%E4%BE%9D%E6%8D%AE%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8E%A5%E5%8F%A3%E5%88%99%E4%BD%BF%E7%94%A8JDK%E5%86%85%E7%BD%AE%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%AA%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E5%88%99%E4%BD%BF%E7%94%A8cblib%EF%BC%9B%E5%9C%A8Bean%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E6%89%80%E6%9C%89%E7%9A%84Spring%20AOP%E9%85%8D%E7%BD%AE%E9%83%BD%E5%BF%85%E9%A1%BB%E5%AE%9A%E4%B9%89%E5%9C%A8%3Caop%3Aconfig%3E%E5%85%83%E7%B4%A0%E5%86%85%E9%83%A8%E3%80%82%0A%0A*%20%60%3Caop%3Aaspect%3E%60%E5%85%83%E7%B4%A0%E6%9D%A5%E4%B8%BA%E5%85%B7%E4%BD%93%E7%9A%84%E5%88%87%E9%9D%A2%E5%AE%9E%E7%8E%B0%E5%BC%95%E7%94%A8%E5%90%8E%E7%AB%AFBean%E5%AE%9E%E4%BE%8B%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%88%87%E9%9D%A2Bean%E5%BF%85%E9%A1%BB%E6%9C%89%E4%B8%80%E4%B8%AA%E6%A0%87%E8%AF%86%E7%AC%A6%EF%BC%8C%E4%BE%9B%3Caop%3Aaspect%3E%E5%85%83%E7%B4%A0%E5%BC%95%E7%94%A8%E3%80%82aop%3Aaspect%E8%A1%A8%E7%A4%BA%E5%88%87%E9%9D%A2%E9%85%8D%E7%BD%AE%EF%BC%8C%C2%A0ref%E8%A1%A8%E7%A4%BA%E9%80%9A%E7%9F%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%9B%0A*%20%60aop%3Apointcut%60%E6%98%AF%E9%85%8D%E7%BD%AE%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%E5%B0%86%E6%B3%A8%E5%85%A5%E7%9A%84%E7%B2%BE%E7%A1%AE%E4%BD%8D%E7%BD%AE%EF%BC%8C%E9%82%A3%E4%BA%9B%E5%8C%85%EF%BC%8C%E7%B1%BB%EF%BC%8C%E6%96%B9%E6%B3%95%E9%9C%80%E8%A6%81%E6%8B%A6%E6%88%AA%E6%B3%A8%E5%85%A5%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.w3.org">2Fwww.w3.org</a>%2F2001%2FXMLSchema-instance%22%20%0A%20%20%20%20xmlns%3Ap%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fp%22%0A%20%20%20%20xmlns%3Aaop%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%2Fspring-beans.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%2Fspring-aop-4.3.xsd%22%3E%0A%20%20%20%20%20%0A%20%20%20%20%3C!–%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%20–%3E%0A%20%20%20%20%3Cbean%20id%3D%22math%22%20class%3D%22com.zhangguo.Spring041.aop08.Math%22%3E%3C%2Fbean%3E%0A%20%20%20%20%3C!–%20%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%3Cbean%20id%3D%22advice%22%20class%3D%22com.zhangguo.Spring041.aop08.Advices%22%3E%3C%2Fbean%3E%0A%20%20%20%20%3C!–%20AOP%E9%85%8D%E7%BD%AE%20–%3E%0A%20%20%20%20%3C!–%20proxy-target-class%E5%B1%9E%E6%80%A7%E8%A1%A8%E7%A4%BA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%B1%BB%E6%98%AF%E5%90%A6%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%EF%BC%8CSpring%E4%BC%9A%E4%BE%9D%E6%8D%AE%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8E%A5%E5%8F%A3%E5%88%99%E4%BD%BF%E7%94%A8JDK%E5%86%85%E7%BD%AE%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%AA%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E5%88%99%E4%BD%BF%E7%94%A8cblib%20–%3E%0A%20%20%20%20%3Caop%3Aconfig%20proxy-target-class%3D%22true%22%3E%0A%20%20%20%20%20%20%20%20%3C!–%20%E5%88%87%E9%9D%A2%E9%85%8D%E7%BD%AE%20–%3E%0A%20%20%20%20%20%20%20%20%3C!–ref%E8%A1%A8%E7%A4%BA%E9%80%9A%E7%9F%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%20–%3E%0A%20%20%20%20%20%20%20%20%3Caop%3Aaspect%20ref%3D%22advice%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!–%20%E9%85%8D%E7%BD%AE%E5%88%87%E5%85%A5%E7%82%B9(%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%E5%B0%86%E6%B3%A8%E5%85%A5%E7%9A%84%E7%B2%BE%E7%A1%AE%E4%BD%8D%E7%BD%AE)%20–%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Apointcut%20expression%3D%22execution(<em>%20com.zhangguo.Spring041.aop08.Math.</em>(…))%22%20id%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!–%E5%A3%B0%E6%98%8E%E9%80%9A%E7%9F%A5%EF%BC%8Cmethod%E6%8C%87%E5%AE%9A%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%EF%BC%8Cpointcut%E6%8C%87%E5%AE%9A%E5%88%87%E7%82%B9%EF%BC%8C%E5%B0%B1%E6%98%AF%E8%AF%A5%E9%80%9A%E7%9F%A5%E5%BA%94%E8%AF%A5%E6%B3%A8%E5%85%A5%E9%82%A3%E4%BA%9B%E6%96%B9%E6%B3%95%E4%B8%AD%20–%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Abefore%20method%3D%22before%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Aafter%20method%3D%22after%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C%2Faop%3Aaspect%3E%0A%20%20%20%20%3C%2Faop%3Aconfig%3E%0A%3C%2Fbeans%3E%0A%60%60%60%0A*%20aop%3Abefore%E7%94%A8%E4%BA%8E%E5%A3%B0%E6%98%8E%E9%80%9A%E7%9F%A5%EF%BC%8Cmethod%E6%8C%87%E5%AE%9A%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%EF%BC%8Cpointcut%E6%8C%87%E5%AE%9A%E5%88%87%E7%82%B9%EF%BC%8C%E5%B0%B1%E6%98%AF%E8%AF%A5%E9%80%9A%E7%9F%A5%E5%BA%94%E8%AF%A5%E6%B3%A8%E5%85%A5%E9%82%A3%E4%BA%9B%E6%96%B9%E6%B3%95%E4%B8%AD%E3%80%82%E5%9C%A8aop%20Schema%E4%B8%AD%EF%BC%8C%E6%AF%8F%E7%A7%8D%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%E9%83%BD%E5%AF%B9%E5%BA%94%E4%B8%80%E4%B8%AA%E7%89%B9%E5%AE%9A%E5%9C%B0XML%E5%85%83%E7%B4%A0%E3%80%82%E9%80%9A%E7%9F%A5%E5%85%83%E7%B4%A0%E9%9C%80%E8%A6%81pointcut-ref%E5%B1%9E%E6%80%A7%E6%9D%A5%E5%BC%95%E7%94%A8%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E6%88%96%E8%80%85%E7%94%A8pointcut%E5%B1%9E%E6%80%A7%E7%9B%B4%E6%8E%A5%E5%B5%8C%E5%85%A5%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E3%80%82method%E5%B1%9E%E6%80%A7%E6%8C%87%E5%AE%9A%E5%88%87%E9%9D%A2%E7%B1%BB%E4%B8%AD%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95%E7%9A%84%E5%90%8D%E7%A7%B0%E3%80%82%E6%9C%89%E5%A6%82%E4%B8%8B%E5%87%A0%E7%A7%8D%EF%BC%9A%0A%60%60%60xml%0A%3C!–%20%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%20–%3E%0A%3Caop%3Abefore%20method%3D%22before%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%3C!–%20%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%20–%3E%0A%3Caop%3Aafter%20method%3D%22after%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%3C!–%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%20–%3E%0A%3Caop%3Aaround%20method%3D%22around%22%20pointcut%3D%22execution(<em>%20com.zhangguo.Spring041.aop08.Math.s</em>(…))%22%2F%3E%0A%3C!–%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5%20–%3E%0A%3Caop%3Aafter-throwing%20method%3D%22afterThrowing%22%20pointcut%3D%22execution(<em>%20com.zhangguo.Spring041.aop08.Math.d</em>(…))%22%20%20throwing%3D%22exp%22%2F%3E%0A%3C!–%20%E8%BF%94%E5%9B%9E%E5%80%BC%E9%80%9A%E7%9F%A5%20–%3E%0A%3Caop%3Aafter-returning%20method%3D%22afterReturning%22%20pointcut%3D%22execution(<em>%20com.zhangguo.Spring041.aop08.Math.m</em>(…))%22%20returning%3D%22result%22%2F%3E%0A%60%60%60%0A**%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C**%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop01%3B%0A%0Aimport%20org.springframework.context.ApplicationContext%3B%0Aimport%20org.springframework.context.support.ClassPathXmlApplicationContext%3B%0A%0Apublic%20class%20Test%20%7B%0A%0A%20%20%20%20public%20static%20void%20main(String%5B%5D%20args)%20%7B%0A%20%20%20%20%20%20%20%20ApplicationContext%20ctx%20%3D%20new%20ClassPathXmlApplicationContext(%22aop01.xml%22)%3B%0A%20%20%20%20%20%20%20%20Math%20math%20%3D%20ctx.getBean(%22math%22%2C%20Math.class)%3B%0A%20%20%20%20%20%20%20%20int%20n1%20%3D%20100%2C%20n2%20%3D%205%3B%0A%20%20%20%20%20%20%20%20math.add(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.sub(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.mut(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.div(n1%2C%20n2)%3B%0A%20%20%20%20%7D%0A%0A%7D%0A%60%60%60%0A**%E7%BB%93%E6%9E%9C**%0A!%5Be415ff2a8b4907a06caffe29ca2c164d.png%5D(en-resource%3A%2F%2Fdatabase%2F1013%3A1)%40w%3D200%0A%0A***%0A%20%20%20%20%0A%23%23%23%20AspectJ%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0AOP%0A%23%23%23%23%20%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%0A%23%23%23%23%23%20%E7%BC%96%E5%86%99%E7%9B%AE%E6%A0%87%E7%B1%BB%0A%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%88%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%EF%BC%89%0A*%20UserService%E6%8E%A5%E5%8F%A3%0A*%20UserServiceImpl%E5%AE%9E%E7%8E%B0%E7%B1%BB%0A%0A%3E%20%E9%85%8D%E7%BD%AE%E7%9B%AE%E6%A0%87%E7%B1%BB%EF%BC%8C%E5%B0%86%E7%9B%AE%E6%A0%87%E7%B1%BB%E4%BA%A4%E7%BB%99spring%20IoC%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%0A%0A%0A%23%23%23%23%23%20%E5%BC%80%E5%90%AFAOP%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%90%86%0A*%20%E5%9C%A8spring%E7%9A%84xml%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8A%A0%E5%85%A5%0A%60%60%60xml%0A%3Caop%3Aaspectj-autoproxy%2F%3E%0A%60%60%60%0A%23%23%23%23%23%20%E7%BC%96%E5%86%99Aspect%EF%BC%88%E5%88%87%E9%9D%A2%EF%BC%89%E7%B1%BB%0AAdvice%E9%80%9A%E7%9F%A5%2BPointCut%E5%88%87%E5%85%A5%E7%82%B9%3DAspect%E5%88%87%E9%9D%A2%0A%0A*%20%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%9F%BA%E4%BA%8EAspectj%E6%B3%A8%E8%A7%A3%E7%9A%84Spring%20aop%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%8A%8A%40Pointcut%E6%B3%A8%E8%A7%A3%E5%AE%9A%E4%B9%89Pointcut%EF%BC%8C%E6%8C%87%E5%AE%9A%E5%85%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8Pointcut%E8%A1%A8%E8%BE%BE%E6%97%B6%E7%9A%84%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9APointcut%0A%60%60%60java%0A%2F%2F%E5%88%87%E9%9D%A2%E7%B1%BB%EF%BC%8C%E8%A1%A8%E7%A4%BA%E9%80%9A%E7%9F%A5%E5%8A%A0%E5%88%87%E5%85%A5%E7%82%B9%0A%0A%2F%2F%E9%9C%80%E8%A6%81%E5%B0%86%E5%88%87%E9%9D%A2%E7%B1%BB%E5%B0%86%E7%BB%99spring%20IoC%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%0A%40Component%0A%2F%2F%40Aspect%3A%E6%A0%87%E8%AE%B0%E6%94%B9%E7%B1%BB%E6%98%AF%E4%B8%80%E4%B8%AA%E5%88%87%E9%9D%A2%E7%B1%BB%0A%40Aspect%0Apublic%20class%20MyAspect%20%7B%0A%2F%2F%20%E8%BF%99%E9%87%8C%E7%9A%84%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E5%90%8D%E6%B2%A1%E6%9C%89%E4%BB%80%E4%B9%88%E5%AE%9E%E9%99%85%E6%84%8F%E4%B9%89%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%E4%B8%80%E4%B8%AAid%EF%BC%8Cpointcut%E7%A7%8D%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E8%BF%99%E4%B8%AAid%E6%89%80%E5%8C%B9%E9%85%8D%E7%9A%84%E8%A6%81%E5%88%87%E5%85%A5%E7%9A%84%E9%82%A3%E4%BA%9B%E6%9F%B1%E5%AD%90%EF%BC%8C%E8%A6%81%E5%88%87%E5%85%A5%E6%89%A7%E8%A1%8C%E7%9A%84%E5%86%85%E5%AE%B9%E5%B0%B1%E6%98%AF%E4%B8%8B%E9%9D%A2%E7%9A%84%40before%E6%96%B9%E6%B3%95%EF%BC%8C%40before%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%8F%82%E6%95%B0%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B8%AApointcut%E6%B3%A8%E8%A7%A3%E6%96%B9%E6%B3%95%E7%9A%84%E5%90%8D%E5%AD%97%0A%20%20%20%20%40Pointcut(%22execution(<em>%20add(…))%22)%0A%20%20%20%20private%20void%20beforeAdd()%20%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%40Before%E8%A1%A8%E7%A4%BA%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20%20%20%20%2F%2Fvalue%EF%BC%9A%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%20%20%20%20%40Before(%22execution(</em>%20*…<em>.<em>ServiceImpl.</em>(…))%22)%0A%20%20%20%20public%20void%20before()%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22-----------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5-----------%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%7D%0A%60%60%60%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AE%E5%88%87%E9%9D%A2%E7%B1%BB%0A%E5%8D%B3%E8%AE%A9%E5%85%B6%E7%BA%B3%E5%85%A5spring%E7%AE%A1%E7%90%86%0A%60%60%60xml%0A%3Ccontext%3Acomponent-scan%20base-package%3D%22com.kkb.spring%22%2F%3E%0A%60%60%60%0A%0A%23%23%23%23%20%E5%85%B6%E4%BB%96%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%0A%60%60%60java%0Aimport%20org.aspectj.lang.JoinPoint%3B%0Aimport%20org.aspectj.lang.ProceedingJoinPoint%3B%0Aimport%20org.aspectj.lang.annotation.After%3B%0Aimport%20org.aspectj.lang.annotation.AfterReturning%3B%0Aimport%20org.aspectj.lang.annotation.AfterThrowing%3B%0Aimport%20org.aspectj.lang.annotation.Around%3B%0Aimport%20org.aspectj.lang.annotation.Aspect%3B%0Aimport%20org.aspectj.lang.annotation.Before%3B%0Aimport%20org.aspectj.lang.annotation.Pointcut%3B%0Aimport%20org.springframework.stereotype.Component%3B%0A%0A%2F**%0A%20</em>%20%E9%80%9A%E7%9F%A5%E7%B1%BB%EF%BC%8C%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20*%2F%0A%40Component%0A%40Aspect%0Apublic%20class%20Advices%20%7B%0A%20%20%20%20%2F%2F%E5%88%87%E7%82%B9%0A%20%20%20%20%40Pointcut(%22execution(<em>%20com.zhangguo.Spring052.aop04.Math.a</em>(…))%22)%0A%20%20%20%20public%20void%20pointcut()%7B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%0A%20%20%20%20%40Before(%22pointcut()%22)%0A%20%20%20%20public%20void%20before(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5%0A%20%20%20%20%40After(%22pointcut()%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%0A%20%20%20%20%40Around(%22execution(<em>%20com.zhangguo.Spring052.aop04.Math.s</em>(…))%22)%0A%20%20%20%20public%20Object%20around(ProceedingJoinPoint%20pjp)%20throws%20Throwable%7B%0A%20%20%20%20%20%20%20%20System.out.println(pjp.getSignature().getName())%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E7%8E%AF%E7%BB%95%E5%89%8D%E7%BD%AE----------%22)%3B%0A%20%20%20%20%20%20%20%20Object%20result%3Dpjp.proceed()%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E7%8E%AF%E7%BB%95%E5%90%8E%E7%BD%AE----------%22)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E9%80%9A%E7%9F%A5%0A%20%20%20%20%40AfterReturning(pointcut%3D%22execution(<em>%20com.zhangguo.Spring052.aop04.Math.m</em>(…))%22%2Creturning%3D%22result%22)%0A%20%20%20%20public%20void%20afterReturning(JoinPoint%20jp%2CObject%20result)%7B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E7%BB%93%E6%9E%9C%E6%98%AF%EF%BC%9A%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C----------%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E5%BC%82%E5%B8%B8%E5%90%8E%E9%80%9A%E7%9F%A5%0A%20%20%20%20%40AfterThrowing(pointcut%3D%22execution(<em>%20com.zhangguo.Spring052.aop04.Math.d</em>(…))%22%2Cthrowing%3D%22exp%22)%0A%20%20%20%20public%20void%20afterThrowing(JoinPoint%20jp%2CException%20exp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E5%BC%82%E5%B8%B8%E6%B6%88%E6%81%AF%EF%BC%9A%22%2Bexp.getMessage())%3B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%23%23%23%23%20%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%EF%BC%88%E7%89%B9%E6%AE%8A%EF%BC%89%0A**%40Around**%0A*%20%E4%BD%9C%E7%94%A8%EF%BC%9A%E6%8A%8A%E5%BD%93%E5%89%8D%E6%96%B9%E6%B3%95%E7%9C%8B%E4%BD%9C%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%0A*%20%E5%B1%9E%E6%80%A7%0A%20%20%20%20*%20value%EF%BC%9A%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E8%BF%98%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%BC%95%E7%94%A8%0A%0A!%5B53eeff2bdceca466fc1fce018e5cbf86.png%5D(en-resource%3A%2F%2Fdatabase%2F1022%3A1)%40w%3D450%0A%0A%23%23%23%23%20%E5%AE%9A%E4%B9%89%E9%80%9A%E7%94%A8%E5%88%87%E5%85%A5%E7%82%B9%0A%E4%BD%BF%E7%94%A8%40PointCut%E6%B3%A8%E8%A7%A3%E5%9C%A8%E5%88%87%E9%9D%A2%E7%B1%BB%E4%B8%AD%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E9%80%9A%E7%94%A8%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E5%85%B6%E4%BB%96%E9%80%9A%E7%9F%A5%E5%8F%AF%E4%BB%A5%E5%BC%95%E7%94%A8%E8%AF%A5%E5%88%87%E5%85%A5%E7%82%B9%0A%0A!%5B8b08a02492b6c0a19f5401cfedcd4f47.png%5D(en-resource%3A%2F%2Fdatabase%2F1023%3A1)%40w%3D400%0A%0A%0A%23%23%23%23%20%E9%9B%B6%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%0A%60%60%60java%0A%2F%2F%E5%A3%B0%E6%98%8E%E6%94%B9%E7%B1%BB%E6%98%AF%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BB%0A%40Configuration%0A%2F%2F%E5%B0%86com.kkb%E5%8C%85%E7%BA%B3%E5%85%A5%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F%0A%40ComponentScan(basePackages%3D%22com.kkb%22)%0A%2F%2F%E8%BF%99%E4%B8%AA%E5%B0%B1%E7%9B%B8%E5%BD%93%E4%BA%8Exml%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%3Caop%3Aaspectj-autoproxy%2F%3E%20%20AOP%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%90%86%0A%40EnableAspectJAutoProxy%0Apublic%20class%20SpringConfiguration%20%7B%0A%2F%2F%E5%9C%A8%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AAbean%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%3Cbean%20id%3DgetUser%20class%3D%22com.zhangguo.Spring052.aop05.User%22%2F%3E%20%0A%20%20%20%20%40Bean%20%0A%20%20%20%20public%20User%20getUser()%7B%20return%20new%20User()%3B%20%7D%0A%0A%7D%0A%0A%60%60%60%0A%23%23%23%23%20%E5%8E%9F%E7%90%86%0A%0A%E5%85%B6%E5%AE%9EAOP%E7%9A%84%E5%8E%9F%E7%90%86%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%E3%80%82%E6%88%91%E4%BB%AC%E4%BB%A5LoggingAspect.doAccessCheck()%E4%B8%BA%E4%BE%8B%EF%BC%8C%E8%A6%81%E6%8A%8A%E5%AE%83%E6%B3%A8%E5%85%A5%E5%88%B0UserService%E7%9A%84%E6%AF%8F%E4%B8%AApublic%E6%96%B9%E6%B3%95%E4%B8%AD%EF%BC%8C%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%AD%90%E7%B1%BB%EF%BC%8C%E5%B9%B6%E6%8C%81%E6%9C%89%E5%8E%9F%E5%A7%8B%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%9A%0A%60%60%60java%0A%0A%40Aspect%40Componentpublic%20class%20LoggingAspect%20%7B%0A%20%20%20%20%2F%2F%20%E5%9C%A8%E6%89%A7%E8%A1%8CUserService%E7%9A%84%E6%AF%8F%E4%B8%AA%E6%96%B9%E6%B3%95%E5%89%8D%E6%89%A7%E8%A1%8C%3A%0A%20%20%20%20%40Before(%22execution(public%20*%20com.itranswarp.learnjava.service.UserService.<em>(…))%22)%0A%20%20%20%20public%20void%20doAccessCheck()%20%7B%0A%20%20%20%20%20%20%20%20System.err.println(%22%5BBefore%5D%20do%20access%20check…%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20%E5%9C%A8%E6%89%A7%E8%A1%8CMailService%E7%9A%84%E6%AF%8F%E4%B8%AA%E6%96%B9%E6%B3%95%E5%89%8D%E5%90%8E%E6%89%A7%E8%A1%8C%3A%0A%20%20%20%20%40Around(%22execution(public%20</em>%20com.itranswarp.learnjava.service.MailService.<em>(…))%22)%0A%20%20%20%20public%20Object%20doLogging(ProceedingJoinPoint%20pjp)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20System.err.println(%22%5BAround%5D%20start%20%22%20%2B%20pjp.getSignature())%3B%0A%20%20%20%20%20%20%20%20Object%20retVal%20%3D%20pjp.proceed()%3B%0A%20%20%20%20%20%20%20%20System.err.println(%22%5BAround%5D%20done%20%22%20%2B%20pjp.getSignature())%3B%0A%20%20%20%20%20%20%20%20return%20retVal%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%E5%AD%90%E7%B1%BB%0Apublic%20UserServiceAopProxy%20extends%20UserService%20%7B%0A%20%20%20%20private%20UserService%20target%3B%0A%20%20%20%20private%20LoggingAspect%20aspect%3B%0A%0A%20%20%20%20public%20UserServiceAopProxy(UserService%20target%2C%20LoggingAspect%20aspect)%20%7B%0A%20%20%20%20%20%20%20%20this.target%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20this.aspect%20%3D%20aspect%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20User%20login(String%20email%2C%20String%20password)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%E5%85%88%E6%89%A7%E8%A1%8CAspect%E7%9A%84%E4%BB%A3%E7%A0%81%3A%0A%20%20%20%20%20%20%20%20aspect.doAccessCheck()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%E5%86%8D%E6%89%A7%E8%A1%8CUserService%E7%9A%84%E9%80%BB%E8%BE%91%3A%0A%20%20%20%20%20%20%20%20return%20target.login(email%2C%20password)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20User%20register(String%20email%2C%20String%20password%2C%20String%20name)%20%7B%0A%20%20%20%20%20%20%20%20aspect.doAccessCheck()%3B%0A%20%20%20%20%20%20%20%20return%20target.register(email%2C%20password%2C%20name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20…%0A%7D%0A%60%60%60%0A%E8%BF%99%E4%BA%9B%E9%83%BD%E6%98%AFSpring%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E6%97%B6%E4%B8%BA%E6%88%91%E4%BB%AC%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E7%9A%84%E6%B3%A8%E5%85%A5%E4%BA%86Aspect%E7%9A%84%E5%AD%90%E7%B1%BB%EF%BC%8C%E5%AE%83%E5%8F%96%E4%BB%A3%E4%BA%86%E5%8E%9F%E5%A7%8B%E7%9A%84UserService%EF%BC%88%E5%8E%9F%E5%A7%8B%E7%9A%84UserService%E5%AE%9E%E4%BE%8B%E4%BD%9C%E4%B8%BA%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F%E9%9A%90%E8%97%8F%E5%9C%A8UserServiceAopProxy%E4%B8%AD%EF%BC%89%E3%80%82%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E6%89%93%E5%8D%B0%E4%BB%8ESpring%E5%AE%B9%E5%99%A8%E8%8E%B7%E5%8F%96%E7%9A%84UserService%E5%AE%9E%E4%BE%8B%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%AE%83%E7%B1%BB%E4%BC%BCUserService%24%24EnhancerBySpringCGLIB%24%241f44e01c%EF%BC%8C%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AFSpring%E4%BD%BF%E7%94%A8CGLIB%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E7%9A%84%E5%AD%90%E7%B1%BB%EF%BC%8C%E4%BD%86%E5%AF%B9%E4%BA%8E%E8%B0%83%E7%94%A8%E6%96%B9%E6%9D%A5%E8%AF%B4%EF%BC%8C%E6%84%9F%E8%A7%89%E4%B8%8D%E5%88%B0%E4%BB%BB%E4%BD%95%E5%8C%BA%E5%88%AB%E3%80%82%0A%0A%3ESpring%E5%AF%B9%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E4%BD%BF%E7%94%A8JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E5%AF%B9%E6%99%AE%E9%80%9A%E7%B1%BB%E4%BD%BF%E7%94%A8CGLIB%E5%88%9B%E5%BB%BA%E5%AD%90%E7%B1%BB%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AABean%E7%9A%84class%E6%98%AFfinal%EF%BC%8CSpring%E5%B0%86%E6%97%A0%E6%B3%95%E4%B8%BA%E5%85%B6%E5%88%9B%E5%BB%BA%E5%AD%90%E7%B1%BB%E3%80%82%0A%0A%E5%8F%AF%E8%A7%81%EF%BC%8C%E8%99%BD%E7%84%B6Spring%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0AOP%E7%9A%84%E9%80%BB%E8%BE%91%E6%AF%94%E8%BE%83%E5%A4%8D%E6%9D%82%EF%BC%88%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8AspectJ%E8%A7%A3%E6%9E%90%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%B9%B6%E9%80%9A%E8%BF%87CGLIB%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%90%86%E7%B1%BB%EF%BC%89%EF%BC%8C%E4%BD%86%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8AOP%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%EF%BC%8C%E4%B8%80%E5%85%B1%E9%9C%80%E8%A6%81%E4%B8%89%E6%AD%A5%EF%BC%9A%0A</em>%20%E5%AE%9A%E4%B9%89%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95%EF%BC%8C%E5%B9%B6%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E9%80%9A%E8%BF%87AspectJ%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%91%8A%E8%AF%89Spring%E5%BA%94%E8%AF%A5%E5%9C%A8%E4%BD%95%E5%A4%84%E8%B0%83%E7%94%A8%E6%AD%A4%E6%96%B9%E6%B3%95%EF%BC%9B%0A*%20%E6%A0%87%E8%AE%B0%40Component%E5%92%8C%40Aspect%EF%BC%9B%0A*%20%E5%9C%A8%40Configuration%E7%B1%BB%E4%B8%8A%E6%A0%87%E6%B3%A8%40EnableAspectJAutoProxy%E3%80%82%0A%0A%23%23%23%23%20%E6%A1%88%E4%BE%8B%3A%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AEAOP%0A*%20%E5%9C%A8%E4%B8%8A%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B%E4%B8%AD%E4%BF%AE%E6%94%B9%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%B1%BBMath%2C%E4%B8%BA%E4%BA%86%E5%AE%9E%E7%8E%B0IOC%E6%89%AB%E6%8F%8F%E5%9C%A8Math%E7%B1%BB%E4%B8%8A%E6%B3%A8%E8%A7%A3%E4%BA%86%40Service%E5%B9%B6%E5%91%BD%E5%90%8Dbean%E4%B8%BAmath%E3%80%82%E7%9B%B8%E5%BD%93%E4%BA%8E%E4%B8%8A%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B%E4%B8%AD%E5%9C%A8xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A2%9E%E5%8A%A0%E4%BA%86%E4%B8%80%E4%B8%AAbean%EF%BC%8C%3C!–%20%E8%A2%AB%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%20–%3E%3Cbean%20id%3D%22math%22%20class%3D%22com.zhangguo.Spring052.aop01.Math%22%3E%3C%2Fbean%3E%EF%BC%8CMath%E7%B1%BB%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop02%3B%0A%0Aimport%20org.springframework.stereotype.Service%3B%0A%0A%2F**%0A%20*%20%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E7%B1%BB%0A%20*%2F%0A%40Service(%22math%22)%0Apublic%20class%20Math%7B%0A%20%20%20%20%2F%2F%E5%8A%A0%0A%20%20%20%20public%20int%20add(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Bn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2B%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E5%87%8F%0A%20%20%20%20public%20int%20sub(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1-n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22-%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E4%B9%98%0A%20%20%20%20public%20int%20mut(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1<em>n2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22X%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%E9%99%A4%0A%20%20%20%20public%20int%20div(int%20n1%2Cint%20n2)%7B%0A%20%20%20%20%20%20%20%20int%20result%3Dn1%2Fn2%3B%0A%20%20%20%20%20%20%20%20System.out.println(n1%2B%22%2F%22%2Bn2%2B%22%3D%22%2Bresult)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A</em>%20%E4%BF%AE%E6%94%B9%E9%80%9A%E7%9F%A5%E7%B1%BBAdvices%EF%BC%8C%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%9C%893%E4%B8%AA%E6%B3%A8%E8%A7%A3%EF%BC%8C%40Component%E8%A1%A8%E7%A4%BA%E8%AF%A5%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E4%BC%9A%E8%A2%ABSpring%20IOC%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%9B%40Aspect%E8%A1%A8%E7%A4%BA%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E5%88%87%E9%9D%A2%EF%BC%9B%40Before%E8%A1%A8%E7%A4%BAbefore%E4%B8%BA%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%EF%BC%8C%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0execution%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E5%88%87%E7%82%B9%EF%BC%8CAdvices.java%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A%0A%3E%20%E8%BF%99%E4%B8%AAJava%E7%B1%BB%E5%B0%B1%E7%9B%B8%E5%BD%93%E4%BA%8E%60%E4%BD%BF%E7%94%A8XML%E9%85%8D%E7%BD%AESpring%20MVC%E6%97%B6%E5%80%99%E7%9A%84%3Caop%3Aconfig%3E%60%20%E7%9A%84%E9%85%8D%E7%BD%AE%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop02%3B%0A%0Aimport%20org.aspectj.lang.JoinPoint%3B%0Aimport%20org.aspectj.lang.annotation.After%3B%0Aimport%20org.aspectj.lang.annotation.Aspect%3B%0Aimport%20org.aspectj.lang.annotation.Before%3B%0Aimport%20org.springframework.stereotype.Component%3B%0A%0A%2F**%0A%20*%20%E9%80%9A%E7%9F%A5%E7%B1%BB%EF%BC%8C%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20*%0A%20*%2F%0A%40Component%0A%40Aspect%0Apublic%20class%20Advices%20%7B%0A%20%20%20%20%40Before(%22execution(<em>%20com.zhangguo.Spring052.aop02.Math.</em>(…))%22)%0A%20%20%20%20public%20void%20before(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%40After(%22execution(<em>%20com.zhangguo.Spring052.aop02.Math.</em>(…))%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A*%20%E4%B8%8A%E9%9D%A2Java%E7%B1%BB%E7%AD%89%E5%90%8C%E4%BA%8E%E4%B8%8B%E9%9D%A2%E7%9A%84xml%0A%60%60%60xml%0A%3C!–%20%E9%80%9A%E7%9F%A5%20–%3E%0A%20%20%20%20%3Cbean%20id%3D%22advices%22%20class%3D%22com.zhangguo.Spring052.aop01.Advices%22%3E%3C%2Fbean%3E%0A%20%20%20%20%0A%20%20%20%20%3C!–%20aop%E9%85%8D%E7%BD%AE%20–%3E%0A%20%20%20%20%3Caop%3Aconfig%20proxy-target-class%3D%22true%22%3E%0A%20%20%20%20%20%20%20%20%3C!–%E5%88%87%E9%9D%A2%20–%3E%0A%20%20%20%20%20%20%20%20%3Caop%3Aaspect%20ref%3D%22advices%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!–%20%E5%88%87%E7%82%B9%20–%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Apointcut%20expression%3D%22execution(<em>%20com.zhangguo.Spring052.aop01.Math.</em>(…))%22%20id%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!–%E8%BF%9E%E6%8E%A5%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95%E4%B8%8E%E5%88%87%E7%82%B9%20–%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Abefore%20method%3D%22before%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Caop%3Aafter%20method%3D%22after%22%20pointcut-ref%3D%22pointcut1%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C%2Faop%3Aaspect%3E%0A%20%20%20%20%3C%2Faop%3Aconfig%3E%0A%60%60%60%0A*%20Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%20%20%20%20*%20%E6%96%B0%E5%A2%9E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6aop02.xml%EF%BC%8C%E5%9C%A8%E9%85%8D%E7%BD%AEIOC%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%A2%9E%E5%8A%A0%E4%BA%86aop%3Aaspectj-autoproxy%E8%8A%82%E7%82%B9%EF%BC%8CSpring%E6%A1%86%E6%9E%B6%E4%BC%9A%E8%87%AA%E5%8A%A8%E4%B8%BA%E4%B8%8EAspectJ%E5%88%87%E9%9D%A2%E9%85%8D%E7%BD%AE%E7%9A%84Bean%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%EF%BC%8Cproxy-target-class%3D%22true%22%E5%B1%9E%E6%80%A7%E8%A1%A8%E7%A4%BA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B1%BB%EF%BC%8C%E8%80%8C%E9%9D%9E%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E4%B8%BA%E4%BA%86%E9%80%89%E6%8B%A9%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.w3.org">2Fwww.w3.org</a>%2F2001%2FXMLSchema-instance%22%20%0A%20%20%20%20xmlns%3Ap%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fp%22%0A%20%20%20%20xmlns%3Aaop%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%22%0A%20%20%20%20xmlns%3Acontext%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fcontext%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fbeans%2Fspring-beans.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fcontext%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Fcontext%2Fspring-context-4.3.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%0A%20%20%20%20%20%20%20%20http%3A%2F%<a target="_blank" rel="noopener" href="http://2Fwww.springframework.org">2Fwww.springframework.org</a>%2Fschema%2Faop%2Fspring-aop-4.3.xsd%22%3E%0A%20%20%20%20%20%20%20%20%3Ccontext%3Acomponent-scan%20base-package%3D%22com.zhangguo.Spring052.aop02%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Caop%3Aaspectj-autoproxy%20proxy-target-class%3D%22true%22%3E%3C%2Faop%3Aaspectj-autoproxy%3E%0A%3C%2Fbeans%3E%0A%60%60%60%0A%23%23%23%23%20AspectJ%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%23%23%23%23%23%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%0A*%20%40AspectJ%E4%BD%BF%E7%94%A8AspectJ%E4%B8%93%E9%97%A8%E7%9A%84%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8F%8F%E8%BF%B0%E5%88%87%E9%9D%A2%EF%BC%8CSpring%E6%89%80%E6%94%AF%E6%8C%81%E7%9A%84AspectJ%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%AF%E5%88%86%E4%B8%BA%E5%9B%9B%E7%B1%BB%3A%0A%20%20%20%20*%20%E6%96%B9%E6%B3%95%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%EF%BC%9A%E9%80%9A%E8%BF%87%E6%8F%8F%E8%BF%B0%E7%9B%AE%E6%A0%87%E7%B1%BB%E6%96%B9%E6%B3%95%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%B9%89%E8%BF%9E%E6%8E%A5%E7%82%B9%E3%80%82%0A%20%20%20%20*%20%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%EF%BC%9A%E9%80%9A%E8%BF%87%E6%8F%8F%E8%BF%B0%E7%9B%AE%E6%A0%87%E7%B1%BB%E6%96%B9%E6%B3%95%E5%85%A5%E5%8F%82%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%B9%89%E8%BF%9E%E6%8E%A5%E7%82%B9%E3%80%82%0A%20%20%20%20*%20%E7%9B%AE%E6%A0%87%E7%B1%BB%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%EF%BC%9A%E9%80%9A%E8%BF%87%E6%8F%8F%E8%BF%B0%E7%9B%AE%E6%A0%87%E7%B1%BB%E7%B1%BB%E5%9E%8B%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%B9%89%E8%BF%9E%E6%8E%A5%E7%82%B9%E3%80%82%0A%20%20%20%20*%20%E4%BB%A3%E7%90%86%E7%B1%BB%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%EF%BC%9A%E9%80%9A%E8%BF%87%E6%8F%8F%E8%BF%B0%E4%BB%A3%E7%90%86%E7%B1%BB%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%B9%89%E8%BF%9E%E6%8E%A5%E7%82%B9%E3%80%82%0A*%20%E6%A0%87%E5%87%86%E7%9A%84Aspectj%20Aop%E7%9A%84pointcut%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E5%BE%88%E4%B8%B0%E5%AF%8C%EF%BC%8C%E4%BD%86%E6%98%AFspring%20AOP%E5%8F%AA%E6%94%AF%E6%8C%819%E7%A7%8D%EF%BC%8C%E5%8F%A6%E5%A4%96%E5%8A%A0Spring%20Aop%E8%87%AA%E5%B7%B1%E6%89%A9%E5%85%85%E7%9A%84%E4%B8%80%E7%A7%8D%EF%BC%8C%E4%B8%80%E5%85%B1%E6%98%AF10%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E5%88%86%E5%88%AB%E5%A6%82%E4%B8%8B%0A%20%20%20%20*%20execution%EF%BC%9A%E6%BB%A1%E8%B6%B3%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%80%E6%9C%89%E7%9B%AE%E6%A0%87%E7%B1%BB%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20*%20within%EF%BC%9A%E6%8C%87%E5%AE%9A%E6%9F%90%E4%BA%9B%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%85%A8%E9%83%A8%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%B9%9F%E5%8F%AF%E7%94%A8%E6%9D%A5%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%8C%85%E3%80%82%0A%20%20%20%20*%20this%EF%BC%9ASpring%20Aop%E6%98%AF%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86%E7%9A%84%EF%BC%8C%E7%94%9F%E6%88%90%E7%9A%84bean%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%8Cthis%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B8%AA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%BD%93%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%97%B6%EF%BC%8C%E5%AF%B9%E5%BA%94%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E5%B0%B1%E6%98%AF%E5%AE%83%E4%BA%86%EF%BC%8CSpring%20Aop%E5%B0%86%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20target%EF%BC%9A%E5%BD%93%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%97%B6%EF%BC%8C%E5%AF%B9%E5%BA%94%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E5%B0%B1%E6%98%AF%E5%AE%83%E4%BA%86%EF%BC%8CSpring%20Aop%E5%B0%86%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20args%EF%BC%9A%E5%BD%93%E6%89%A7%E8%A1%8C%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0%E6%98%AF%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E6%97%B6%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20%40target%EF%BC%9A%E5%BD%93%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%97%B6%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20%40args%EF%BC%9A%E5%BD%93%E6%89%A7%E8%A1%8C%E7%9A%84%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%97%B6%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20%40within%EF%BC%9A%E4%B8%8E%40target%E7%B1%BB%E4%BC%BC%EF%BC%8C%E7%9C%8B%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%92%8C%E7%BD%91%E4%B8%8A%E7%9A%84%E8%AF%B4%E6%B3%95%E9%83%BD%E6%98%AF%40within%E5%8F%AA%E9%9C%80%E8%A6%81%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%B1%BB%E6%88%96%E8%80%85%E7%88%B6%E7%B1%BB%E4%B8%8A%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%88%99%40within%E4%BC%9A%E7%94%9F%E6%95%88%EF%BC%8C%E8%80%8C%40target%E5%88%99%E6%98%AF%E5%BF%85%E9%A1%BB%E6%98%AF%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%B1%BB%E4%B8%8A%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E3%80%82%E8%80%8C%E6%A0%B9%E6%8D%AE%E7%AC%94%E8%80%85%E7%9A%84%E6%B5%8B%E8%AF%95%E8%BF%99%E4%B8%A4%E8%80%85%E9%83%BD%E6%98%AF%E5%8F%AA%E8%A6%81%E7%9B%AE%E6%A0%87%E7%B1%BB%E6%88%96%E7%88%B6%E7%B1%BB%E4%B8%8A%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%8D%B3%E5%8F%AF%E3%80%82%0A%20%20%20%20*%20%40annotation%EF%BC%9A%E5%BD%93%E6%89%A7%E8%A1%8C%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%97%B6%E7%94%9F%E6%95%88%E3%80%82%0A%20%20%20%20*%20bean%EF%BC%9A%E5%BD%93%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E6%8C%87%E5%AE%9A%E7%9A%84bean%E7%9A%84%E6%96%B9%E6%B3%95%E6%97%B6%E7%94%9F%E6%95%88%E3%80%82%0A%23%23%23%23%23%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%8C%E6%A1%88%E4%BE%8B%0A*%20%E6%96%B0%E5%A2%9E%E4%B8%80%E4%B8%AA%E7%B1%BBStrUtil%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop03%3B%0A%0Aimport%20org.springframework.stereotype.Component%3B%0A%0A%40Component(%22strUtil%22)%0Apublic%20class%20StrUtil%20%7B%0A%20%20%20%20public%20void%20show()%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22Hello%20StrUtil!%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%60%60%60%0A*%20%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop03%3B%0A%0Aimport%20org.springframework.context.ApplicationContext%3B%0Aimport%20org.springframework.context.support.ClassPathXmlApplicationContext%3B%0A%0Apublic%20class%20Test%20%7B%0A%0A%20%20%20%20public%20static%20void%20main(String%5B%5D%20args)%20%7B%0A%20%20%20%20%20%20%20%20ApplicationContext%20ctx%20%3D%20new%20ClassPathXmlApplicationContext(%22aop03.xml%22)%3B%0A%20%20%20%20%20%20%20%20IMath%20math%20%3D%20ctx.getBean(%22math%22%2C%20Math.class)%3B%0A%20%20%20%20%20%20%20%20int%20n1%20%3D%20100%2C%20n2%20%3D%205%3B%0A%20%20%20%20%20%20%20%20math.add(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.sub(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.mut(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20math.div(n1%2C%20n2)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20StrUtil%20strUtil%3Dctx.getBean(%22strUtil%22%2CStrUtil.class)%3B%0A%20%20%20%20%20%20%20%20strUtil.show()%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A*%20<strong>execution</strong>%0A%20%20%20%20*%20execution%E6%98%AF%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9C%80%E5%A4%9A%E7%9A%84%E4%B8%80%E7%A7%8DPointcut%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%9F%90%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E6%89%A7%E8%A1%8C%0A%60%60%60%0Aexecution(modifiers-pattern%3F%20ret-type-pattern%20declaring-type-pattern%3F%20name-pattern(param-pattern)%20throws-pattern%3F)%0A%60%60%60%0A1.%20modifiers-pattern%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E7%9A%84%E8%AE%BF%E9%97%AE%E7%B1%BB%E5%9E%8B%EF%BC%8Cpublic%E7%AD%89%EF%BC%9B%0A2.%20ret-type-pattern%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%A6%82String%E8%A1%A8%E7%A4%BA%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E6%98%AFString%EF%BC%8C%E2%80%9C%5C*%E2%80%9D%E8%A1%A8%E7%A4%BA%E6%89%80%E6%9C%89%E7%9A%84%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%EF%BC%9B%0A3.%20declaring-type-pattern%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E7%9A%84%E5%A3%B0%E6%98%8E%E7%B1%BB%EF%BC%8C%E5%A6%82%E2%80%9Ccom.elim…%5C*%E2%80%9D%E8%A1%A8%E7%A4%BAcom.elim%E5%8C%85%E5%8F%8A%E5%85%B6%E5%AD%90%E5%8C%85%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%89%80%E6%9C%89%E7%B1%BB%E5%9E%8B%EF%BC%9B%0A4.%20name-pattern%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E7%9A%84%E5%90%8D%E7%A7%B0%EF%BC%8C%E5%A6%82%E2%80%9Cadd%5C*%E2%80%9D%E8%A1%A8%E7%A4%BA%E6%89%80%E6%9C%89%E4%BB%A5add%E5%BC%80%E5%A4%B4%E7%9A%84%E6%96%B9%E6%B3%95%E5%90%8D%EF%BC%9B%0A5.%20param-pattern%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%8Cname-pattern(param-pattern)%E5%85%B6%E5%AE%9E%E6%98%AF%E4%B8%80%E8%B5%B7%E7%9A%84%E8%A1%A8%E7%A4%BA%E7%9A%84%E6%96%B9%E6%B3%95%E9%9B%86%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%A6%82%E2%80%9Cadd()%E2%80%9D%E8%A1%A8%E7%A4%BA%E4%B8%8D%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84add%E6%96%B9%E6%B3%95%EF%BC%8C%E2%80%9Cadd(%5C*)%E2%80%9D%E8%A1%A8%E7%A4%BA%E5%B8%A6%E4%B8%80%E4%B8%AA%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E7%9A%84add%E6%96%B9%E6%B3%95%EF%BC%8C%E2%80%9Cadd(%5C*%2CString)%E2%80%9D%E5%88%99%E8%A1%A8%E7%A4%BA%E5%B8%A6%E4%B8%A4%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%94%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0%E6%98%AFString%E7%B1%BB%E5%9E%8B%E7%9A%84add%E6%96%B9%E6%B3%95%EF%BC%9B%0A6.%20throws-pattern%E8%A1%A8%E7%A4%BA%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%9E%8B%EF%BC%9B%E5%85%B6%E4%B8%AD%E4%BB%A5%E9%97%AE%E5%8F%B7%E7%BB%93%E6%9D%9F%E7%9A%84%E9%83%A8%E5%88%86%E9%83%BD%E6%98%AF%E5%8F%AF%E4%BB%A5%E7%9C%81%E7%95%A5%E7%9A%84%E3%80%82%0A%20%20%20%201.%20%E2%80%9Cexecution(<em>%20add())%E2%80%9D%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89%E7%9A%84%E4%B8%8D%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84add()%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%202.%20%E2%80%9Cexecution(public%20</em>%20com…%5C*.add*(…))%E2%80%9D%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89com%E5%8C%85%E5%8F%8A%E5%85%B6%E5%AD%90%E5%8C%85%E4%B8%8B%E6%89%80%E6%9C%89%E7%B1%BB%E7%9A%84%E4%BB%A5add%E5%BC%80%E5%A4%B4%E7%9A%84%E6%89%80%E6%9C%89public%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%203.%20%E2%80%9Cexecution(<em>%20%5C</em>(…)%20throws%20Exception)%E2%80%9D%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89%E6%8A%9B%E5%87%BAException%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82%0A%60%60%60java%0A%0A%40Component%0A%40Aspect%0Apublic%20class%20Advices%20%7B%0A%20%20%20%20%40Before(%22execution(<em>%20com.zhangguo.Spring052.aop03.Math.</em>(…))%22)%0A%20%20%20%20public%20void%20before(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%20%20%20%20System.out.println(jp.getSignature().getName())%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2Fexecution%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%20%20%20%20%2F%2Fcom.zhangguo.Spring052.aop03%E5%8C%85%E4%B8%8B%E6%89%80%E6%9C%89%E7%B1%BB%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E8%A2%AB%E5%88%87%E5%85%A5%0A%20%20%20%20%40After(%22execution(<em>%20com.zhangguo.Spring052.aop03.</em>.<em>(…))%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A!%5B41399f848259aa40b4120ab23785623e.png%5D(en-resource%3A%2F%2Fdatabase%2F1007%3A2)%0A%0A</em>%20<strong>within</strong>%0A%20%20%20%20*%20%20%20within%E6%98%AF%E7%94%A8%E6%9D%A5%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%EF%BC%8C%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%A7%8D%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E5%B0%86%E8%A2%AB%E6%8B%A6%E6%88%AA%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%201.%20%E2%80%9Cwithin(com.spring.aop.service.UserServiceImpl)%E2%80%9D%E5%8C%B9%E9%85%8DUserServiceImpl%E7%B1%BB%E5%AF%B9%E5%BA%94%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%EF%BC%8C%E8%80%8C%E4%B8%94%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%8F%AA%E8%83%BD%E6%98%AFUserServiceImpl%E7%B1%BB%E5%9E%8B%EF%BC%8C%E4%B8%8D%E8%83%BD%E6%98%AF%E5%85%B6%E5%AD%90%E7%B1%BB%E5%9E%8B%0A%20%20%20%20%20%20%20%202.%20%E2%80%9Cwithin(com.elim…<em>)%E2%80%9D%E5%8C%B9%E9%85%8Dcom.elim%E5%8C%85%E5%8F%8A%E5%85%B6%E5%AD%90%E5%8C%85%E4%B8%8B%E9%9D%A2%E6%89%80%E6%9C%89%E7%9A%84%E7%B1%BB%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E7%9A%84%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%E3%80%82%0A%60%60%60java%0A%2F%2Fwithin%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%20%20%20%20%2F%2Fcom.zhangguo.Spring052.aop03%E5%8C%85%E4%B8%8B%E6%89%80%E6%9C%89%E7%B1%BB%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E8%A2%AB%E5%88%87%E5%85%A5%0A%20%20%20%20%40After(%22within(com.zhangguo.Spring052.aop03.</em>)%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%60%60%60%0A!%5B41399f848259aa40b4120ab23785623e.png%5D(en-resource%3A%2F%2Fdatabase%2F1007%3A2)%0A%0A*%20<strong>this</strong>%0A%20%20%20%20*%20Spring%20Aop%E6%98%AF%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86%E7%9A%84%EF%BC%8Cthis%E5%B0%B1%E8%A1%A8%E7%A4%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E3%80%82this%E7%B1%BB%E5%9E%8B%E7%9A%84Pointcut%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%AF%AD%E6%B3%95%E6%98%AFthis(type)%EF%BC%8C%E5%BD%93%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E8%BD%AC%E6%8D%A2%E4%B8%BAtype%E6%8C%87%E5%AE%9A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%97%B6%E5%88%99%E8%A1%A8%E7%A4%BA%E5%8C%B9%E9%85%8D%E3%80%82%E5%9F%BA%E4%BA%8EJDK%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BB%A3%E7%90%86%E5%92%8C%E5%9F%BA%E4%BA%8ECGLIB%E7%9A%84%E4%BB%A3%E7%90%86%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%0A%20%20%20%20%20%20%20%201.%20%E2%80%9Cthis(com.spring.aop.service.IUserService)%E2%80%9D%E5%8C%B9%E9%85%8D%E7%94%9F%E6%88%90%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%98%AFIUserService%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E7%9A%84%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%0A%60%60%60java%0A%2F%2Fthis%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%20%20%20%20%2F%2F%E5%AE%9E%E7%8E%B0%E4%BA%86IMath%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BB%BB%E6%84%8F%E8%BF%9E%E6%8E%A5%E7%82%B9%0A%20%20%20%20%40After(%22this(com.zhangguo.Spring052.aop03.IMath)%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%60%60%60%0A!%5B91c5dd274415195d349d174a80bebe5a.png%5D(en-resource%3A%2F%2Fdatabase%2F1011%3A1)%0A%0A%0A*%20<strong>target</strong>%0A%20%20%20%20*%20Spring%20aop%E6%98%AF%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86%E7%9A%84%EF%BC%8Ctarget%E5%88%99%E8%A1%A8%E7%A4%BA%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E5%B8%83%E6%A0%87%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%BD%93%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E8%A2%AB%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%97%B6%E5%88%99%E8%A1%A8%E7%A4%BA%E5%8C%B9%E9%85%8D%0A%20%20%20%20%20%20%20%201.%20%E2%80%9Ctarget(com.spring.aop.service.IUserService)%E2%80%9D%E5%88%99%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E8%83%BD%E5%A4%9F%E8%BD%AC%E6%8D%A2%E4%B8%BAIUserService%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E7%9A%84%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%0A%0A*%20<strong>args</strong>%0A%20%20%20%20*%20arge%E7%94%A8%E6%9D%A5%E5%8C%B9%E9%85%8D%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%0A%20%20%20%20%20%20%20%201.%20%E2%80%9Cargs()%E2%80%9D%E5%8C%B9%E9%85%8D%E4%BB%BB%E4%BD%95%E4%B8%8D%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%20%20%20%20%202.%20%E2%80%9Cargs(java.lang.String)%E2%80%9D%E5%8C%B9%E9%85%8D%E4%BB%BB%E4%BD%95%E5%8F%AA%E5%B8%A6%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E8%80%8C%E4%B8%94%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%AFString%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%20%20%20%20%203.%20%E2%80%9Cargs(…)%E2%80%9D%E5%B8%A6%E4%BB%BB%E6%84%8F%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%20%20%20%20%204.%20%E2%80%9Cargs(java.lang.String%2C…)%E2%80%9D%E5%8C%B9%E9%85%8D%E5%B8%A6%E4%BB%BB%E6%84%8F%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E4%BD%86%E6%98%AF%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%AFString%E7%9A%84%E6%96%B9%E6%B3%95%0A%20%20%20%20%20%20%20%205.%20%E2%80%9Cargs(…%2Cjava.lang.String)%E2%80%9D%E5%8C%B9%E9%85%8D%E5%B8%A6%E4%BB%BB%E6%84%8F%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E4%BD%86%E6%98%AF%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%AFString%E7%9A%84%E6%96%B9%E6%B3%95%0A%0A%60%60%60java%0A%2F%2Fargs%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%20%20%20%20%2F%2F%E8%A6%81%E6%B1%82%E6%96%B9%E6%B3%95%E6%9C%89%E4%B8%A4%E4%B8%AAint%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E8%80%83%E6%89%8D%E4%BC%9A%E8%A2%AB%E7%BB%87%E5%85%A5%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20%20%20%20%40After(%22args(int%2Cint)%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%60%60%60%0A!%5Bd3cad0fd1024c7f80ea8d574ffc4e30a.png%5D(en-resource%3A%2F%2Fdatabase%2F1012%3A1)%0A%0A*%20**%40target**%0A%20%20%20%20*%20%40target%E5%8C%B9%E9%85%8D%E5%BD%93%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%85%B6%E7%88%B6%E7%B1%BB%E5%9E%8B%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%97%B6%0A%20%20%20%20%20%20%20%201.%20%E2%80%9C%40target(com.spring.support.MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8D%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%8A%E6%8B%A5%E6%9C%89MyAnnotation%E6%B3%A8%E8%A7%A3%E6%97%B6%0A%0A*%20**%40args**%0A%20%20%20%20*%20%40args%E5%8C%B9%E9%85%8D%E8%A2%AB%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%E5%90%AB%E6%9C%89%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%94%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%83%85%E5%86%B5%0A%20%20%20%20%20%20%20%201.%20%E2%80%9C%40args(com.spring.support.MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8D%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%B8%8A%E6%8B%A5%E6%9C%89MyAnnotation%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E3%80%82%E5%A6%82%E6%88%91%E4%BB%AC%E6%9C%89%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95add(MyParam%20param)%E6%8E%A5%E6%94%B6%E4%B8%80%E4%B8%AAMyParam%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E8%80%8CMyParam%E8%BF%99%E4%B8%AA%E7%B1%BB%E6%98%AF%E6%8B%A5%E6%9C%89%E6%B3%A8%E8%A7%A3MyAnnotation%E7%9A%84%EF%BC%8C%E5%88%99%E5%AE%83%E5%8F%AF%E4%BB%A5%E8%A2%ABPointcut%E8%A1%A8%E8%BE%BE%E5%BC%8F%E2%80%9C%40args(com.elim.spring.support.MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8D%E4%B8%8A%0A%0A*%20**%40within**%0A%20%20%20%20*%20%40within%E7%94%A8%E4%BA%8E%E5%8C%B9%E9%85%8D%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%88%96%E5%85%B6%E7%88%B6%E7%B1%BB%E5%9E%8B%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E7%9A%84%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E4%BD%86%E5%8F%AA%E6%9C%89%E5%9C%A8%E8%B0%83%E7%94%A8%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E6%B3%A8%E8%A7%A3%E7%9A%84%E7%B1%BB%E4%B8%8A%E7%9A%84%E6%96%B9%E6%B3%95%E6%97%B6%E6%89%8D%E5%8C%B9%E9%85%8D%0A%20%20%20%20%20%20%20%201.%20%E2%80%9C%40within(com.spring.support.MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8D%E8%A2%AB%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E5%A3%B0%E6%98%8E%E7%9A%84%E7%B1%BB%E4%B8%8A%E6%8B%A5%E6%9C%89MyAnnotation%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%83%85%E5%86%B5%E3%80%82%E6%AF%94%E5%A6%82%E6%9C%89%E4%B8%80%E4%B8%AAClassA%E4%B8%8A%E4%BD%BF%E7%94%A8%E4%BA%86%E6%B3%A8%E8%A7%A3MyAnnotation%E6%A0%87%E6%B3%A8%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95a()%EF%BC%8C%E9%82%A3%E4%B9%88%E5%9C%A8%E8%B0%83%E7%94%A8ClassA.a()%E6%96%B9%E6%B3%95%E6%97%B6%E5%B0%86%E5%8C%B9%E9%85%8D%E8%AF%A5Pointcut%EF%BC%9B%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%80%E4%B8%AAClassB%E4%B8%8A%E6%B2%A1%E6%9C%89MyAnnotation%E6%B3%A8%E8%A7%A3%EF%BC%8C%E4%BD%86%E6%98%AF%E5%AE%83%E7%BB%A7%E6%89%BF%E8%87%AAClassA%EF%BC%8C%E5%90%8C%E6%97%B6%E5%AE%83%E4%B8%8A%E9%9D%A2%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95b()%EF%BC%8C%E9%82%A3%E4%B9%88%E5%9C%A8%E8%B0%83%E7%94%A8ClassB().b()%E6%96%B9%E6%B3%95%E6%97%B6%E4%B8%8D%E4%BC%9A%E5%8C%B9%E9%85%8D%E8%AF%A5Pointcut%EF%BC%8C%E4%BD%86%E6%98%AF%E5%9C%A8%E8%B0%83%E7%94%A8ClassB().a()%E6%97%B6%E5%B0%86%E5%8C%B9%E9%85%8D%E8%AF%A5%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%EF%BC%8C%E5%9B%A0%E4%B8%BAa()%E6%98%AF%E5%AE%9A%E4%B9%89%E5%9C%A8%E7%88%B6%E7%B1%BB%E5%9E%8BClassA%E4%B8%8A%E7%9A%84%EF%BC%8C%E4%B8%94ClassA%E4%B8%8A%E4%BD%BF%E7%94%A8%E4%BA%86MyAnnotation%E6%B3%A8%E8%A7%A3%E3%80%82%E4%BD%86%E6%98%AF%E5%A6%82%E6%9E%9C%E5%AD%90%E7%B1%BBClassB%E8%A6%86%E5%86%99%E4%BA%86%E7%88%B6%E7%B1%BBClassA%E7%9A%84a()%E6%96%B9%E6%B3%95%EF%BC%8C%E5%88%99%E8%B0%83%E7%94%A8ClassB.a()%E6%96%B9%E6%B3%95%E6%97%B6%E4%B9%9F%E4%B8%8D%E5%8C%B9%E9%85%8D%E8%AF%A5Pointcut%0A%0A*%20**%40annotation**%0A%20%20%20%20*%20%40annotation%E7%94%A8%E4%BA%8E%E5%8C%B9%E9%85%8D%E6%96%B9%E6%B3%95%E4%B8%8A%E6%8B%A5%E6%9C%89%E6%8C%87%E5%AE%9A%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%83%85%E5%86%B5%0A%20%20%20%20%20%20%20%201.%20%E2%80%9C%40annotation(com.spring.support.MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%E6%8B%A5%E6%9C%89MyAnnotation%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%0A%0A*%20%60%E5%85%88%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%B9%89%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E7%9A%84%E6%B3%A8%E8%A7%A3%60%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop03%3B%0A%0Aimport%20java.lang.annotation.Documented%3B%0Aimport%20java.lang.annotation.ElementType%3B%0Aimport%20java.lang.annotation.Retention%3B%0Aimport%20java.lang.annotation.RetentionPolicy%3B%0Aimport%20java.lang.annotation.Target%3B%0A%0A%40Target(%7BElementType.METHOD%7D)%0A%40Retention(RetentionPolicy.RUNTIME)%0A%40Documented%0Apublic%20%40interface%20MyAnno%20%7B%0A%7D%0A%60%60%60%0A%60%60%60java%0A%2F%2F%40annotation%E5%88%87%E7%82%B9%E5%87%BD%E6%95%B0%0A%20%20%20%20%2F%2F%E8%A6%81%E6%B1%82%E6%96%B9%E6%B3%95%E5%BF%85%E9%A1%BB%E8%A2%AB%E6%B3%A8%E8%A7%A3com.zhangguo.Spring052.aop03.MyAnno%E6%89%8D%E4%BC%9A%E8%A2%AB%E7%BB%87%E5%85%A5%E6%A8%AA%E5%88%87%E9%80%BB%E8%BE%91%0A%20%20%20%20%40After(%22%40annotation(com.zhangguo.Spring052.aop03.MyAnno)%22)%0A%20%20%20%20public%20void%20after(JoinPoint%20jp)%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22----------%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5----------%22)%3B%0A%20%20%20%20%7D%0A%60%60%60%0A%60%60%60java%0Apackage%20com.zhangguo.Spring052.aop03%3B%0A%0Aimport%20org.springframework.stereotype.Component%3B%0A%0A%40Component(%22strUtil%22)%0Apublic%20class%20StrUtil%20%7B%0A%20%20%20%20%40MyAnno%0A%20%20%20%20public%20void%20show()%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22Hello%20StrUtil!%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A!%5Beb7609a8f95aa8f96cd01f8fddd9646c.png%5D(en-resource%3A%2F%2Fdatabase%2F1014%3A1)%0A%0A*%20<strong>bean</strong>%0A%20%20%20%20*%20bean%E7%94%A8%E4%BA%8E%E5%8C%B9%E9%85%8D%E5%BD%93%E8%B0%83%E7%94%A8%E7%9A%84%E6%98%AF%E6%8C%87%E5%AE%9A%E7%9A%84Spring%E7%9A%84%E6%9F%90%E4%B8%AAbean%E7%9A%84%E6%96%B9%E6%B3%95%E6%97%B6%0A%20%20%20%20%20%20%20%201.%20%E2%80%9Cbean(abc)%E2%80%9D%E5%8C%B9%E9%85%8DSpring%20Bean%E5%AE%B9%E5%99%A8%E4%B8%ADid%E6%88%96name%E4%B8%BAabc%E7%9A%84bean%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%0A%20%20%20%20%20%20%20%202.%20%E2%80%9Cbean(user*)%E2%80%9D%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89id%E6%88%96name%E4%B8%BA%E4%BB%A5user%E5%BC%80%E5%A4%B4%E7%9A%84bean%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%0A%0A%23%23%23%23%23%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%BB%84%E5%90%88%0A*%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%BB%84%E5%90%88%E5%B0%B1%E6%98%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%EF%BC%8C%E4%B8%8E%EF%BC%8C%E6%88%96%EF%BC%8C%E9%9D%9E%E3%80%82%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%BB%96%E4%BB%AC%E6%8A%8A%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%BB%84%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7%0A%20%20%20%201.%20bean(userService)%20%26%26%20args()%E2%80%9D%E5%8C%B9%E9%85%8Did%E6%88%96name%E4%B8%BAuserService%E7%9A%84bean%E7%9A%84%E6%89%80%E6%9C%89%E6%97%A0%E5%8F%82%E6%96%B9%E6%B3%95%E3%80%82%0A%20%20%20%202.%20%E2%80%9Cbean(userService)%20%7C%7C%20%40annotation(MyAnnotation)%E2%80%9D%E5%8C%B9%E9%85%8Did%E6%88%96name%E4%B8%BAuserService%E7%9A%84bean%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%EF%BC%8C%E6%88%96%E8%80%85%E6%98%AF%E6%96%B9%E6%B3%95%E4%B8%8A%E4%BD%BF%E7%94%A8%E4%BA%86MyAnnotation%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E3%80%82%0A%20%20%20%203.%20%E2%80%9Cbean(userService)%20%26%26%20!args()%E2%80%9D%E5%8C%B9%E9%85%8Did%E6%88%96name%E4%B8%BAuserService%E7%9A%84bean%E7%9A%84%E6%89%80%E6%9C%89%E6%9C%89%E5%8F%82%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E3%80%82%0A%0A%0A%23%23%23%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E8%A3%85%E9%85%8DAOP%0A%0A%E4%BD%BF%E7%94%A8AspectJ%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%B9%B6%E9%85%8D%E5%90%88%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%60execution(<em>%20xxx.Xyz.</em>(…))%60%20%20%E8%AF%AD%E6%B3%95%E6%9D%A5%E5%AE%9A%E4%B9%89%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E8%A3%85%E9%85%8DAOP%E3%80%82%0A%0A%E5%9C%A8%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E4%B8%AD%EF%BC%8C%E8%BF%99%E7%A7%8D%E5%86%99%E6%B3%95%E5%85%B6%E5%AE%9E%E5%BE%88%E5%B0%91%E4%BD%BF%E7%94%A8%E3%80%82%E5%81%87%E8%AE%BE%E4%BD%A0%E5%86%99%E4%BA%86%E4%B8%80%E4%B8%AASecurityAspect%EF%BC%9A%0A%60%60%60java%0A%40Aspect%0A%40Component%0Apublic%20class%20SecurityAspect%20%7B%0A%20%20%20%20%40Before(%22execution(public%20*%20com.itranswarp.learnjava.service.<em>.</em>(…))%22)%0A%20%20%20%20public%20void%20check()%20%7B%0A%20%20%20%20%20%20%20%20if%20(SecurityContext.getCurrentUser()%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20RuntimeException(%22check%20failed%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%E5%9F%BA%E6%9C%AC%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%97%A0%E5%B7%AE%E5%88%AB%E5%85%A8%E8%A6%86%E7%9B%96%EF%BC%8C%E5%8D%B3%E6%9F%90%E4%B8%AA%E5%8C%85%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%89%80%E6%9C%89Bean%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95%E9%83%BD%E4%BC%9A%E8%A2%AB%E8%BF%99%E4%B8%AAcheck()%E6%96%B9%E6%B3%95%E6%8B%A6%E6%88%AA%E3%80%82%0A%0A%E8%BF%98%E6%9C%89%E7%9A%84%E7%AB%A5%E9%9E%8B%E5%96%9C%E6%AC%A2%E7%94%A8%E6%96%B9%E6%B3%95%E5%90%8D%E5%89%8D%E7%BC%80%E8%BF%9B%E8%A1%8C%E6%8B%A6%E6%88%AA%EF%BC%9A%0A%60%60%60java%0A%40Around(%22execution(public%20*%20update*(…))%22)%0Apublic%20Object%20doLogging(ProceedingJoinPoint%20pjp)%20throws%20Throwable%20%7B%0A%20%20%20%20%2F%2F%20%E5%AF%B9update%E5%BC%80%E5%A4%B4%E7%9A%84%E6%96%B9%E6%B3%95%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E6%BA%90%3A%0A%20%20%20%20String%20old%20%3D%20setCurrentDataSource(%22master%22)%3B%0A%20%20%20%20Object%20retVal%20%3D%20pjp.proceed()%3B%0A%20%20%20%20restoreCurrentDataSource(old)%3B%0A%20%20%20%20return%20retVal%3B%0A%7D%0A%60%60%60%0A%E8%BF%99%E7%A7%8D%E9%9D%9E%E7%B2%BE%E5%87%86%E6%89%93%E5%87%BB%E8%AF%AF%E4%BC%A4%E9%9D%A2%E6%9B%B4%E5%A4%A7%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%BB%8E%E6%96%B9%E6%B3%95%E5%89%8D%E7%BC%80%E5%8C%BA%E5%88%86%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E6%98%AF%E9%9D%9E%E5%B8%B8%E4%B8%8D%E5%8F%AF%E5%8F%96%E7%9A%84%E3%80%82%0A%0A%E6%88%91%E4%BB%AC%E5%9C%A8%E4%BD%BF%E7%94%A8AOP%E6%97%B6%EF%BC%8C%E8%A6%81%E6%B3%A8%E6%84%8F%E5%88%B0%E8%99%BD%E7%84%B6Spring%E5%AE%B9%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%8A%8A%E6%8C%87%E5%AE%9A%E7%9A%84%E6%96%B9%E6%B3%95%E9%80%9A%E8%BF%87AOP%E8%A7%84%E5%88%99%E8%A3%85%E9%85%8D%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84Bean%E7%9A%84%E6%8C%87%E5%AE%9A%E6%96%B9%E6%B3%95%E5%89%8D%E5%90%8E%EF%BC%8C%E4%BD%86%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E6%97%B6%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%B8%8D%E6%81%B0%E5%BD%93%E7%9A%84%E8%8C%83%E5%9B%B4%EF%BC%8C%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E6%84%8F%E6%83%B3%E4%B8%8D%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%8D%B3%E5%BE%88%E5%A4%9A%E4%B8%8D%E9%9C%80%E8%A6%81AOP%E4%BB%A3%E7%90%86%E7%9A%84Bean%E4%B9%9F%E8%A2%AB%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%90%86%E4%BA%86%EF%BC%8C%E5%B9%B6%E4%B8%94%EF%BC%8C%E5%90%8E%E7%BB%AD%E6%96%B0%E5%A2%9E%E7%9A%84Bean%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%B8%85%E6%A5%9A%E7%8E%B0%E6%9C%89%E7%9A%84AOP%E8%A3%85%E9%85%8D%E8%A7%84%E5%88%99%EF%BC%8C%E5%AE%B9%E6%98%93%E8%A2%AB%E5%BC%BA%E8%BF%AB%E8%A3%85%E9%85%8D%E3%80%82%0A%0A%E4%BD%BF%E7%94%A8AOP%E6%97%B6%EF%BC%8C%E8%A2%AB%E8%A3%85%E9%85%8D%E7%9A%84Bean%E6%9C%80%E5%A5%BD%E8%87%AA%E5%B7%B1%E8%83%BD%E6%B8%85%E6%B8%85%E6%A5%9A%E6%A5%9A%E5%9C%B0%E7%9F%A5%E9%81%93%E8%87%AA%E5%B7%B1%E8%A2%AB%E5%AE%89%E6%8E%92%E4%BA%86%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%8CSpring%E6%8F%90%E4%BE%9B%E7%9A%84%40Transactional%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%B8%B8%E5%A5%BD%E7%9A%84%E4%BE%8B%E5%AD%90%E3%80%82%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84Bean%E5%B8%8C%E6%9C%9B%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E4%B8%AD%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E5%B0%B1%E6%A0%87%E6%B3%A8%E4%B8%8A%40Transactional%E3%80%82%0A%0A%E9%80%9A%E8%BF%87%40Transactional%EF%BC%8C%E6%9F%90%E4%B8%AA%E6%96%B9%E6%B3%95%E6%98%AF%E5%90%A6%E5%90%AF%E7%94%A8%E4%BA%86%E4%BA%8B%E5%8A%A1%E5%B0%B1%E4%B8%80%E6%B8%85%E4%BA%8C%E6%A5%9A%E4%BA%86%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E8%A3%85%E9%85%8DAOP%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%98%AF%E6%9C%80%E5%A5%BD%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82%0A%0A%E6%88%91%E4%BB%AC%E4%BB%A5%E4%B8%80%E4%B8%AA%E5%AE%9E%E9%99%85%E4%BE%8B%E5%AD%90%E6%BC%94%E7%A4%BA%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0AOP%E8%A3%85%E9%85%8D%E3%80%82%E4%B8%BA%E4%BA%86%E7%9B%91%E6%8E%A7%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%80%A7%E8%83%BD%EF%BC%8C%E6%88%91%E4%BB%AC%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%9A%0A%60%60%60java%0A%40Target(METHOD)%0A%40Retention(RUNTIME)%0Apublic%20%40interface%20MetricTime%20%7B%0A%20%20%20%20String%20value()%3B%0A%7D%0A%60%60%60%0A%0A%E5%9C%A8%E9%9C%80%E8%A6%81%E8%A2%AB%E7%9B%91%E6%8E%A7%E7%9A%84%E5%85%B3%E9%94%AE%E6%96%B9%E6%B3%95%E4%B8%8A%E6%A0%87%E6%B3%A8%E8%AF%A5%E6%B3%A8%E8%A7%A3%EF%BC%9A%0A%60%60%60java%0A%40Component%0Apublic%20class%20UserService%20%7B%0A%20%20%20%20%2F%2F%20%E7%9B%91%E6%8E%A7register()%E6%96%B9%E6%B3%95%E6%80%A7%E8%83%BD%3A%0A%20%20%20%20%40MetricTime(%22register%22)%0A%20%20%20%20public%20User%20register(String%20email%2C%20String%20password%2C%20String%20name)%20%7B%0A%20%20%20%20%20%20%20%20…%0A%20%20%20%20%7D%0A%20%20%20%20…%0A%7D%0A%60%60%60%0A%E7%84%B6%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E5%AE%9A%E4%B9%89MetricAspect%EF%BC%9A%0A%60%60%60java%0A%40Aspect%0A%40Component%0Apublic%20class%20MetricAspect%20%7B%0A%20%20%20%20%40Around(%22%40annotation(metricTime)%22)%0A%20%20%20%20public%20Object%20metric(ProceedingJoinPoint%20joinPoint%2C%20MetricTime%20metricTime)%20throws%20Throwable%20%7B%0A%20%20%20%20%20%20%20%20String%20name%20%3D%20metricTime.value()%3B%0A%20%20%20%20%20%20%20%20long%20start%20%3D%20System.currentTimeMillis()%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20joinPoint.proceed()%3B%0A%20%20%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20long%20t%20%3D%20System.currentTimeMillis()%20-%20start%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%86%99%E5%85%A5%E6%97%A5%E5%BF%97%E6%88%96%E5%8F%91%E9%80%81%E8%87%B3JMX%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20System.err.println(%22%5BMetrics%5D%20%22%20%2B%20name%20%2B%20%22%3A%20%22%20%2B%20t%20%2B%20%22ms%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%E6%B3%A8%E6%84%8Fmetric()%E6%96%B9%E6%B3%95%E6%A0%87%E6%B3%A8%E4%BA%86%40Around(%22%40annotation(metricTime)%22)%EF%BC%8C%E5%AE%83%E7%9A%84%E6%84%8F%E6%80%9D%E6%98%AF%EF%BC%8C%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%E6%98%AF%E5%B8%A6%E6%9C%89%40MetricTime%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9B%A0%E4%B8%BAmetric()%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E6%98%AFMetricTime%EF%BC%88%E6%B3%A8%E6%84%8F%E5%8F%82%E6%95%B0%E5%90%8D%E6%98%AFmetricTime%E4%B8%8D%E6%98%AFMetricTime%EF%BC%89%EF%BC%8C%E6%88%91%E4%BB%AC%E9%80%9A%E8%BF%87%E5%AE%83%E8%8E%B7%E5%8F%96%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%9A%84%E5%90%8D%E7%A7%B0%E3%80%82%0A%0A%E6%9C%89%E4%BA%86%40MetricTime%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%86%8D%E9%85%8D%E5%90%88MetricAspect%EF%BC%8C%E4%BB%BB%E4%BD%95Bean%EF%BC%8C%E5%8F%AA%E8%A6%81%E6%96%B9%E6%B3%95%E6%A0%87%E6%B3%A8%E4%BA%86%40MetricTime%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E5%AE%9E%E7%8E%B0%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E3%80%82%0A</p>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2026 Lism Blog | lisisism@qq.com</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>